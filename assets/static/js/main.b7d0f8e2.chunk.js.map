{"version":3,"sources":["libraries/network-error-handling.js","pages/config.js","libraries/socket.js","pages/Authentication.js","pages/sub-pages/ProjectsTabs/Overview.js","components/CreateBug.js","components/BugDiscussion.js","components/BugStats.js","components/BugAssignedTo.js","components/BugDescription.js","components/BugFiles.js","pages/sub-pages/ProjectsTabs/ViewBug.js","components/BugList.js","libraries/bugg-services/Announcement/index.js","libraries/bugg-services/Bug/index.js","libraries/bugg-services/Project/index.js","libraries/bugg-services/Message/index.js","libraries/bugg-services/Notification/index.js","libraries/bugg-services/User/index.js","libraries/bugg.js","pages/sub-pages/ProjectsTabs/Bugs.js","components/CreateAnnouncement.js","pages/sub-pages/ProjectsTabs/Announcements.js","pages/sub-pages/ProjectsTabs/Calendar.js","pages/sub-pages/ProjectsTabs/SettingsComponents/General.js","components/ModifyRole.js","pages/sub-pages/ProjectsTabs/SettingsComponents/Roles.js","pages/sub-pages/ProjectsTabs/SettingsComponents/Notifications.js","pages/sub-pages/ProjectsTabs/SettingsComponents/Members.js","pages/sub-pages/ProjectsTabs/Settings.js","pages/sub-pages/ProjectsTabs/Collaborators.js","pages/sub-pages/SkeletonProject.js","components/CreateProject.js","components/JoinProject.js","components/Home.js","pages/Settings.js","pages/Notifications.js","components/MessageContacts.js","components/MessageContainer.js","components/CreateConversation.js","pages/Messages.js","components/DesktopNavBar.js","components/NavWelcomeHeader.js","components/MobileNavBar.js","pages/Dashboard.js","App.js","reportWebVitals.js","index.js"],"names":["getErrorMessage","error","response","data","split","status","request","message","logErrorMessage","console","baseUrl","getDefaultHeader","window","localStorage","getItem","staticServerUrl","config","document","io","socketIOClient","require","sailsIOClient","sails","url","rejectUnauthorized","reconnection","socket","on","method","headers","res","jwr","log","initilizeSocket","addEventListener","name","func","removeEventListener","off","reconfigToken","unsubscribeFromMessages","token","Title","Typography","AuthenticationHooks","useState","setName","email","setEmail","password","setPassword","isMobile","useMediaQuery","maxWidth","mode","setMode","loading","setLoading","isAuthed","setIsAuthed","Form","useForm","form","handleSubmit","a","axios","post","notification","success","setItem","toggleMode","loginAsDemo","className","style","margin","padding","display","flexDirection","paddingLeft","paddingRight","paddingTop","minHeight","backgroundImage","backgroundSize","backgroundPosition","to","alignItems","flex","color","fontSize","marginBottom","opacity","justifyContent","borderRadius","labelAlign","labelCol","span","wrapperCol","initialValues","remember","onFinish","onFinishFailed","href","onClick","Item","label","rules","required","type","onChange","e","target","value","Password","offset","htmlType","App","props","renderChart","Promise","ctx","getElementById","getContext","pieChart","Chart","labels","datasets","state","totalBugsOpen","totalBugsClosed","backgroundColor","hoverOffset","setState","updateChart","update","fetchStats","get","project","id","totalBugs","totalMembers","this","prevProps","Fragment","marginRight","gap","title","gutter","width","direction","align","React","Component","Dragger","Upload","Option","Select","withRouter","EditorState","createEmpty","editorState","setEditorState","setTitle","tags","setTags","setValue","dueDate","setDueDate","assignTo","severity","setSeverity","reproducibility","setReproducibility","catagory","setCatagory","FormData","formData","fileRegister","beforeUpload","file","fileList","push","values","description","draftToHtml","convertToRaw","getCurrentContent","requestData","join","undefined","toDate","getTime","assignees","projectId","match","params","length","i","append","getAll","bugId","toggleFunc","_handleListUpdate","members","setMembers","query","setQuery","useEffect","isIn","results","newMembers","users","key","handleChange","layout","errorInfo","autoComplete","wrapperClassName","editorClassName","onEditorStateChange","placeholder","multiple","onRemove","uid","splice","InboxOutlined","marginTop","showSearch","filterOption","onSearch","val","option","map","doc","optionFilterProp","input","children","toLowerCase","indexOf","filterSort","optionA","optionB","localeCompare","CommentList","comments","dataSource","header","itemLayout","renderItem","submitting","TOKEN","_handleUpdateComments","bug","item","author","owner","avatar","content","overflowX","dangerouslySetInnerHTML","__html","body","datetime","moment","Date","createdAt","fromNow","reverse","level","src","alt","BugStats","editTags","editDueDate","editReproducibility","editSeverity","editCatagory","editStatus","toggleValue","updateStatistic","field","put","valueStyle","formatter","checkedChildren","unCheckedChildren","checked","defaultChecked","toUpperCase","icon","EditOutlined","mom","format","submitter","editAssigned","search","page","pageSize","total","selectedMembers","fetchAssignees","paginate","searchUsers","selectUser","addAssignees","size","Search","PlusOutlined","footer","current","showSizeChanger","showQuickJumper","bordered","ind","substring","visible","onOk","onCancel","Paragraph","BugDescription","updateDescription","text","editDescription","createWithContent","ContentState","createFromBlockArray","htmlToDraft","shape","DOMPurify","sanitize","isUploaded","fileId","uploadedFiles","serverId","files","_onFileDelete","delete","_onFileUpload","editFiles","filesToRender","tempFiles","tempFile","File","BugFiles","BugAssignedTo","formatDescription","str","totalBugCount","_handlePaginationChange","bugs","viewBug","shareBug","deleteBug","actions","onConfirm","marginLeft","preventDefault","pagination","Meta","plainTextDescription","updatedAt","throwError","err","Error","object","getAnnouncement","announcementId","announcement","getBug","leaveProject","getConversations","conversations","readAllMessages","conversationId","patch","getUnreadNotifications","limit","skip","totalUnreadNotifcations","UserData","obj","iconId","getMe","user","updateUser","test","String","updatePassword","newPassword","getUserIconUri","uploadUserIcon","bugg","User","Notification","Message","Bug","Announcement","Project","Input","selectedColor","fetchBugs","isSearchUpdated","location","pathname","selectedSort","sortBy","order","openBug","history","selectedBug","toggleDrawer","selectedBugTitle","handleActionUri","URLSearchParams","_handleSortChange","toggleCreatePopup","toggleViewBugPopup","searchQuery","listData","flexWrap","overlay","CalendarOutlined","FontSizeOutlined","FileSyncOutlined","DownOutlined","destroyOnClose","CreateBug","textToCopy","navigator","clipboard","writeText","Clipboard","copy","placement","closable","onClose","ViewBug","textArea","selectText","range","selection","userAgent","createRange","selectNodeContents","getSelection","removeAllRanges","addRange","setSelectionRange","select","createElement","appendChild","createTextArea","execCommand","removeChild","CreateAnnouncement","onFormSubmit","vals","closeModal","updateList","UserOutlined","formatName","nameSegments","shortHandName","handleOpenAnnouncement","has","selectedAnnouncement","fetchAndSetAnnouncements","resetList","announcements","uriProjectId","newAnnouncements","hasMore","handleInfiniteLoad","firstLoad","toggleState","createAnnouncement","borderColor","borderStyle","borderWidth","height","overflowY","overflowClipBox","initialLoad","pageStart","loadMore","useWindow","float","plainTextBody","date","_onDateSelected","_toggleDrawerState","_onDrawerClose","_onBugSelect","getBugsDue","year","day","dayOfYear","bugsDue","compareValue","dateCellRender","createNewEvent","selectedDate","onSelect","initializeComponent","setProject","setDescription","setImageUri","retreiveProject","imageUri","newImageUri","updateProject","newProject","useHistory","deleteProject","updateProjectOnNavigation","settings","reactNode","onPressEnter","o","listType","accept","showUploadList","danger","extra","PERMISSIONS","role","setSelectedMembers","setColor","setSearch","toggleUpdateRoleModal","fetchRoles","handleUserSearch","updateRole","permissions","modAnnouncements","getValue","modBugs","modGen","modMembers","roleId","getInitialValue","includes","initialValue","onChangeComplete","hex","valuePropName","Roles","roles","selectedRole","isModalVisible","updateRoleModalVisible","_handleUserSearch","_handleSelectUser","createRole","handleChangeComplete","deleteRole","react","Notifications","enableNotifications","getCurrentSetting","notificationSetting","recieveNotifications","setCurrentSetting","Members","selectedSetting","toLocaleUpperCase","fetchMembers","updateSearch","onChangePagination","toggleAddMember","updateMembersToAdd","selectedMembersToAdd","addMembers","userEmails","searchMembers","isInServer","membersToAdd","removeMember","userId","confirmVisible","deleteButtonLoading","isOwner","okButtonProps","DeleteOutlined","allowClear","getUriAction","action","activeTab","imageUrl","handleClick","getImageSize","backgroundRepeat","overflowedIndicator","position","selectedKeys","DashboardOutlined","BugOutlined","NotificationOutlined","SettingOutlined","TeamOutlined","Overview","Bugs","Announcements","Calendar","updateProjects","Collaborators","CreateProject","fileReader","FileReader","result","readAsDataURL","resetFields","closeFunc","JoinProject","setProjectId","ProjectButton","textAlign","visibleCreate","setVisibleCreate","visibleJoin","setVisibleJoin","projects","bodyStyle","xs","md","xl","Settings","updatePasswordVisible","loadingUpdatePassword","previewImageUri","fetchUser","getWelcomeMessage","updateIcon","iconUri","disabled","notifications","isListening","getAction","joinProject","payload","openNewMessage","close","dismissNotification","notificationId","fetchNotifications","dismissAllNotifications","onRecieveNotitification","notif","totalNotifications","updatePagination","getNotificationActionMessage","MailOutlined","read","MessageContacts","toggleCollapse","toggleHide","sendMessage","selectConversation","activeConversations","headStyle","MinusOutlined","overflow","reciepent","conversation","newMessages","lastMessageText","recipient","avatarLetter","sender","MessageContainer","messages","toggledState","listening","fetchMessages","replace","fetchConversations","newToggleState","elem","anime","targets","easing","duration","onRecieveNewMessage","fetchUnreadNotifications","removeConversation","CloseOutlined","index","isYou","timestamp","CreateConversation","selectedMember","toggleHideSimple","disableRefresh","newToggleHide","conversationIds","newConvos","setActiveConversationIds","findIndex","showNew","collapsed","contactsCollapsed","openMessageCollapsed","createConversationIsVisible","setOpenNewMessage","left","bottom","zIndex","MessageOutlined","SubMenu","Menu","DesktopNavBar","toggleCollapsed","willUnmount","logo","panel","button","dashboard","animate","initialCollasped","styles","navigation","Space1","Button1","MenuUnfoldOutlined","MenuFoldOutlined","h2","defaultSelectedKeys","defaultOpenKeys","theme","inlineCollapsed","Item1","DesktopOutlined","CodeOutlined","all","translateX","finished","scale","delay","Dashboard","paddingBottom","boxShadow","top","menu","logout","NavWelcomeHeader","count","unreadNotifications","transform","toggleNotificationDrawer","BellFilled","trigger","userIconUri","MobileNavBar","backdrop","alert","navigateTo","borderBottomWidth","activeConversationIds","handleErrorTest","removeItem","getNotificationCallToAction","open","initialStyles","exact","path","SkeletonProject","Messages","defaults","baseURL","Authentication","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"8YAOMA,EAAkB,SAACC,GACrB,OAAIA,EAAMC,SAQ+B,kBAAzBD,EAAMC,SAASC,KAChBF,EAAMC,SAASC,KAAKC,MAAM,MAAM,GAGb,MAA1BH,EAAMC,SAASG,OACR,YAC0B,MAA1BJ,EAAMC,SAASG,OACf,eAEA,UAGJJ,EAAMK,QAKN,kBAIAL,EAAMM,SAUfC,EAAkB,SAACP,GACrBQ,QAAQR,MAAM,UAAYD,EAAgBC,KC7C1CS,EAAgD,4BAC9CC,EAAmB,iBAAO,CAC5B,eAAgBC,OAAOC,aAAaC,QAAQ,WAE1CC,EAAwD,4BAU/CC,EARF,CACTN,UACAC,mBACAI,oBCLJ,WACI,IAAIE,SAASC,GAAb,CACA,IAAIC,EAAiBC,EAAQ,KAKzBF,EAJgBE,EAAQ,IAInBC,CAAcF,GACvBF,SAASC,GAAKA,EAEdA,EAAGI,MAAMC,IAAMb,EACfQ,EAAGI,MAAME,oBAAqB,EAC9BN,EAAGI,MAAMG,cAAe,EAKxBP,EAAGQ,OAAOC,GAAG,WAAW,WAGpBT,EAAGQ,OAAOpB,QAAQ,CACdsB,OAAQ,OACRL,IAAK,qBACLM,QAASlB,MAEV,SAACmB,EAAKC,GACLtB,QAAQuB,IAAIF,GACZrB,QAAQuB,IAAID,GACZtB,QAAQuB,IAAI,+BAOxBC,GAEA,IAAMC,EAAmB,SAACC,EAAMC,GAC5B3B,QAAQuB,IAAI,gBAAkBG,GAE9BlB,SAASC,GAAGQ,OAAOC,GAAGQ,EAAMC,IAG1BC,EAAsB,SAACF,EAAMC,GAC/B3B,QAAQuB,IAAI,uBAAyBG,GACrClB,SAASC,GAAGQ,OAAOY,IAAIH,EAAMC,IAG3BG,EAAgB,WACLtB,SAAPC,GAGHQ,OAAOpB,QAAQ,CACdsB,OAAQ,OACRL,IAAK,qBACLM,QAASlB,MAEV,SAACmB,EAAKC,GACLtB,QAAQuB,IAAIF,GACZrB,QAAQuB,IAAID,GAEZtB,QAAQuB,IAAI,4BAOdQ,EAA0B,SAACC,GACdxB,SAAPC,GACLQ,OAAOpB,QAAQ,CACdsB,OAAQ,OACRL,IAAK,uBACLM,QAAS,CACL,eAAgBY,KAGrB,SAACX,EAAKC,GACLtB,QAAQuB,IAAIF,GACZrB,QAAQuB,IAAID,GAEZtB,QAAQuB,IAAI,4B,OCxEZU,EAAUC,IAAVD,MA4ROE,EAxRa,WACxB,MAAwBC,mBAAS,IAAjC,mBAAOV,EAAP,KAAaW,EAAb,KACA,EAA0BD,mBAAS,IAAnC,mBAAOE,EAAP,KAAcC,EAAd,KACA,EAAgCH,mBAAS,IAAzC,mBAAOI,EAAP,KAAiBC,EAAjB,KACMC,EAAWC,wBAAc,CAAEC,SAAU,MAC3C,EAAwBR,mBAAS,SAAjC,mBAAOS,EAAP,KAAaC,EAAb,KACA,EAA8BV,oBAAS,GAAvC,mBAAOW,EAAP,KAAgBC,EAAhB,KACA,EAAgCZ,oBAAS,GAAzC,mBAAOa,EAAP,KAAiBC,EAAjB,KACA,EAAeC,IAAKC,UAAbC,EAAP,oBAGMC,EAAY,uCAAG,8BAAAC,EAAA,yDACjBP,GAAW,GAEXhD,QAAQuB,IAAIiB,GAHK,SAMA,UAATK,EANS,wBAOT7C,QAAQuB,IAAIiB,GAPH,SAQGgB,IAAMC,KAAKxD,EAAU,cAAe,CAC5CqC,QACAE,aAVK,OAQTnB,EARS,gDAaGmC,IAAMC,KAAKxD,EAAU,eAC7B,CACIyB,OACAY,QACAE,aAjBC,QAaTnB,EAbS,iEAqBTvB,EAAUP,EAAgB,EAAD,IAC7BS,QAAQR,MAAM,UAAYM,GAC1B4D,IAAalE,MAAM,CACfM,QAAS,oBAAa+C,EAAb,MAAwBtD,EAAgB,EAAD,MAxBvC,QA6BjByD,GAAW,GACP3B,IAGAqC,IAAaC,QAAQ,CACjB7D,QAASuB,EAAI3B,KAAKI,UAGtBK,OAAOC,aAAawD,QAAQ,QAASvC,EAAI3B,KAAKsC,OAC9CF,IACAoB,GAAY,IAvCC,0DAAH,qDA4CZW,EAAa,WAEXf,EADS,UAATD,EACQ,SAEA,UAIViB,EAAW,uCAAG,8BAAAP,EAAA,6DAChBP,GAAW,GADK,kBAGsBQ,IAAMC,KAAK,cAHjC,gBAGIzB,EAHJ,EAGJtC,KAAQsC,MAEhB0B,IAAaC,QAAQ,CACjB7D,QAAS,sBAGbK,OAAOC,aAAawD,QAAQ,QAAS5B,GACrCF,IACAkB,GAAW,GACXE,GAAY,GAZA,kDAcZF,GAAW,GACXU,IAAalE,MAAM,CACfM,QAASP,EAAgB,EAAD,MAhBhB,0DAAH,qDAqBjB,OACI,sBAAKwE,UAAU,MAAMC,MAAO,CAExBC,OAAQ,EACRC,QAAS,EACTC,QAAS,OACTC,cAAe1B,EAAW,SAAW,MACrC2B,YAAa3B,EAAW,GAAK,GAC7B4B,aAAc5B,EAAW,GAAK,GAC9B6B,WAAY,GAKZC,UAAW,QAEXC,gBAAiB,wKACjBC,eAAgB,QAChBC,mBAAoB,UAjBxB,UAmBK1B,EAAW,cAAC,IAAD,CAAU2B,GAAG,eAAkB,KAC3C,sBAEIZ,MAAO,CACHG,QAAS,OACTC,cAAe,SACfS,WAAYnC,EAAW,SAAW,aAClCoC,KAAMpC,EAAW,QAAU,GANnC,UAQI,oBAAIsB,MAAO,CAEPe,MAAO,QAEPC,SAAU,GACVf,OAAQ,GALZ,kBAUA,mBAAGD,MAAO,CAAEe,MAAO,QAASE,aAAc,GAAIC,QAAS,IAAvD,qCAIJ,qBACIlB,MAAO,CACHc,KAAMpC,EAAW,QAAU,EAC3ByB,QAASzB,EAAW,OAAS,QAC7B0B,cAAe1B,EAAW,MAAQ,QAClCyC,eAAgBzC,EAAW,SAAW,SAL9C,SAQI,cAAC,IAAD,CAAMsB,MAAO,CACTpB,SAAUF,EAAW,IAAM,QAC3BuC,aAAc,GACdG,aAAc,EACdN,KAAM,GAJV,SAOI,eAAC,IAAD,CACIpD,KAAK,QACL2D,WAAW,OACXC,SAAU,CAENC,KAAM,GAEVC,WAAY,CAERD,KAAM,IAEVE,cAAe,CACXC,UAAU,GAEdrC,KAAMA,EACNsC,SAAUrC,EACVsC,eAxGK,kBAAM,GAwFf,UAkBI,cAAC,IAAD,UAEiB,UAAT/C,EACI,cAACZ,EAAD,oBAAuB,cAACA,EAAD,uBAInC,oBAAI+B,MAAO,CACPiB,aAAc,IADlB,SAGc,UAATpC,EACG,+DAC2B,mBAAGgD,KAAK,IAAIC,QAASjC,EAArB,wBAE3B,iEAC6B,mBAAGgC,KAAK,IAAIC,QAASjC,EAArB,wBAMxB,WAAThB,EACI,mCACI,cAAC,IAAKkD,KAAN,CACIC,MAAM,OACNtE,KAAK,OACLsC,MAAO,GAGPiC,MAAO,CACH,CACIC,UAAU,EACVpG,QAAS,4BATrB,SAaI,cAAC,IAAD,CACIqG,KAAK,OAAOC,SAAU,SAACC,GAAD,OAAOhE,EAAQgE,EAAEC,OAAOC,cAM1D,KAER,cAAC,IAAKR,KAAN,CAAWrE,KAAK,QAAQsE,MAAM,QAAQC,MAAO,CAAC,CAC1CC,UAAU,EACVC,KAAM,UAFV,SAII,cAAC,IAAD,CAEIC,SAAU,SAACC,GAAD,OAAO9D,EAAS8D,EAAEC,OAAOC,YAI3C,cAAC,IAAKR,KAAN,CACIC,MAAM,WACNtE,KAAK,WACLuE,MAAO,CACH,CACIC,UAAU,EACVpG,QAAS,gCANrB,SAUI,cAAC,IAAM0G,SAAP,CACIJ,SAAU,SAACC,GAAD,OAAO5D,EAAY4D,EAAEC,OAAOC,YAMjC,WAAT1D,EACI,cAAC,IAAKkD,KAAN,CACIC,MAAM,kBACNtE,KAAK,mBACLuE,MAAO,CACH,CACIC,UAAU,EACVpG,QAAS,gCANrB,SAUI,cAAC,IAAM0G,SAAP,MAOJ,KAER,cAAC,IAAKT,KAAN,CACIP,WAAY,CACRiB,OAAQ,EACRlB,KAAM,IAHd,SAMI,eAAC,IAAD,WACI,cAAC,IAAD,CACIxC,QAASA,EACToD,KAAK,UAAUO,SAAS,SAF5B,oBAKA,cAAC,IAAD,CACIZ,QAAShC,EADb,sD,2CCpHjB6C,E,kDA9JX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IA0BVC,YAAc,WACV,OAAO,IAAIC,SAAQ,SAACzF,GAChB,IAAI0F,EAAMvG,SAASwG,eAAe,YAAYC,WAAW,MACrDC,EAAW,IAAIC,IAAMJ,EAAK,CAC1BZ,KAAM,MACNzG,KAAM,CACF0H,OAAQ,CACJ,OACA,UAGJC,SAAU,CAAC,CACPrB,MAAO,mBACPtG,KAAM,CAAC,EAAK4H,MAAMC,cAAe,EAAKD,MAAME,iBAC5CC,gBAAiB,CACb,OACA,WAEJC,YAAa,OAKzB,EAAKC,SAAS,CACVT,YACD7F,OApDQ,EAwDnBuG,YAxDmB,sBAwDL,4BAAArE,EAAA,uDACJ2D,EAAa,EAAKI,MAAlBJ,UACGxH,KAAK2H,SAAS,GAAG3H,KAAO,CAAC,EAAK4H,MAAMC,cAAe,EAAKD,MAAME,iBACvEN,EAASW,SAHC,2CAxDK,EA8DnBC,WA9DmB,sBA8DN,sCAAAvE,EAAA,+EAEgBC,IAAMuE,IAAI,kBAAoB,EAAKnB,MAAMoB,QAAQC,GAAI,CACtE7G,QAASlB,MAHR,gBAECR,EAFD,EAECA,KAKFwI,EAGiBxI,EAHjBwI,UACAV,EAEiB9H,EAFjB8H,gBACAD,EACiB7H,EADjB6H,cACAY,EAAiBzI,EAAjByI,aAEJ,EAAKR,SAAS,CACVO,YACAV,kBACAD,gBACAY,gBACD,EAAKP,aAjBH,gDAmBL7H,EAAgB,EAAD,IAnBV,yDA5DT,EAAKuH,MAAQ,CACTrE,UAAU,EACViF,UAAW,EACXV,gBAAiB,EACjBD,cAAe,EACfY,aAAc,EACdjB,SAAU,MARC,E,4FAcnB,sBAAA3D,EAAA,sEACU6E,KAAKvB,cADf,OAEIuB,KAAKN,aAFT,gD,sFAOA,SAAmBO,GACXA,EAAUL,QAAQC,KAAOG,KAAKxB,MAAMoB,QAAQC,IAC5CG,KAAKN,e,oBA8Db,WAAU,IAAD,OACL,OACI,cAAC,IAAD,CAAYlF,SAAU,IAAtB,SACK,SAACF,GAAD,OACG,cAAC,IAAM4F,SAAP,UAEI,sBACItE,MAAO,CACHG,QAASzB,EAAW,OAAS,cAC7B0B,cAAe1B,EAAW,SAAW,QACrC6F,YAAa7F,EAAW,GAAK,GAC7B8F,IAAK,IALb,UASI,cAAC,IAAD,CACIC,MAAM,aADV,SAGI,eAAC,IAAD,CAAKC,OAAQ,GAAb,UACI,cAAC,IAAD,CAAKnD,KAAM,GAAX,SACI,cAAC,IAAD,CAAWkD,MAAM,UAAUlC,MAAO,EAAKe,MAAMa,iBAEjD,cAAC,IAAD,CAAK5C,KAAM,GAAX,SACI,cAAC,IAAD,CAAWkD,MAAM,gBAAgBlC,MAAO,EAAKe,MAAMY,cAGvD,cAAC,IAAD,CAAK3C,KAAM,GAAX,SACI,cAAC,IAAD,CAAWkD,MAAM,YAAYlC,MAAO,EAAKe,MAAMC,kBAEnD,cAAC,IAAD,CAAKhC,KAAM,GAAX,SACI,cAAC,IAAD,CAAWkD,MAAM,cAAclC,MAAO,EAAKe,MAAME,yBAM7D,cAAC,IAAD,CACIiB,MAAM,WACNzE,MAAO,GAFX,SAKI,cAAC,IAAD,CACIA,MAAO,CACH2E,MAAO,QAGXC,UAAU,WAAWC,MAAM,SAL/B,SAOI,wBACIZ,GAAG,6B,GAvIzBa,IAAMC,W,mGCQhBC,GAAYC,IAAZD,QACAE,GAAWC,IAAXD,OAgbOE,gBA1aH,SAACxC,GACT,MAAsCxE,mBAASiH,cAAYC,eAA3D,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAA0BpH,mBAAS,IAAnC,mBAAOqG,EAAP,KAAcgB,EAAd,KACA,EAAwBrH,mBAAS,IAAjC,mBAAOsH,EAAP,KAAaC,EAAb,KACA,EAA0BvH,mBAAS,IAAnC,mBAAOmE,EAAP,KAAcqD,EAAd,KAEA,EAA8BxH,mBAAS,GAAvC,mBAAOyH,EAAP,KAAgBC,EAAhB,KACA,EAAmB1H,mBAAS,IAArB2H,EAAP,oBACA,EAAgC3H,mBAAS,IAAzC,mBAAO4H,EAAP,KAAiBC,EAAjB,KACA,EAA8C7H,mBAAS,IAAvD,mBAAO8H,EAAP,KAAwBC,EAAxB,KACA,EAAgC/H,mBAAS,IAAzC,mBAAOgI,EAAP,KAAiBC,EAAjB,KACA,GAAmBjI,mBAAS,IAAIkI,UAAzBC,GAAP,qBACA,GAAuBnI,mBAAS,IAAzBoI,GAAP,qBAGMC,GAAY,uCAAG,WAAOC,EAAMC,GAAb,SAAApH,EAAA,6DACjBiH,GAAaI,KAAKF,GADD,mBAEV,GAFU,2CAAH,wDAfC,8CA4BnB,WAAwBG,GAAxB,uBAAAtH,EAAA,6DACQuH,EAAcC,KAAYC,uBAAazB,EAAY0B,sBAD3D,SAKYC,EAAc,CACdJ,cACArC,QACAiB,KAAMA,EAAKyB,KAAK,KAChBtB,QAAsB,IAAZA,OAAgBuB,EAAYvB,EAAQwB,SAASC,UACvDvB,SAAUA,EAASoB,KAAK,KACxBnB,WACAE,kBACAE,WACAmB,UAAWhF,EAAM4E,KAAK,KACtBK,UAAW5E,EAAM6E,MAAMC,OAAOF,WAf1C,SAkBwBhI,IAAMC,KAAK,cAAeyH,EAAa,CACnD9J,QAASlB,MAnBrB,UAkBYmB,EAlBZ,OAsBgB3B,EAAS2B,EAAT3B,KAIoB,IAAxB8K,GAAamB,OA1BzB,iBA4BY,IAASC,EAAI,EAAGA,EAAIpB,GAAamB,OAAQC,IACrCrB,GAASsB,OAAT,QAAyBrB,GAAaoB,IA7BtD,OA+BY5L,QAAQuB,IAAIgJ,GAASuB,OAAO,UA/BxC,UAgCkBtI,IAAMC,KAAK,SAAU8G,GAAU,CACjCnJ,QAAQ,2BACAlB,KADD,IAEH,eAAgB,wBAEpBwL,OAAQ,CACJK,MAAOrM,EAAKuI,MAtChC,QA0CQrB,EAAMoF,aACNpF,EAAMqF,oBACNvI,IAAaC,QAAQ,CACjB7D,QAAS,uBA7CrB,kDAiDQE,QAAQR,MAAMD,EAAgB,EAAD,KAC7BmE,IAAalE,MAAM,CACfM,QAASP,EAAgB,EAAD,MAnDpC,2DA5BmB,sBAqFnB,IAaA,GAA8B6C,mBAAS,IAAvC,qBAAO8J,GAAP,MAAgBC,GAAhB,MACA,GAA0B/J,qBAA1B,qBAAOgK,GAAP,MAAcC,GAAd,MA2CA,OAzCAC,qBAAU,YACY,uCAAG,kCAAA/I,EAAA,+EAKGC,IAAMuE,IAAI,eAAgB,CACtC2D,OAAQ,CACJU,MAAOA,GACPZ,UAAW5E,EAAM6E,MAAMC,OAAOF,UAC9Be,MAAM,GAEVnL,QAASlB,MAXA,OAKbsM,EALa,8DAcbxM,QAAQR,MAAMD,EAAgB,EAAD,KAdhB,2BAsBjB,IAFIkN,EAAa,GACbC,EAAQF,EAAQ9M,KAAK8M,QAChBZ,EAAI,EAAGA,EAAIc,EAAMf,OAAQC,IAC9Ba,EAAW7B,KAAK,CACZ+B,IAAKD,EAAMd,GAAG3D,GACdvG,KAAMgL,EAAMd,GAAGlK,KACfY,MAAOoK,EAAMd,GAAGtJ,MAChB2F,GAAIyE,EAAMd,GAAG3D,KAIrBkE,GAAWM,GA/BM,yDAAH,qDAqClBG,KACD,CAACR,KAGA,qBAAKpI,MAAO,CACR2E,MAAO,QADX,SAKI,eAAC,IAAD,CACIjH,KAAK,QACL4D,SAAU,CACNC,KAAM,GAEVC,WAAY,CACRD,KAAM,IAEVE,cAAe,CACXC,UAAU,GAEdmH,OAAO,WAEPlH,SAjKO,6CAkKPC,eAxEW,SAACkH,GACpB9M,QAAQuB,IAAI,UAAWuL,GACvBpJ,IAAalE,MAAM,CACfM,QAAS,wBAuDT,UAgBI,cAAC,IAAKiG,KAAN,CACIC,MAAM,QACNtE,KAAK,QACLuE,MAAO,CACH,CACIC,UAAU,EACVR,UAAU,IANtB,SAWI,cAAC,IAAD,CACIS,KAAK,OAEL4G,aAAa,MACb3G,SAAU,SAACC,GAAD,OAAOoD,EAASpD,EAAEC,OAAOC,YAI3C,uWAWA,cAAC,IAAKR,KAAN,CACIC,MAAM,cACNtE,KAAK,cACLuE,MAAO,CACH,CACIC,UAAU,IALtB,SAUI,cAAC,SAAD,CACIqD,YAAaA,EACbyD,iBAAiB,eACjBC,gBAAgB,cAChBC,oBAAqB1D,MAI7B,eAAC,IAAKzD,KAAN,CACIC,MAAM,OACNtE,KAAK,OACLuE,MAAO,CACH,CACIC,UAAU,IALtB,UAUI,cAAC,IAAD,CAEIrD,KAAK,OACLmB,MAAO,CAAE2E,MAAO,QAChBwE,YAAY,YACZ/G,SAAU,SAACC,GAAD,OAAOsD,EAAQtD,MAfjC,OAsBA,eAAC2C,GAAD,CACIhF,MAAO,CACHiB,aAAc,IAGlBmI,UAAQ,EACR3C,aAAcA,GACd4C,SA9NC,SAAC3C,GACd,IAAK,IAAIkB,EAAI,EAAGA,EAAIpB,GAAamB,OAAQC,IACrC,GAAIpB,GAAaoB,GAAG0B,MAAQ5C,EAAK4C,IAAK,CAClC9C,GAAa+C,OAAO3B,EAAG,GACvB,QAmNA,UAUI,mBAAG7H,UAAU,uBAAb,SACI,cAACyJ,EAAA,EAAD,MAEJ,mBAAGzJ,UAAU,kBAAb,uDACA,mBAAGA,UAAU,kBAAb,uHAKJ,cAAC,IAAKgC,KAAN,CACIC,MAAM,WACNtE,KAAK,WACLsC,MAAO,CACHyJ,UAAW,IAEfxH,MAAO,CACH,CACIC,UAAU,IARtB,SAaI,cAAC,IAAD,CACIlC,MAAO,CACH2E,MAAO,QAGXvC,SAAU0D,MAGlB,cAAC,IAAK/D,KAAN,CACIC,MAAM,eACNtE,KAAK,YACLuE,MAAO,CACH,CACIC,UAAU,IALtB,SAUI,cAAC,IAAD,CACIwH,YAAU,EACV7K,KAAK,WAELsK,YAAa,YAIbQ,cAAc,EACdC,SAAUvB,GACVjG,SAjNC,SAACyH,EAAKC,GAEvBlE,EAASiE,IAqMG,SAeQ3B,GAAQ6B,KAAI,SAAAC,GAAG,OAAI,cAAC9E,GAAD,oBAAyB8E,EAAItM,KAA7B,aAAsCsM,EAAI1L,MAA1C,MAAa0L,EAAI/F,WAIhD,cAAC,IAAKlC,KAAN,CACIC,MAAM,WACNtE,KAAK,WACLuE,MAAO,CACH,CACIC,UAAU,IALtB,SAUI,eAAC,IAAD,CACIwH,YAAU,EAEVP,YAAY,mBACZc,iBAAiB,WACjBN,aAAc,SAACO,EAAOJ,GAAR,OACVA,EAAOK,SAASC,cAAcC,QAAQH,EAAME,gBAAkB,GAElEE,WAAY,SAACC,EAASC,GAAV,OACRD,EAAQJ,SAASC,cAAcK,cAAcD,EAAQL,SAASC,gBAElEhI,SAAU6D,EAXd,UAaI,cAACf,GAAD,CAAQ3C,MAAM,OAAd,kBACA,cAAC2C,GAAD,CAAQ3C,MAAM,WAAd,sBACA,cAAC2C,GAAD,CAAQ3C,MAAM,QAAd,mBACA,cAAC2C,GAAD,CAAQ3C,MAAM,QAAd,wBAGR,cAAC,IAAKR,KAAN,CACIC,MAAM,kBACNtE,KAAK,kBACLuE,MAAO,CACH,CACIC,UAAU,IALtB,SAUI,eAAC,IAAD,CACIE,SAAU+D,EACVuD,YAAU,EAEVP,YAAY,mBACZc,iBAAiB,WACjBN,aAAc,SAACO,EAAOJ,GAAR,OACVA,EAAOK,SAASC,cAAcC,QAAQH,EAAME,gBAAkB,GAElEE,WAAY,SAACC,EAASC,GAAV,OACRD,EAAQJ,SAASC,cAAcK,cAAcD,EAAQL,SAASC,gBAVtE,UAaI,cAAClF,GAAD,CAAQ3C,MAAM,SAAd,oBACA,cAAC2C,GAAD,CAAQ3C,MAAM,YAAd,uBACA,cAAC2C,GAAD,CAAQ3C,MAAM,SAAd,oBACA,cAAC2C,GAAD,CAAQ3C,MAAM,SAAd,oBACA,cAAC2C,GAAD,CAAQ3C,MAAM,cAAd,yBACA,cAAC2C,GAAD,CAAQ3C,MAAM,MAAd,sBAGR,cAAC,IAAKR,KAAN,CACIC,MAAM,WACNtE,KAAK,WACLuE,MAAO,CACH,CACIC,UAAU,IALtB,SAUI,eAAC,IAAD,CACIwH,YAAU,EACVtH,SAAUiE,EAEV8C,YAAY,mBACZc,iBAAiB,WACjBN,aAAc,SAACO,EAAOJ,GAAR,OACVA,EAAOK,SAASC,cAAcC,QAAQH,EAAME,gBAAkB,GAElEE,WAAY,SAACC,EAASC,GAAV,OACRD,EAAQJ,SAASC,cAAcK,cAAcD,EAAQL,SAASC,gBAVtE,UAaI,cAAClF,GAAD,CAAQ3C,MAAM,WAAd,sBACA,cAAC2C,GAAD,CAAQ3C,MAAM,YAAd,uBACA,cAAC2C,GAAD,CAAQ3C,MAAM,cAAd,yBACA,cAAC2C,GAAD,CAAQ3C,MAAM,aAAd,wBACA,cAAC2C,GAAD,CAAQ3C,MAAM,YAAd,uBACA,cAAC2C,GAAD,CAAQ3C,MAAM,KAAd,gBACA,cAAC2C,GAAD,CAAQ3C,MAAM,cAAd,yBACA,cAAC2C,GAAD,CAAQ3C,MAAM,cAAd,8BAGR,eAAC,IAAD,CACIvC,MAAO,CACH2E,MAAO,OACPxE,QAAS,cACTgB,eAAgB,YAJxB,UAQI,cAAC,IAAD,CACIW,QAASc,EAAMoF,WADnB,oBAKA,cAAC,IAAD,CACItF,SAAS,SAETP,KAAK,UAHT,+B,yKCjaZlE,GAAUC,IAAVD,MAGFyM,GAAc,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAH,OAChB,cAAC,KAAD,CACIC,WAAYD,EACZE,OAAM,UAAKF,EAAShD,OAAd,YAAwBgD,EAAShD,OAAS,EAAI,UAAY,SAChEmD,WAAW,aACXC,WAAY,SAAAnI,GAAK,OAAI,cAAC,KAAD,eAAcA,QAgL5BD,G,4MAzKXW,MAAQ,CACJqH,SAAU,GACVK,YAAY,EACZzI,MAAO,GACPgD,YAAaF,cAAYC,e,EAG7B2F,MAAQ9O,OAAOC,aAAaC,QAAQ,S,EAMpC6O,sB,sBAAwB,gCAAA3L,EAAA,+EAEKC,IAAMuE,IAAI,WAAY,CACvC3G,QAASlB,IACTwL,OAAQ,CACJK,MAAO,EAAKnF,MAAMuI,IAAIlH,MALd,gBAEVvI,EAFU,EAEVA,KAOFiP,EAAWjP,EAAKiP,SAASZ,KAAI,SAACqB,GAAD,MAAW,CACxCC,OAAQD,EAAKE,MAAM5N,KACnBiL,IAAKyC,EAAKnH,GACVsH,OAAQ,mEACRC,QAAS,qBACLxL,MAAO,CACH2E,MAAO,IACPnE,UAAW,GACXiL,UAAW,QAEfC,wBAAyB,CAAEC,OAAQP,EAAKQ,QAC5CC,SAAUC,KAAO,IAAIC,KAAKX,EAAKY,YAAYC,cAI/C,EAAKtI,SAAS,CACVgH,SAAU,uBAAI,EAAKrH,MAAMqH,UAAf,aAA4BA,IAAUuB,YAzBpC,gDA4BhBlQ,QAAQR,MAAMD,EAAgB,EAAD,KA5Bb,yD,EAgCxB+D,a,sBAAe,sBAAAC,EAAA,yDACN,EAAK+D,MAAMf,MADL,wDAGX,EAAKoB,SAAS,CAAEqH,YAAY,IAHjB,kBAMDxL,IAAMC,KAAK,YAAa,CAC1BsI,MAAO,EAAKnF,MAAMuI,IAAIlH,GACtB2H,KAAM,EAAKtI,MAAMf,OAClB,CACCnF,QAASlB,MAVN,8DAaH,KAAET,SACFO,QAAQuB,IAAI,KAAE9B,UAEdO,QAAQuB,IAAR,MAEJzB,KAAQN,MAAM,2BAA6BD,EAAgB,EAAD,KAlBnD,kBAmBA,EAAKoI,SAAS,CAAEqH,YAAY,KAnB5B,QAwBX,EAAKrH,SAAS,CACVqH,YAAY,EACZzI,MAAO,GACPoI,SAAS,CAEL,CACIU,OAAQ,WACRE,OAAQ,mEACRC,QAAS,qBACLxL,MAAO,CACH2E,MAAO,IACPnE,UAAW,GACXiL,UAAW,QAEfC,wBAAyB,CAAEC,OAAQ,EAAKrI,MAAMf,SAClDsJ,SAAUC,OAASG,YAZnB,oBAcD,EAAK3I,MAAMqH,aAzCX,yD,EA+Cf/B,aAAe,SAAAvG,GACX,EAAKsB,SAAS,CACVpB,MAAOF,EAAEC,OAAOC,S,uDArFxB,WACI6B,KAAK8G,0B,oBAwFT,WAAU,IAAD,OACL,EAAiC9G,KAAKd,MAA9BqH,EAAR,EAAQA,SAAUK,EAAlB,EAAkBA,WAElB,OACI,qCACI,uBAEA,cAAC,IAAD,CAAOnG,MAAM,SAAb,SACI,cAAC,GAAD,CACI7E,MAAO,CACHC,OAAQ,EACRsE,YAAa,IAEjB4H,MAAO,EALX,0BAUJ,cAAC,KAAD,IACA,cAAC,KAAD,CACIZ,OACI,cAAC,KAAD,CACIa,IAAI,mEACJC,IAAI,aAGZb,QAOI,eAAC,IAAMlH,SAAP,WACI,sZAYA,cAAC,SAAD,CACIiB,YAAanB,KAAKd,MAAMiC,YACxByD,iBAAiB,eACjBC,gBAAgB,cAChBC,oBAAqB,SAAC3D,GAClB,EAAK5B,SAAS,CACVpB,MAAOwE,KAAYC,uBAAazB,EAAY0B,sBAC5C1B,mBAIZ,cAAC,IAAD,CAAQ7C,SAAS,SAAS3D,QAASiM,EAAYlJ,QAASsC,KAAK9E,aAAc6C,KAAK,UAAhF,8BAOXwI,EAAShD,OAAS,GAAK,cAAC,GAAD,CAAagD,SAAUA,W,GAnK7C7F,IAAMC,W,oBCThBG,GAAWC,IAAXD,OAqbOoH,G,4MAjbXhJ,MAAQ,CACJiJ,UAAU,EACVC,aAAa,EACbC,qBAAqB,EACrBC,cAAc,EACdC,cAAc,EACdC,YAAY,EACZ/F,OAAQ,CAAEnB,KAAM,CAAC,KAAMG,QAAS,O,EAGpCgH,YAAc,SAAChD,GAAD,OAAS,EAAKlG,SAAL,eAAiBkG,GAAO,EAAKvG,MAAMuG,M,EAE1DiD,gB,uCAAkB,WAAOC,EAAOxK,GAAd,SAAAhD,EAAA,+EAGJC,IAAMwN,IAAI,QAAU,EAAKpK,MAAMmF,MAA/B,eACDgF,EAAQxK,GACV,CACCnF,QAASlB,MANH,OASVJ,KAAQ6D,QAAR,WAAoBoN,EAApB,6BAA8CxK,EAA9C,MATU,+CAWVzG,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAX/B,wD,+GAgBlB,WACI,IAAM4P,EAAQ/G,KAAKxB,MAAbuI,IAEN/G,KAAKT,SAAS,CACVkD,OAAQ,CACJjL,OAAQuP,EAAIvP,OACZ8J,KAAoB,KAAbyF,EAAIzF,KAAcyF,EAAIzF,KAAK/J,MAAM,KAAO,GAC/CkK,QAAUsF,EAAItF,QAAUiG,KAAO,IAAIC,KAAKZ,EAAItF,UAAY,KACxDO,SAAW+E,EAAI/E,SAAW+E,EAAI/E,cAAWgB,EACzCpB,SAAWmF,EAAInF,SAAWmF,EAAInF,cAAWoB,EACzClB,gBAAkBiF,EAAIjF,gBAAkBiF,EAAIjF,qBAAkBkB,O,6BAM1E,c,oBAIA,WAAU,IAAD,OAEL,OACI,cAAC,IAAD,CAAYxI,SAAU,IAAtB,SACK,SAACF,GAAD,OACG,qCACI,eAAC,IAAD,CACIgG,OAAQ,CAAC,EAAG,IADhB,UAGI,cAAC,IAAD,CAAKnD,KAAM7C,EAAW,GAAK,EAA3B,SAEI,cAAC,IAAD,CACIuO,WAAY,CACRjM,SAAU,IAGdkM,UAAW,SAACrD,GACR,OAAI,EAAKvG,MAAMsJ,WACH,cAAC,KAAD,CACJO,gBAAgB,OAChBC,kBAAkB,SAElBhL,SAAU,SAACiL,GACHA,EAEA,EAAK1J,SAAS,CACVkD,OAAO,2BAAM,EAAKvD,MAAMuD,QAAlB,IAA0BjL,OAAQ,WAI5C,EAAK+H,SAAS,CACVkD,OAAO,2BAAM,EAAKvD,MAAMuD,QAAlB,IAA0BjL,OAAQ,cAIpD0R,eAA8C,SAA7B,EAAKhK,MAAMuD,OAAOjL,SAGhC,cAAC,KAAD,CAAKmF,MAAqC,SAA7B,EAAKuC,MAAMuD,OAAOjL,OAAoB,OAAS,UAA5D,UAEE,GAAK,EAAK0H,MAAMuD,OAAOjL,QAAQ2R,iBAIhD9I,MAAO,8CAEH,cAAC,IAAD,CACI3C,QAAS,WACD,EAAKwB,MAAMsJ,YACX,EAAKE,gBAAgB,SAAU,EAAKxJ,MAAMuD,OAAOjL,QAErD,EAAKiR,YAAY,eAErB1K,KAAK,OACLqL,KAAM,cAACC,GAAA,EAAD,SAMdlL,MAAO,WAEf,cAAC,IAAD,CAAKhB,KAAM7C,EAAW,GAAK,EAA3B,SACI,cAAC,IAAD,CACIuO,WAAY,CACRjM,SAAU,IAGdyD,MAAO,4CAEH,cAAC,IAAD,CACI3C,QAAS,WACD,EAAKwB,MAAMiJ,UACX,EAAKO,gBAAgB,OAAQ,EAAKxJ,MAAMuD,OAAOnB,KAAKyB,QAExD,EAAK0F,YAAY,aAErB1K,KAAK,OACLqL,KAAM,cAACC,GAAA,EAAD,SAKdP,UAAW,SAACrD,GACR,OAAI,EAAKvG,MAAMiJ,SACH,cAAC,IAAD,CAAQ1N,KAAK,OACjBuD,SACI,SAACC,GACG,EAAKsB,SAAS,CACVkD,OAAO,2BAAM,EAAKvD,MAAMuD,QAAlB,IAA0BnB,KAAMrD,OAKlDE,MAAO,EAAKe,MAAMuD,OAAOnB,KACzB1F,MAAO,CAAE2E,MAAO,KAAOwE,YAAY,YAV/B,eAeD,EAAK7F,MAAMuD,OAAOnB,KAAKqE,KAAI,SAACqB,GAC/B,OAAO,cAAC,KAAD,CAAKrK,MAAM,OAAX,SAAmBqK,QAKtC7I,MAAO,aAGf,cAAC,IAAD,CAEIhB,KAAM7C,EAAW,GAAK,EAF1B,SAGI,cAAC,IAAD,CACIuO,WAAY,CACRjM,SAAU,IAEdyD,MAAO,gDAEH,cAAC,IAAD,CACI3C,QAAS,WACD,EAAKwB,MAAMkJ,aAAe,EAAKlJ,MAAMuD,OAAOhB,SAE5C,EAAKiH,gBAAgB,UAAW,EAAKxJ,MAAMuD,OAAOhB,QAAQwB,SAASC,WAEvE,EAAKuF,YAAY,gBAErB1K,KAAK,OACLqL,KAAM,cAACC,GAAA,EAAD,SAKdP,UAAW,SAACrD,GACR,OAAI,EAAKvG,MAAMkJ,YACH,cAAC,IAAD,CACJxM,MAAO,GAGPuC,MAAO,EAAKe,MAAMuD,OAAOhB,QACzBzD,SAAU,SAACsL,GACP,EAAK/J,SAAS,CACVkD,OAAO,2BACA,EAAKvD,MAAMuD,QADZ,IAEFhB,QAAS6H,SAKrB,EAAKpK,MAAMuD,OAAOhB,QACX,EAAKvC,MAAMuD,OAAOhB,QAAQ8H,OAAO,aAErC,OAGfpL,MAAO,mBAIf,cAAC,IAAD,CAEIhB,KAAM7C,EAAW,GAAK,EAF1B,SAGI,cAAC,IAAD,CACIuO,WAAY,CACRjM,SAAU,IAGdyD,MAAO,uDAEH,cAAC,IAAD,CAAQtC,KAAK,OAETL,QAAS,WACD,EAAKwB,MAAMmJ,qBACX,EAAKK,gBAAgB,kBAAmB,EAAKxJ,MAAMuD,OAAOX,iBAE9D,EAAK2G,YAAY,wBAErBW,KAAM,cAACC,GAAA,EAAD,SAKdP,UAAW,SAACrD,GACR,OAAI,EAAKvG,MAAMmJ,oBACH,eAAC,IAAD,CACJ/C,YAAU,EACVtH,SAAU,SAACC,GACP,EAAKsB,SAAS,CACVkD,OAAO,2BACA,EAAKvD,MAAMuD,QADZ,IAEFX,gBAAiB7D,OAI7BE,MAAO,EAAKe,MAAMuD,OAAOX,gBACzBlG,MAAO,GAGPmJ,YAAY,mBACZc,iBAAiB,WACjBN,aAAc,SAACO,EAAOJ,GAAR,OACVA,EAAOK,SAASC,cAAcC,QAAQH,EAAME,gBAAkB,GAElEE,WAAY,SAACC,EAASC,GAAV,OACRD,EAAQJ,SAASC,cAAcK,cAAcD,EAAQL,SAASC,gBApB9D,UAuBJ,cAAC,GAAD,CAAQ7H,MAAM,SAAd,oBACA,cAAC,GAAD,CAAQA,MAAM,YAAd,uBACA,cAAC,GAAD,CAAQA,MAAM,SAAd,oBACA,cAAC,GAAD,CAAQA,MAAM,SAAd,oBACA,cAAC,GAAD,CAAQA,MAAM,cAAd,yBACA,cAAC,GAAD,CAAQA,MAAM,MAAd,oBAGG,EAAKe,MAAMuD,OAAOX,iBAGjC3D,MAAO,aAGf,cAAC,IAAD,CAEIhB,KAAM7C,EAAW,GAAK,EAF1B,SAGI,cAAC,IAAD,CACIuO,WAAY,CACRjM,SAAU,IAGdyD,MAAO,gDAEH,cAAC,IAAD,CAAQtC,KAAK,OACTL,QAAS,WACD,EAAKwB,MAAMoJ,cACX,EAAKI,gBAAgB,WAAY,EAAKxJ,MAAMuD,OAAOb,UAEvD,EAAK6G,YAAY,iBAErBW,KAAM,cAACC,GAAA,EAAD,SAMdP,UAAW,SAACrD,GACR,OAAI,EAAKvG,MAAMoJ,aAEP,eAAC,IAAD,CACIhD,YAAU,EACV1J,MAAO,GAGPmJ,YAAY,mBACZc,iBAAiB,WACjB1H,MAAO,EAAKe,MAAMuD,OAAOb,SACzB5D,SAAU,SAACC,GACP,EAAKsB,SAAS,CACVkD,OAAO,2BACA,EAAKvD,MAAMuD,QADZ,IAEFb,SAAU3D,OAItBsH,aAAc,SAACO,EAAOJ,GAAR,OACVA,EAAOK,SAASC,cAAcC,QAAQH,EAAME,gBAAkB,GAElEE,WAAY,SAACC,EAASC,GAAV,OACRD,EAAQJ,SAASC,cAAcK,cAAcD,EAAQL,SAASC,gBApBtE,UAuBI,cAAC,GAAD,CAAQ7H,MAAM,OAAd,kBACA,cAAC,GAAD,CAAQA,MAAM,WAAd,sBACA,cAAC,GAAD,CAAQA,MAAM,QAAd,mBACA,cAAC,GAAD,CAAQA,MAAM,QAAd,sBAGD,EAAKe,MAAMuD,OAAOb,UAGjCzD,MAAO,YAGf,cAAC,IAAD,CAEIhB,KAAM7C,EAAW,GAAK,EAF1B,SAGI,cAAC,IAAD,CACIuO,WAAY,CACRjM,SAAU,IAGdyD,MAAO,gDAEH,cAAC,IAAD,CAAQtC,KAAK,OACTL,QAAS,WACD,EAAKwB,MAAMqJ,cACX,EAAKG,gBAAgB,WAAY,EAAKxJ,MAAMuD,OAAOT,UAEvD,EAAKyG,YAAY,iBAErBW,KAAM,cAACC,GAAA,EAAD,SAKdP,UAAW,SAACrD,GACR,OAAI,EAAKvG,MAAMqJ,aAEP,eAAC,IAAD,CACIjD,YAAU,EAEVP,YAAY,mBACZc,iBAAiB,WACjB7H,SAAU,SAACC,GACP,EAAKsB,SAAS,CACVkD,OAAO,2BACA,EAAKvD,MAAMuD,QADZ,IAEFT,SAAU/D,OAItBsH,aAAc,SAACO,EAAOJ,GAAR,OACVA,EAAOK,SAASC,cAAcC,QAAQH,EAAME,gBAAkB,GAElE7H,MAAO,EAAKe,MAAMuD,OAAOT,SACzBkE,WAAY,SAACC,EAASC,GAAV,OACRD,EAAQJ,SAASC,cAAcK,cAAcD,EAAQL,SAASC,gBAlBtE,UAqBI,cAAC,GAAD,CAAQ7H,MAAM,WAAd,sBACA,cAAC,GAAD,CAAQA,MAAM,YAAd,uBACA,cAAC,GAAD,CAAQA,MAAM,cAAd,yBACA,cAAC,GAAD,CAAQA,MAAM,aAAd,wBACA,cAAC,GAAD,CAAQA,MAAM,YAAd,uBACA,cAAC,GAAD,CAAQA,MAAM,KAAd,gBACA,cAAC,GAAD,CAAQA,MAAM,cAAd,yBACA,cAAC,GAAD,CAAQA,MAAM,cAAd,4BAGD,EAAKe,MAAMuD,OAAOT,UAGjC7D,MAAO,mBAIf,cAAC,IAAD,CAEIhB,KAAM7C,EAAW,GAAK,EAF1B,SAII,cAAC,IAAD,CACIuO,WAAY,CACRjM,SAAU,IAEdyD,MAAO,sBAAMzE,MAAO,CAChByJ,UAAW,IADR,mBAQPlH,MAAO,EAAKK,MAAMuI,IAAIyC,UAAUlQ,SAGxC,cAAC,IAAD,CAEI6D,KAAM7C,EAAW,GAAK,EAF1B,SAII,cAAC,IAAD,CACIuO,WAAY,CACRjM,SAAU,IAEdyD,MAAM,gBACNlC,MAAOuJ,KAAO,IAAIC,KAAK,EAAKnJ,MAAMuI,IAAIa,YAAY2B,OAAO,oBAGrE,iC,GAxaD7I,IAAMC,W,oBCRrB9G,GAAUC,IAAVD,MACAiH,GAAWC,IAAXD,OAGFoH,G,4MACFhJ,MAAQ,CACJuK,cAAc,EACdtG,UAAW,GACXuG,OAAQ,GACRC,KAAM,EACNC,SAAU,GACVC,MAAO,EACP7F,MAAO,GACPF,QAAS,GACTgG,gBAAiB,I,EAQrBjD,MAAQ9O,OAAOC,aAAaC,QAAQ,S,EAGpC8R,e,sBAAiB,gCAAA5O,EAAA,4DAGE,MAFTuO,EAAW,EAAKxK,MAAhBwK,UAEaA,OAAS1G,GAHf,kBAMY5H,IAAMuE,IAAI,gBAAiB,CAC5C3G,QAASlB,IACTwL,OAAQ,CACJK,MAAO,EAAKnF,MAAMuI,IAAIlH,GACtB6J,YAVC,gBAMHpS,EANG,EAMHA,KASN,EAAKiI,SAAS,CACV4D,UAAW7L,EAAKgN,MAChBuF,MAAOvS,EAAKuS,QAjBP,kDAoBTjS,QAAQR,MAAMD,EAAgB,EAAD,KApBpB,0D,EAwBjB6S,SAAW,SAACL,EAAMC,GACD,IAATD,IAAYA,EAAO,GAEvB,EAAKpK,SAAS,CACVoK,OACAC,c,EAKRK,Y,sBAAc,oCAAA9O,EAAA,6DAEF6I,EAAU,EAAK9E,MAAf8E,MAFE,kBAIU5I,IAAMuE,IAAI,eAAgB,CACtC2D,OAAQ,CACJU,MAAOA,EACPZ,UAAW,EAAK5E,MAAM6E,MAAMC,OAAOF,UACnCe,MAAM,GAEVnL,QAASlB,MAVP,OAINsM,EAJM,8DAaNxM,QAAQR,MAAMD,EAAgB,EAAD,KAbvB,2BAqBV,IAFIkN,EAAa,GACbC,EAAQF,EAAQ9M,KAAK8M,QAChBZ,EAAI,EAAGA,EAAIc,EAAMf,OAAQC,IAC9Ba,EAAW7B,KAAK,CACZ+B,IAAKD,EAAMd,GAAG3D,GACdvG,KAAMgL,EAAMd,GAAGlK,KACfY,MAAOoK,EAAMd,GAAGtJ,MAChB2F,GAAIyE,EAAMd,GAAG3D,KAGrB,EAAKN,SAAS,CACVuE,QAASO,IA9BH,yD,EAkCd6F,WAAa,SAACzE,GACV,EAAKlG,SAAS,CACVuK,gBAAiBrE,K,EAIzB0E,a,sBAAe,4BAAAhP,EAAA,6DACH2O,EAAoB,EAAK5K,MAAzB4K,gBADG,kBAGD1O,IAAMC,KAAK,gBAAiB,CAC9B8H,UAAW2G,EAAgB/G,KAAK,KAChCY,MAAO,EAAKnF,MAAMuI,IAAIlH,IACvB,CACC7G,QAASlB,MAPN,OASP,EAAKyH,SAAS,CAAEkK,cAAc,EAAOE,KAAM,GAAK,EAAKI,gBACrDrS,KAAQ6D,QAAQ,iBAVT,gDAYP3D,QAAQR,MAAMD,EAAgB,EAAD,KAC7BO,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAblC,yD,uDAjFf,WACI6I,KAAK+J,mB,oBAiGT,WAAU,IAAD,OACL,EAAoC/J,KAAKd,MAAjCyK,EAAR,EAAQA,KAAMC,EAAd,EAAcA,SAAU9F,EAAxB,EAAwBA,QACxB,OACI,gCACI,cAAC,IAAD,CAAOrD,MAAM,SAAb,SACI,cAAC,GAAD,CACI7E,MAAO,CACHC,OAAQ,EACRsE,YAAa,IAEjB4H,MAAO,EALX,2BASJ,cAAC,KAAD,IACA,cAAC,KAAD,CACIqC,KAAK,QACL3D,OAAQ,eAAC,IAAD,WAEJ,cAAC,IAAM4D,OAAP,CACIrM,SAAU,SAACC,GACP,EAAKsB,SAAS,CACVmK,OAAQzL,EAAEC,OAAOC,OAClB,EAAK4L,iBAEZhF,YAAY,SAASnJ,MAAO,CAAE2E,MAAO,OACzC,cAAC,IAAD,CACI6I,KAAM,cAACkB,GAAA,EAAD,IACN5M,QAAS,kBAAM,EAAK6B,SAAS,CAAEkK,cAAc,KAAS1L,KAAK,eAInEwM,OAAQ,qBACJ3O,MAAO,CACH2E,MAAO,OACPxE,QAAS,cACTgB,eAAgB,YAJhB,SAQJ,cAAC,KAAD,CACIqN,KAAK,QACLP,MAAO7J,KAAKd,MAAM2K,MAClBW,QAASxK,KAAKd,MAAMyK,KACpB3L,SAAUgC,KAAKgK,SAAUS,iBAAe,EAACC,iBAAe,MAGhEC,UAAQ,EACRnE,WAAYxG,KAAKd,MAAMiE,UACvBwD,WAAY,SAACK,EAAM4D,GAE8D,IAAD,EAA5E,OAAIA,IAAQjB,EAAO,GAAKC,GAAYgB,GAAOjB,EAAO,GAAKC,EAAWA,EAE1D,eAAC,KAAKjM,KAAN,WACI,cAAC,KAAD,CAAQ/B,MAAO,CAAEe,MAAO,UAAW0C,gBAAiB,UAAWc,YAAa,IAA5E,SACK6G,EAAK1N,KAAKuR,UAAU,EAAG,KAFhC,UAIQ7D,EAAK1N,KAAK/B,MAAM,KAAK,GAJ7B,YAIoCyP,EAAK1N,KAAK/B,MAAM,KAAK,GAAKyP,EAAK1N,KAAK/B,MAAM,KAAK,GAAGsT,UAAU,EAAG,GAAG1B,cAAgB,IAAM,GAJ5H,aAIoInC,EAAK9M,MAJzI,iBAAgB8M,EAAKnH,UAArB,QAA2B+K,GAS5B,QAKf,cAAC,KAAD,CAAOvK,MAAM,sBACTyK,QAAS9K,KAAKd,MAAMuK,aACpBsB,KAAM,WACF,EAAKZ,eACL,EAAKJ,kBACNiB,SAAU,kBAAM,EAAKzL,SAAS,CAAEkK,cAAc,KALrD,SAMI,cAAC,IAAD,CACInE,YAAU,EACV7K,KAAK,WAELsK,YAAa,YACbnJ,MAAO,CAAE2E,MAAO,QAGhBgF,cAAc,EACdC,SAAU,SAACvH,GACP,EAAKsB,SAAS,CACVyE,MAAO/F,GACR,EAAKgM,cAEZjM,SAAUgC,KAAKkK,WAdnB,SAmBQpG,EAAQ6B,KAAI,SAAAC,GAAG,OAAI,cAAC,GAAD,oBAAyBA,EAAItM,KAA7B,aAAsCsM,EAAI1L,MAA1C,MAAa0L,EAAI/F,kB,GA5MzCa,IAAMC,WAwNdK,eAAWkH,I,0CCxNlBrO,GAAsBC,IAAtBD,MAAOoR,GAAenR,IAAfmR,UAuHAC,G,kDAlHX,WAAY1M,GAAQ,IAAD,8BACf,cAAMA,IAgBVoF,WAAa,SAACtK,GACV,EAAKiG,SAAL,eACKjG,GAAQ,EAAK4F,MAAM5F,MAnBT,EAuBnB6R,kBAvBmB,uCAuBC,WAAOC,GAAP,eAAAjQ,EAAA,+EAENC,IAAMwN,IAAI,QAAU,EAAKpK,MAAMuI,IAAIlH,GAAI,CACzC6C,YAAa,EAAKxD,MAAMwD,aACzB,CACC1J,QAASlB,MALD,OAQZJ,KAAQ6D,QAAQ,4BARJ,gDAUR7D,EAAUP,EAAgB,EAAD,IAC7BS,QAAQR,MAAMM,GACdA,EAAQN,MAAM,UAAYM,GAZd,yDAvBD,sDAEf,EAAKwH,MAAQ,CACTmM,iBAAiB,EACjBlK,YAAaF,cAAYqK,kBAAkBC,eAAaC,qBAAqBC,KAAY,EAAKjN,MAAMuI,IAAIrE,eACxGA,YAAa,IALF,E,qDAUnB,WACI1C,KAAKT,SAAS,CACVmD,YAAa1C,KAAKxB,MAAMuI,IAAIrE,cAEhC9K,QAAQuB,IAAI6G,KAAKxB,MAAMuI,IAAIrE,e,oBAyB/B,WAAU,IAAD,OACL,OACI,gCAEI,eAAC,IAAD,CAAOjC,MAAM,SAAb,UACI,cAAC,GAAD,CACI7E,MAAO,CACHC,OAAQ,EACRsE,YAAa,IAEjB4H,MAAO,EALX,yBAMA,cAAC,IAAD,CAAQ2D,MAAM,SACVhO,QAAS,WACD,EAAKwB,MAAMmM,iBACX,EAAKF,oBAET,EAAKvH,WAAW,oBAEpBwF,KAAM,cAACC,GAAA,EAAD,SAKd,cAAC,KAAD,IAEIrJ,KAAKd,MAAMmM,gBACP,eAAC,IAAMnL,SAAP,WACI,8UAYA,cAAC,SAAD,CACIiB,YAAanB,KAAKd,MAAMiC,YACxByD,iBAAiB,eACjBC,gBAAgB,cAChBC,oBAAqB,SAAC3D,GAClB,EAAK5B,SAAS,CACVmD,YAAaC,KAAYC,uBAAazB,EAAY0B,sBAClD1B,sBAahB,cAAC8J,GAAD,UACI,qBAEI3D,wBAAyB,CAAEC,OAAQoE,KAAUC,SAAS5L,KAAKd,MAAMwD,kBAIjF,8B,GA1GahC,IAAMC,WCR3B9G,GAAUC,IAAVD,MACA+G,GAAYC,IAAZD,QA8JOsK,G,kDA3JX,WAAY1M,GAAQ,IAAD,8BACf,cAAMA,IAuBVoF,WAAa,SAACtK,GACV,EAAKiG,SAAL,eACKjG,GAAQ,EAAK4F,MAAM5F,MA1BT,EA6BnBM,MAAQ7B,OAAOC,aAAaC,QAAQ,SA7BjB,EA+BnBoK,aA/BmB,uCA+BJ,WAAOC,GAAP,qBAAAnH,EAAA,6DAEPgH,EAAW,IAAID,UACVuB,OAAO,QAASnB,GAHd,kBAMclH,IAAMC,KAAK,SAAU8G,EAAU,CAChDnJ,QAAQ,2BACAlB,KADD,IAGH,eAAgB,wBAEpBwL,OAAQ,CACJK,MAAO,EAAKnF,MAAMuI,IAAIlH,MAbvB,gBAMDvI,EANC,EAMDA,KAWNgL,EAAKuJ,YAAa,EAEdC,EAASxU,EAAKyU,cAAc,GAAGlM,GACnCyC,EAAK0J,SAAWF,EAChBpU,KAAQ6D,QAAR,WAAoB+G,EAAKhJ,KAAzB,qBACA,EAAKiG,SAAS,CACV0M,MAAM,GAAD,oBAAM,EAAK/M,MAAM+M,OAAjB,CAAwB3J,MAvB1B,kDA0BP5K,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KA1BlC,kCA8BJ,GA9BI,0DA/BI,wDAgEnB+U,cAhEmB,uCAgEH,WAAO5J,GAAP,iBAAAnH,EAAA,sDACN8Q,EAAU,EAAK/M,MAAf+M,MAEGzI,EAAI,EAHD,YAGIA,EAAIyI,EAAM1I,QAHd,oBAIJ0I,EAAMzI,GAAG0B,MAAQ5C,EAAK4C,IAJlB,0CAOM9J,IAAM+Q,OAAO,SAAW7J,EAAK0J,SAAU,CACzChT,QAASlB,MARb,OAWAJ,KAAQ6D,QAAR,WAAoB+G,EAAKhJ,KAAzB,mBACA2S,EAAM9G,OAAO3B,EAAG,GAChB,EAAKjE,SAAS,CACV0M,UAdJ,kDAkBAvU,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAlBzC,4CAGsBqM,IAHtB,yEAhEG,wDA0FnB4I,cAAgB,aAxFZ,EAAKlN,MAAQ,CACTmN,WAAW,EACXJ,MAAO,GACPK,cAAe,IALJ,E,qDAUnB,WAEI,IAAIC,EAAYvM,KAAKxB,MAAMuI,IAAIkF,MAAMtG,KAAI,SAACqB,GACtC,IAAIwF,EAAW,IAAIC,KAAK,GAAIzF,EAAK1N,MAIjC,OAHAkT,EAAStH,KAAY,IAAIyC,MAAQzE,UAAY,IAAMsJ,EAASlT,KAC5DkT,EAASR,SAAWhF,EAAKnH,GACzB2M,EAASX,YAAa,EACfW,KAEXxM,KAAKT,SAAS,CACV0M,MAAOM,M,oBA0Ef,WAAU,IAAD,OAEL,OACI,gCAEI,eAAC,IAAD,CAAO9L,MAAM,SAAb,UACI,cAAC,GAAD,CACI7E,MAAO,CACHC,OAAQ,EACRsE,YAAa,IAEjB4H,MAAO,EALX,mBAMA,cAAC,IAAD,CACIrK,QAAS,kBAAM,EAAKkG,WAAW,cAC/B8H,MAAM,SACNtC,KAAM,cAACC,GAAA,EAAD,SAKd,cAAC,KAAD,IAEIrJ,KAAKd,MAAMmN,UACP,eAAC,GAAD,CACIzQ,MAAO,CACHiB,aAAc,IAElBmI,UAAQ,EACR3C,aAAcrC,KAAKqC,aACnB4C,SAAUjF,KAAKkM,cACf3J,SAAUvC,KAAKd,MAAM+M,MAPzB,UAUI,mBAAGtQ,UAAU,uBAAb,SACI,cAACyJ,EAAA,EAAD,MAEJ,mBAAGzJ,UAAU,kBAAb,uDACA,mBAAGA,UAAU,kBAAb,uHAKJ,cAAC,KAAD,CACIgP,UAAQ,EACRP,KAAK,QACL5D,WAAYxG,KAAKd,MAAM+M,MACvBtF,WAAY,SAAAK,GAAI,OAAI,cAAC,KAAKrJ,KAAN,UAChB,mBAAGF,KAAM5F,EAAU,SAAWmP,EAAKgF,SAAnC,SAA8ChF,EAAK1N,QADnB0N,EAAKgF,aAMrD,8B,GAnJatL,IAAMC,WCsBpBpC,G,kDAhCX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IACDU,MAAQ,GAFE,E,0CAUnB,WAEI,OACI,gCAEI,cAAC,GAAD,CAAUyE,MAAO3D,KAAKxB,MAAMuI,IAAIlH,GAAIkH,IAAK/G,KAAKxB,MAAMuI,MAGpD,cAAC,GAAD,CAAgBA,IAAK/G,KAAKxB,MAAMuI,IAAKrE,YAAa1C,KAAKxB,MAAMuI,IAAIrE,cAEjE,cAACgK,GAAD,CAAU3F,IAAK/G,KAAKxB,MAAMuI,MAE1B,cAAC4F,GAAD,CAAe5F,IAAK/G,KAAKxB,MAAMuI,MAE/B,cAAC,GAAD,CAAeA,IAAK/G,KAAKxB,MAAMuI,a,GAzB7BrG,IAAMC,W,UCsGxB,SAASiM,GAAkBC,GAGvB,OAFUA,EAAItJ,OACA,IAEHsJ,EAAIhC,UAAU,EAFX,KAEyB,MAE5BgC,EAIA7L,oBApHf,SAAiBxC,GACb,IACImL,EAQAnL,EARAmL,KACAmD,EAOAtO,EAPAsO,cACAC,EAMAvO,EANAuO,wBACAC,EAKAxO,EALAwO,KACA1S,EAIAkE,EAJAlE,SACA2S,EAGAzO,EAHAyO,QACAC,EAEA1O,EAFA0O,SACAC,EACA3O,EADA2O,UAGEC,EAAU,SAAApG,GAAI,MAAI,CACpB,mBACIpL,MAAO,CACHC,OAAQ,IAGZ6B,QAAS,SAACO,GAAD,OAAOgP,EAAQhP,EAAG+I,IAL/B,iBAIQ,sBAIR,mBACIpL,MAAO,CACHC,OAAQ,IAGZ6B,QAAS,SAACO,GAAD,OAAOiP,EAASjP,EAAG+I,IALhC,kBAIQ,sBAIR,cAAC,KAAD,CACI3G,MAAM,gBACNgN,UAAW,kBAAMF,EAAUnG,EAAKnH,KAFpC,SAII,mBAGIjE,MAAO,CAAEe,MAAO,MAAO2Q,WAAY,IACnC5P,QAAS,SAACO,GAENA,EAAEsP,kBANV,mBAEQ,0BAYhB,OAAQ,qCACHjT,GAAY,oLAOb,cAAC,KAAD,CAEIsB,MAAO,CACHpB,SAAU,KAEdqF,GAAG,iBACH2N,WAAY,CAERhD,QAASb,EAETE,MAAOiD,EACP9O,SAAU+O,GAIdrG,WAAYpM,EAAW,WAAa,aAEpCkM,WAAYwG,EACZrG,WAAY,SAAAK,GAAI,OACZ,eAAC,KAAKrJ,KAAN,CAEIyP,QAASA,EAAQpG,GAFrB,UAMI,cAAC,KAAKrJ,KAAK8P,KAAX,CAEIpN,MAAO,sBAAKzE,MAAO,CACfG,QAAS,UADN,UAGH,cAAC,KAAD,CAAKY,MAAwB,SAAhBqK,EAAKxP,OAAoB,OAAS,UAA/C,SAEQwP,EAAKxP,OAAO2R,gBAEpB,mBAAG1L,KAAK,IAAIC,QAAS,SAACO,GAAD,OAAOgP,EAAQhP,EAAG+I,IAAvC,SACKA,EAAK3G,WAIdqC,YAAakK,GAAkB5F,EAAK0G,wBAExC,8BAAM,iBAAmBhG,KAAO,IAAIC,KAAKX,EAAK2G,YAAY9F,cArBrDb,EAAKnH,aC3ExB+N,GAAa,SAAAC,GACf,MAAM,IAAIC,MAAM3W,EAAgB0W,KA0BrBE,GAJF,CACTC,gBAfiB,uCAAG,WAAOC,GAAP,iBAAA9S,EAAA,+EAEuBC,IAAMuE,IAAI9H,EAAU,gBAAiB,CACxEmB,QAASlB,IACTwL,OAAQ,CACJ2K,oBALQ,uBAEFC,EAFE,EAEV5W,KAAQ4W,aAFE,kBASTA,GATS,gCAWhBN,GAAW,EAAD,IAXM,yDAAH,uDCTfA,GAAa,SAAAC,GACf,MAAM,IAAIC,MAAM3W,EAAgB0W,KA+BrB,IACXM,OAxBQ,uCAAG,WAAOxK,GAAP,iBAAAxI,EAAA,+EAEuBC,IAAMuE,IAAI9H,EAAU,QAAU8L,EAAO,CAC/D3K,QAASlB,MAHN,uBAEOiP,EAFP,EAEDzP,KAAQyP,IAFP,kBAMAA,GANA,gCAQP6G,GAAW,EAAD,IARH,yDAAH,sDAyBRT,UAbW,uCAAG,WAAOxJ,GAAP,SAAAxI,EAAA,+EAEJC,IAAM+Q,OAAOtU,EAAU,QAAU8L,EAAO,CAC1C3K,QAASlB,MAHH,sDAOV8V,GAAW,EAAD,IAPA,wDAAH,uDCqBC,QACZQ,aApBc,uCAAG,WAAOhL,GAAP,SAAAjI,EAAA,+EAEPC,IAAM+Q,OAAOtU,EAAU,qBAAsB,CAC/CmB,QAASlB,IACTwL,OAAQ,CACJF,eALK,4DAUP,IAAI0K,MAAM3W,EAAgB,EAAD,KAVlB,wDAAH,uDCrBZyW,GAAa,SAAAC,GACf,MAAM,IAAIC,MAAM3W,EAAgB0W,KAgCpB,IACZQ,iBA1BkB,uCAAG,8BAAAlT,EAAA,+EAIuBC,IAAMuE,IAAI9H,EAAU,oBAAqB,CAC7EmB,QAASlB,MALI,uBAIHwW,EAJG,EAIXhX,KAAQgX,cAJG,kBAQVA,GARU,gCAWjBV,GAAW,EAAD,IAXO,yDAAH,qDA2BlBW,gBAZiB,uCAAG,WAAOC,GAAP,SAAArT,EAAA,+EAEVC,IAAMqT,MAAM5W,EAAU,iBAAmB2W,EAAgB,GAAI,CAC/DxV,QAASlB,MAHG,sDAMhB8V,GAAW,EAAD,IANM,wDAAH,uDCxBfA,GAAa,SAAAC,GACf,MAAM,IAAIC,MAAM3W,EAAgB0W,KAyBpB,IACZa,uBAnBwB,uCAAG,8BAAAvT,EAAA,+EAE2BC,IAAMuE,IAAI9H,EAAU,oBAAqB,CACvFmB,QAASlB,IACTwL,OAAQ,CACJqL,MAAO,EACPC,KAAM,KANS,uBAETC,EAFS,EAEjBvX,KAAQuX,wBAFS,kBAUhBA,GAVgB,gCAavBjB,GAAW,EAAD,IAba,yDAAH,sDCT5B,SAASkB,KAKL,IALcC,EAKf,uDALqB,CACpBzV,KAAM,GACNY,MAAO,GACP2F,GAAI,GACJmP,OAAQ,IAERhP,KAAK1G,KAAOyV,EAAIzV,KAChB0G,KAAK9F,MAAQ6U,EAAI7U,MACjB8F,KAAKH,GAAKkP,EAAIlP,GACdG,KAAKgP,OAASD,EAAIC,OAGtB,IAAMpB,GAAa,SAAAC,GACf,MAAM,IAAIC,MAAM3W,EAAgB0W,KAG9BoB,GAAK,uCAAG,0CAAA9T,EAAA,+EAEeC,IAAMuE,IAAI9H,EAAU,WAAY,CACjDmB,QAASlB,MAHP,uBAEAR,EAFA,EAEAA,KAFA,EAK8BA,EAAK4X,KAAjCrP,EALF,EAKEA,GAAIvG,EALN,EAKMA,KAAMY,EALZ,EAKYA,MAAO8U,EALnB,EAKmBA,OACrBE,EAAO,CACPrP,KAAIvG,OAAMY,QAAO8U,UAPf,kBASC,IAAIF,GAASI,IATd,wCAWA,IAAIpB,MAAM3W,EAAgB,EAAD,KAXzB,0DAAH,qDAyBX,IAAMgY,GAAU,uCAAG,WAAOxG,EAAOxK,GAAd,iBAAAhD,EAAA,yDACD,UAAVwN,GAXO,wJACDyG,KAAKC,OAUyBlR,GAVX6H,eASd,sBAEL,IAAI8H,MAAM,oBAFL,gCAKoB1S,IAAMwN,IAAI/Q,EAAU,eAApB,eAC1B8Q,EAAQxK,GACV,CACCnF,QAASlB,MARF,uBAKGoX,EALH,EAKL5X,KAAQ4X,KALH,kBAWJ,IAAIJ,GAASI,IAXT,kCAaXtB,GAAW,EAAD,IAbC,0DAAH,wDAuBV0B,GAAc,uCAAG,WAAOlV,EAAUmV,GAAjB,iBAAApU,EAAA,+EAEMC,IAAMqT,MAAM5W,EAAU,iBAAkB,CACzDuC,WACAmV,eACD,CACCvW,QAASlB,MANE,uBAETR,EAFS,EAETA,KAFS,kBASRA,EAAKsC,OATG,gCAWfgU,GAAW,EAAD,IAXK,yDAAH,wDAoBd4B,GAAc,uCAAG,WAAO3P,GAAP,iBAAA1E,EAAA,+EAEQ8T,KAFR,qBAETD,EAFS,EAETA,QAFS,yCAIJnX,EAAU,cAAgBmX,GAJtB,gCAMJ,IANI,0DASfpB,GAAW,EAAD,IATK,0DAAH,sDAiDLmB,GAfL,CACNE,SACAE,cACAG,kBACAE,kBACAC,eArBgB,uCAAG,WAAOtN,GAAP,SAAAhH,EAAA,kEAEVgH,EAFU,sBAEM,IAAI2L,MAAM,sBAFhB,uBAIT1S,IAAMC,KAAKxD,EAAU,aAAcsK,EAAU,CAC/CnJ,QAAQ,2BACAlB,KADD,IAEH,eAAgB,0BAPT,uDAYf8V,GAAW,EAAD,IAZK,yDAAH,uDChGpB,SAASkB,KAIL,IAJcC,EAIf,uDAJqB,CACpBzV,KAAM,GACNY,MAAO,GACP2F,GAAI,IAEJG,KAAK1G,KAAOyV,EAAIzV,KAChB0G,KAAK9F,MAAQ6U,EAAI7U,MACjB8F,KAAKH,GAAKkP,EAAIlP,GAGlB,IAAMoP,GAAK,uCAAG,wCAAA9T,EAAA,+EAEeC,IAAMuE,IAAI9H,EAAU,WAAY,CACjDmB,QAASlB,MAHP,uBAEAR,EAFA,EAEAA,KAFA,EAKsBA,EAAK4X,KAAzBrP,EALF,EAKEA,GAAIvG,EALN,EAKMA,KAAMY,EALZ,EAKYA,MACdgV,EAAO,CACPrP,KAAIvG,OAAMY,SAPR,kBASC,IAAI4U,GAASI,IATd,wCAWA,IAAIpB,MAAM3W,EAAgB,EAAD,KAXzB,0DAAH,qDAwCIuY,GAxBJ,CAKPT,SACAU,QACAC,gBACAC,WACAC,OACAC,gBACAC,YClBI3F,GAAW4F,IAAX5F,OAIF6F,GAAgB,UA4ChB3R,G,kDACF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IA0BVuO,wBAA0B,SAACpD,EAAMC,GAEzBD,IAAS,EAAKzK,MAAMyK,MAAQC,IAAa,EAAK1K,MAAM0K,UACxD,EAAKrK,SAAS,CACVoK,OACAC,YACD,EAAKuG,YAjCO,EAsCnBhD,UAtCmB,uCAsCP,WAAOxJ,GAAP,SAAAxI,EAAA,+EAEEuU,GAAKI,IAAI3C,UAAUxJ,GAFrB,OAGJ,EAAKwM,YACLzY,KAAQ6D,QAAQ,mBAJZ,gDAMJ7D,KAAQN,MAAM,6BAA+BD,EAAgB,EAAD,KANxD,yDAtCO,wDAgDnBgZ,UAhDmB,uCAgDP,WAAOC,GAAP,qCAAAjV,EAAA,6DAER0E,GADIA,EAAK,EAAKrB,MAAM6R,SAASC,SAAS/Y,MAAM,MACpCsI,EAAG0D,OAAS,GAFZ,EAGyB,EAAKrE,MAAhC0K,EAHE,EAGFA,SAAUD,EAHR,EAGQA,KAAMD,EAHd,EAGcA,OAElB0G,IACAzG,EAAO,GANH,EAWwB,EAAKzK,MAA/BqR,EAXE,EAWFA,aAActH,EAXZ,EAWYA,QACC,MAAjBsH,EACAC,EAAS,cACe,MAAjBD,EACPC,EAAS,QACe,MAAjBD,IACPC,EAAS,iBAEQ,MAAjBD,IAEIE,EADAxH,EACQ,MAEA,QAvBR,mBA4BiB7N,IAAMuE,IAAI,WAAY,CACvC3G,QAASlB,IACTwL,OAAQ,CACJF,UAAWvD,EACX8O,MAAO/E,EACPgF,KAAMhF,GAAYD,EAAO,GACzBD,SACA8G,SACAC,WApCJ,iBA4BEnZ,EA5BF,EA4BEA,KAYN,EAAKiI,SAAS,CACVyN,KAAM1V,EAAK0V,KACXF,cAAexV,EAAKuS,MACpBF,SA3CA,kDA8CJhS,EAAgB,EAAD,IA9CX,0DAhDO,wDAsGnB+Y,QAtGmB,uCAsGT,WAAO/M,GAAP,eAAAxI,EAAA,+EAEcuU,GAAKI,IAAI3B,OAAOxK,GAF9B,UAEEoD,EAFF,6BAGc,IAAI+G,MAAM,iBAHxB,OAIF,EAAKtP,MAAMmS,QAAQnO,KAAK,EAAKhE,MAAM6R,SAASC,UAC5C,EAAK/Q,SAAS,CACVqR,YAAa7J,EACb8J,cAAc,EACdC,iBAAkB/J,EAAI1G,QARxB,kDAWF/E,IAAalE,MAAM,CACfM,QAASP,EAAgB,EAAD,MAZ1B,0DAtGS,wDAuHnB4Z,gBAAkB,WACd,IAAQV,EAAa,EAAK7R,MAAlB6R,SACJrM,EAAQ,IAAIgN,gBAAgBX,EAAS3G,QACb,aAAxB1F,EAAMrE,IAAI,WAAmD,OAAvBqE,EAAMrE,IAAI,UAChD,EAAK+Q,QAAQ1M,EAAMrE,IAAI,WA3HZ,EA+HnBiE,WAAa,SAACtK,GACV,EAAKiG,SAAL,eACKjG,GAAQ,EAAK4F,MAAM5F,MAjIT,EAqInB2X,kBAAoB,SAAClC,GAEbA,EAAIxK,MAAQ,EAAKrF,MAAMqR,aACvB,EAAKhR,SAAS,CACVgR,aAAc,IACd5G,KAAM,GACP,EAAKwG,WAER,EAAK5Q,SAAS,CACVgR,aAAcxB,EAAIxK,IAClBoF,KAAM,GACP,EAAKwG,YA9IZ,EAAKjR,MAAQ,CACTgS,mBAAmB,EACnBC,oBAAoB,EACpBN,cAAc,EACd/D,cAAe,EACflD,SAAU,GACVwH,YAAa,GACbZ,OAAQ,GACR7G,KAAM,EACNqD,KAAM,GACNuD,aAAc,IACdtH,SAAS,EACT2H,YAAa,KACbE,iBAAkB,GAClBpH,OAAQ,IAhBG,E,qDAqBnB,WACI1J,KAAKmQ,YACLnQ,KAAK+Q,oB,gCA6HT,SAAmB9Q,GAEf,GADwBD,KAAKxB,MAAM6R,WAAapQ,EAAUoQ,SACrC,CACjB,IAAIxQ,EAAKG,KAAKxB,MAAM6R,SAASC,SAAS/Y,MAAM,KAC5CsI,EAAKA,EAAGA,EAAG0D,OAAS,GACpB3L,QAAQuB,IAAI,oBACZ6G,KAAKT,SAAS,CACVmK,OAAQ,GACRC,KAAM,GACP3J,KAAKmQ,WAGRnQ,KAAK+Q,qB,oBAIb,WAII,IAJM,IAAD,OAEDM,EAAW,GAEN7N,EAAI,EAAGA,EAAI,GAAIA,IACpB6N,EAAS7O,KAAK,CAAEmB,MAAO,WAAYtD,MAAO,uBAAwBnB,MAAO,WAAYvE,SAAS,IAElG,OACI,cAAC,IAAD,CAAYH,SAAU,IAAtB,SACK,SAACF,GAAD,OACG,gCACI,sBAAKsB,MAAO,CACRiB,aAAc,GACduD,IAAK,EACLrE,QAAS,OACTuV,SAAU,QAJd,UAMI,cAAC,IAAD,CAEIvT,KAAK,UAAUL,QAAS,kBAAM,EAAKkG,WAAW,sBAFlD,wBAGA,cAAC,IAAD,CACIlG,QAAS,EAAKyS,UADlB,qBAMA,cAAC9F,GAAD,CACIlM,MAAO,EAAKe,MAAMwK,OAClB3E,YAAY,SACZ/G,SAAU,SAACC,GACP,EAAKsB,SAAS,CACVmK,OAAQzL,EAAEC,OAAOC,QAClB,kBAAM,EAAKgS,WAAU,OAE5B3K,SAAU,SAACvH,GACP,EAAKkS,WAAU,IAChBvU,MAAO,CAAE2E,MAAO,OAEvB,cAAC,KAAD,CAAUgR,SAnPxB/S,EAmPsC,CACpB+R,aAAc,EAAKrR,MAAMqR,aACzB/L,aAAc,EAAKyM,mBApP/C,eAAC,KAAD,CAEIvT,QAASc,EAAMgG,aAFnB,UAGI,cAAC,KAAK7G,KAAN,CAEIyL,KAAM,cAACoI,GAAA,EAAD,CAAkB5V,MAAO,CAC3Be,MAA8B,MAAvB6B,EAAM+R,aAAuBL,GAAgB,WAH5D,SAOI,sBAAMtU,MAAO,CACTe,MAA8B,MAAvB6B,EAAM+R,aAAuBL,GAAgB,SADxD,0BAPW,KAaf,cAAC,KAAKvS,KAAN,CAAmByL,KAAM,cAACqI,GAAA,EAAD,CAAkB7V,MAAO,CAC9Ce,MAA8B,MAAvB6B,EAAM+R,aAAuBL,GAAgB,WADxD,SAGI,sBAAMtU,MAAO,CACTe,MAA8B,MAAvB6B,EAAM+R,aAAuBL,GAAgB,SADxD,oBAHW,KAUf,cAAC,KAAKvS,KAAN,CAAmByL,KAAM,cAACsI,GAAA,EAAD,CAAkB9V,MAAO,CAC9Ce,MAA8B,MAAvB6B,EAAM+R,aAAuBL,GAAgB,WADxD,SAGI,sBAAMtU,MAAO,CACTe,MAA8B,MAAvB6B,EAAM+R,aAAuBL,GAAgB,SADxD,4BAHW,SAwNK,SAII,eAAC,IAAD,sBACY,cAACyB,GAAA,EAAD,SAIgB,MAA5B,EAAKzS,MAAMqR,aACP,cAAC,KAAD,CACIxH,gBAAgB,MAChBC,kBAAkB,OAClBE,gBAAc,EACdlL,SAAU,SAACiL,GAEP,EAAK1J,SAAS,CACVoK,KAAM,EACNV,WACD,EAAKkH,cAId,QAKd,cAAC,KAAD,CACIyB,gBAAc,EACdvR,MAAM,iBACNyK,QAAS,EAAK5L,MAAMgS,kBACpB3Q,MAAO,IACPgK,OAAQ,KACRS,SAAU,kBAAM,EAAKpH,WAAW,sBANpC,SAOI,cAACiO,GAAD,CACIhO,kBAAmB,EAAKsM,UACxBvM,WAAY,kBAAM,EAAKA,WAAW,0BAO1C,qBAAKhI,MAAO,CACRuE,YAAa7F,EAAW,GAAK,IADjC,SAKI,cAAC,GAAD,CACIqP,KAAM,EAAKzK,MAAMyK,KACjBmD,cAAe,EAAK5N,MAAM4N,cAC1BC,wBAAyB,EAAKA,wBAC9BC,KAAM,EAAK9N,MAAM8N,KACjB1S,SAAUA,EACV2S,QAAS,SAAChP,EAAG+I,GACT,EAAKzH,SAAS,CACVsR,cAAc,EACdC,iBAAkB9J,EAAK3G,MACvBuQ,YAAa5J,IAEjB/I,EAAEsP,kBAENL,SAAQ,uCAAE,WAAOjP,EAAG+I,GAAV,eAAA7L,EAAA,yDACN8C,EAAEsP,iBACEuE,EAAa5Z,EAAkB,uBAAyB8O,EAAKpH,QAAU,0BAA4BoH,EAAKnH,IACxGkS,UAAUC,UAHR,gCAIID,UAAUC,UAAUC,UAAUH,GAJlC,OAKFpa,KAAQ6D,QAAQ,6BALd,uBAOFxD,OAAOma,UAAUC,KAAKL,GACtBpa,KAAQ6D,QAAQ,6BARd,4CAAF,wDAYR4R,UAAW,EAAKA,cAKxB,cAAC,KAAD,CACI5M,MAAOjG,EAAW,OAAS,IAC3B+F,MAAO,EAAKnB,MAAM4R,iBAClBsB,UAAU,QACVC,UAAU,EACVC,QAAS,WACL,EAAKnC,YACL,EAAK5Q,SAAS,CAAEsR,cAAc,KAElC/F,QAAS,EAAK5L,MAAM2R,aACpBe,gBAAc,EAVlB,SAYI,cAACW,GAAD,CAASxL,IAAK,EAAK7H,MAAM0R,mBA/UxC,IAACpS,S,GAwCIkC,IAAMC,WAmTxB5I,OAAOma,UAAa,SAAUna,EAAQK,EAAU2Z,GAC5C,IAAIS,EAaJ,SAASC,IACL,IAAIC,EACAC,EAXGZ,EAAUa,UAAUvP,MAAM,kBAc7BqP,EAAQta,EAASya,eACXC,mBAAmBN,IACzBG,EAAY5a,EAAOgb,gBACTC,kBACVL,EAAUM,SAASP,GACnBF,EAASU,kBAAkB,EAAG,SAE9BV,EAASW,SAejB,MAAO,CACHhB,KAPG,SAAU/G,IA3BjB,SAAwBA,IACpBoH,EAAWpa,EAASgb,cAAc,aACzBjV,MAAQiN,EACjBhT,EAASoP,KAAK6L,YAAYb,GAyB1Bc,CAAelI,GACfqH,IANAra,EAASmb,YAAY,QACrBnb,EAASoP,KAAKgM,YAAYhB,KAhCd,CA4CjBza,OAAQK,SAAU2Z,WAGN/Q,mBAAWzC,I,8BC9TXkV,OAxGf,SAA4BjV,GACxB,MAAsCxE,mBAASiH,cAAYC,eAA3D,mBAAOC,EAAP,KAAoBC,EAApB,KAEA,EAAerG,IAAKC,UAAbC,EAAP,oBAEMyY,EAAY,uCAAG,WAAOC,GAAP,iBAAAxY,EAAA,6DAEbkF,EAAQsT,EAAKtT,MACbmH,EAAO7E,KAAYC,uBAAazB,EAAY0B,sBAH/B,kBAMPzH,IAAMC,KAAK,gBAAiB,CAC9B+H,UAAW5E,EAAMoB,QAAQC,GACzBQ,QACAmH,QACD,CACCxO,QAASlB,MAXA,OAabJ,KAAQ6D,QAAQ,4BAChBiD,EAAMoV,aACNpV,EAAMqV,aAfO,kDAkBbjc,QAAQR,MAAMD,EAAgB,EAAD,KAC7BO,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAnB5B,0DAAH,sDAwBlB,OAAQ,8BAEJ,cAAC,IAAD,CAAOqJ,UAAU,WAAW5E,MAAO,CAAE2E,MAAO,QAA5C,SACI,eAAC,IAAD,CACIkE,OAAO,WACPlH,SAAUmW,EACVzY,KAAMA,EAHV,UAKI,cAAC,IAAK0C,KAAN,CACIC,MAAM,QACNtE,KAAK,QACLuE,MAAO,CACH,CACIC,UAAU,EACVpG,QAAS,uBANrB,SAUI,cAAC,IAAD,CACIqG,KAAK,WAEb,uWAWA,cAAC,IAAKJ,KAAN,CACIC,MAAM,OACNtE,KAAK,OAFT,SAKI,cAAC,SAAD,CACI6H,YAAaA,EACbyD,iBAAiB,eACjBC,gBAAgB,cAChBC,oBAAqB1D,MAK7B,eAAC,IAAD,CAAOxF,MAAO,CACV2E,MAAO,OACP8E,UAAW,GACXtJ,QAAS,cACTgB,eAAgB,YAJpB,UAMI,cAAC,IAAD,CAAQW,QAASc,EAAMoV,WAAvB,oBAGA,cAAC,IAAD,CACItV,SAAS,SACTP,KAAK,UAFT,+B,qBC3DZsM,GAAW4F,IAAX5F,OAER,SAASwF,GAAQrR,GACb,OAA2B,OAAvBA,EAAM0P,aAA8B,KAChC,qCAAE,sBAAKtS,MAAO,CAClBG,QAAS,cACTU,WAAY,UAFN,UAIN,cAAC,KAAD,CAAQ2N,KAAM,GACVxO,MAAO,CACHuE,YAAa,IAEjBiJ,KAAM,cAAC0K,GAAA,EAAD,MACV,iCACI,mBAAGlY,MAAO,CACNC,OAAQ,EACRe,SAAU,IAFd,SAII,4BAAI4B,EAAM0P,aAAa1E,UAAUlQ,SAErC,mBAAGsC,MAAO,CACNC,OAAQ,GADZ,yBAMJ,+BACI,cAAC,IAAD,CAAQkC,KAAK,OAAOnC,MAAO,CACvBe,MAAO,UACP2Q,WAAY,IAFhB,wBAMJ,cAAC,KAAD,IACA,6BACK9O,EAAM0P,aAAa7N,QAExB,mBACIiH,wBAAyB,CAAEC,OAAQ/I,EAAM0P,aAAa1G,MACtD5L,MAAO,CAAEpB,SAAU,U,IAMzB+D,G,kDACF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAuCVuV,WAAa,SAACza,GACV,IAAI0a,EAAe1a,EAAK/B,MAAM,KAC1B0c,EAAgBD,EAAa,GAMjC,OAJIA,EAAa,KACbC,GAAiB,IAAMD,EAAa,GAAGnJ,UAAU,EAAG,GAAG1B,cAAgB,KAGpE8K,GAhDQ,EAmDnBC,uBAnDmB,sBAmDM,gCAAA/Y,EAAA,yDACbkV,EAAa,EAAK7R,MAAlB6R,SAEoB,uBADxBrM,EAAQ,IAAIgN,gBAAgBX,EAAS3G,SAC/B/J,IAAI,YAAqCqE,EAAMmQ,IAAI,kBAHxC,0CAMYzE,GAAKK,aAAa/B,gBAAgBhK,EAAMrE,IAAI,mBANxD,UAMTuO,EANS,6BAQY,IAAIJ,MAAM,0BARtB,OAUb,EAAKtP,MAAMmS,QAAQnO,KAAK6N,EAASC,UAEjC,EAAK/Q,SAAS,CACV6U,qBAAsBlG,IAE1B,EAAKmG,2BAfQ,kDAiBb/Y,IAAalE,MAAM,CACfM,QAASP,EAAgB,EAAD,MAlBf,kFAnDN,EAkFnBkd,yBAlFmB,uCAkFQ,WAAOC,GAAP,+BAAAnZ,EAAA,+DAEmB,EAAK+D,MAAvCqV,EAFe,EAEfA,cAAe7K,EAFA,EAEAA,OAAQ8G,EAFR,EAEQA,OAC3B5B,EAAO2F,EAAchR,OACrB+Q,IACA1F,EAAO,GAGG,EARS,SAYnB4F,GADIA,EAAe,EAAKhW,MAAM6R,SAASC,SAAS/Y,MAAM,MAC1Bid,EAAajR,OAAS,GAZ/B,SAaEnI,IAAMuE,IAAI,iBAAkB,CAC7C3G,QAASlB,IACTwL,OAAQ,CACJF,UAAWoR,EACX7F,MATE,EAUFC,OACAlF,SACA8G,YApBW,gBAablZ,EAba,EAabA,KAUNM,QAAQuB,IAAI7B,GAIRmd,EADAH,EACmBhd,EAAKid,cAER,uBAAOA,GAAP,aAAyBjd,EAAKid,gBAElD,EAAKhV,SAAS,CACVsK,MAAOvS,EAAKuS,MACZ0K,cAAeE,EACfC,SAAS,IAlCM,kDAqCnB/c,EAAgB,EAAD,IArCI,0DAlFR,wDA2HnB6N,SA3HmB,uCA2HR,WAAOkE,GAAP,eAAAvO,EAAA,sDACHmZ,GAAY,EACZ5K,IAAW,EAAKxK,MAAMwK,SAAQ4K,GAAY,GAE9C,EAAK/U,SAAS,CACVmK,WACD,kBAAM,EAAK2K,yBAAyBC,MANhC,2CA3HQ,wDAoInBK,mBApImB,sBAoIE,kCAAAxZ,EAAA,2DAEyB,EAAK+D,MAAzCqV,EAFW,EAEXA,cAAe1K,EAFJ,EAEIA,MAAO+K,EAFX,EAEWA,UAE5B,EAAKrV,SAAS,CAAE5E,SAAS,IACzB/C,QAAQuB,IAAI,WACZvB,QAAQuB,IAAI,EAAK+F,OACbqV,EAAchR,SAAWsG,IAAuB,IAAd+K,EAPrB,uBASb,EAAKrV,SAAS,CACVmV,SAAS,EACT/Z,SAAS,IAXA,iCAejB/C,QAAQuB,IAAI,QAfK,UAgBX,EAAKkb,2BAhBM,QAiBjB,EAAK9U,SAAS,CACV5E,SAAS,EACTia,WAAW,IAnBE,4CApIF,EA2JnBC,YAAc,SAACvb,GAAD,OAAU,EAAKiG,SAAL,eAAiBjG,GAAQ,EAAK4F,MAAM5F,MAzJxD,EAAK4F,MAAQ,CACTrE,UAAU,EACVia,oBAAoB,EACpBV,qBAAsB,KACtBG,cAAe,GACf1K,MAAO,EACPlP,SAAS,EACT+O,OAAQ,GACR8G,OAAQ,GACRkE,SAAS,EACTE,WAAW,GAZA,E,4FAkBnB,sBAAAzZ,EAAA,sDAII6E,KAAKkU,yBAJT,gD,sFAOA,SAAmBjU,GACSD,KAAKxB,MAAM6R,WAAapQ,EAAUoQ,WAEtDrQ,KAAKqU,0BAAyB,GAE9BrU,KAAKkU,0BAGT,IAAIM,EAAexU,KAAKxB,MAAM6R,SAASC,SAAS/Y,MAAM,KACtDid,EAAeA,EAAaA,EAAajR,OAAS,GAC9CvD,KAAKd,MAAMkV,sBAAwBI,IAAiBxU,KAAKd,MAAMkV,qBAAqBxU,SACpFI,KAAKT,SAAS,CAAE6U,qBAAsB,S,oBAyH9C,WAAU,IAAD,OACL,OACI,cAAC,IAAD,CAAY5Z,SAAU,IAAtB,SACK,SAACF,GAAD,OACG,gCAEI,cAAC,KAAD,CACI+F,MAAM,0BACNyK,QAAS,EAAK5L,MAAM4V,mBACpBlD,gBAAc,EACdrH,OAAQ,KACR3O,MAAO,CACH2E,MAAOjG,EAAW,MAAQ,KAG9B0Q,SAAU,kBAAM,EAAK6J,YAAY,uBACjC9J,KAAM,kBAAM,EAAK8J,YAAY,uBAVjC,SAWI,cAAC,GAAD,CACIjV,QAAS,EAAKpB,MAAMoB,QACpBgU,WAAY,kBAAM,EAAKiB,YAAY,uBACnChB,WAAY,kBAAM,EAAKQ,0BAAyB,QAGxD,sBAAKzY,MAAO,CACRiB,aAAc,GACduD,IAAK,EACLrE,QAAS,OACTuV,SAAU,QAJd,UAMI,cAAC,IAAD,CACI5T,QAAS,kBAAM,EAAKmX,YAAY,uBAChC9W,KAAK,UAFT,8BAKA,cAAC,IAAD,CACIL,QAAS,kBAAM,EAAK2W,0BAAyB,IADjD,qBAKA,cAAC,GAAD,CAAQtP,YAAY,SAChB/G,SAAU,SAACC,GAAD,OAAO,EAAKuH,SAASvH,EAAEC,OAAOC,QACxCqH,SAAU,SAACkE,GAAD,OAAY,EAAKlE,SAASkE,IAAS9N,MAAO,CAAE2E,MAAO,UAGrE,uNASA,sBAAK3E,MAAO,CACRG,QAASzB,EAAW,OAAS,cAC7B0B,cAAe1B,EAAW,SAAW,QACrC6F,YAAa7F,EAAW,GAAK,SAHjC,UAKI,qBACIsB,MAAO,CACHmZ,YAAa,iBAEbC,YAAa,QACbC,YAAa,EACbjY,aAAc,EACduD,MAAOjG,EAAW,QAAU,IAC5B4a,OAAQ,IACRC,UAAW,OACXC,gBAAiB,eAVzB,SAeI,eAAC,KAAD,CACIC,aAAa,EAGbC,UAAW,EACXC,SAAU,EAAKZ,mBACfD,SAAU,EAAKxV,MAAMvE,SAAW,EAAKuE,MAAMwV,QAC3Cc,WAAW,EAPf,UASI,cAAC,KAAD,CACI9O,WAAW,aACXF,WAAY,EAAKtH,MAAMqV,cACvB5N,WAAY,SAACK,GAAD,OAER,cAAC,KAAKrJ,KAAN,CAEIhC,UAAU,kCACV+B,QAAS,WACL,EAAK6B,SAAS,CACV6U,qBAAsBpN,KALlC,SASI,cAAC,KAAKrJ,KAAK8P,KAAX,CAEItG,OAAQ,cAAC,KAAD,CACJvL,MAAO,CACH0R,WAAY,GACZjI,UAAW,GAHX,SAKN2B,EAAKwC,UAAUlQ,KAAKuR,UAAU,EAAG,GAAG1B,gBACtC9I,MAAO,qCACH,mBACIzE,MAAO,CACHuE,YAAa,IAEjBzC,QAAS,SAAAO,GAAC,OAAIA,EAAEsP,kBAChB9P,KAAK,IALT,SAOK,EAAKsW,WAAW/M,EAAKwC,UAAUlQ,QAEpC,cAAC,KAAD,CAAKqD,MAAM,OAAX,mBACA,sBACIf,MAAO,CACH6Z,MAAO,QACPtV,YAAa,GACbrD,QAAS,IAJjB,SAMK4K,KAAO,IAAIC,KAAKX,EAAKY,YAAY2B,OAAO,WAIjD7G,YAAasE,EAAK0O,iBArCjB1O,EAAKnH,OA4CrB,EAAKX,MAAMvE,SAAW,EAAKuE,MAAMwV,SAC9B,qBAAK/Y,UAAU,yBAAf,SACI,cAAC,KAAD,WAKhB,4VASErB,GACE,qBAAKsB,MAAO,CACRc,KAAM,EACN4Q,WAAY,GACZ/M,MAAO,IACPnE,UAAW,KAJf,SAMyC,OAApC,EAAK8C,MAAMkV,qBACR,cAAC,KAAD,CAAOxY,MAAO,CACVyJ,UAAW,KAEX3C,YAAY,mCAEhB,cAAC,GAAD,CAASwL,aAAc,EAAKhP,MAAMkV,yBAG7C9Z,GACG,cAAC,KAAD,CACIwQ,QAA6C,OAApC,EAAK5L,MAAMkV,qBACpB9B,QAAS,kBAAM,EAAK/S,SAAS,CAAE6U,qBAAsB,QACrDxC,gBAAc,EACdrR,MAAM,MACNF,MAAM,oBALV,SAQI,cAAC,GAAD,CAAS6N,aAAc,EAAKhP,MAAMkV,sC,GA3UpD1T,IAAMC,WAsVTK,eAAWzC,I,UC7KXA,G,kDAtOX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAyBV2R,UA1BmB,sBA0BP,8BAAAhV,EAAA,yDACH,EAAKqD,MAAMoB,QAAQC,GADhB,0EAGiBzE,IAAMuE,IAAI,WAAY,CACvC3G,QAASlB,IACTwL,OAAQ,CACJF,UAAW,EAAK5E,MAAMoB,QAAQC,MANlC,gBAGEvI,EAHF,EAGEA,KAON,EAAKiI,SAAS,CACVyN,KAAM1V,EAAK0V,KAAKrH,KAAK,SAAAqB,GACjB,IAAI2O,EAIJ,OAHI3O,EAAKvF,UACLkU,EAAOjO,KAAO,IAAIC,KAAKX,EAAKvF,WAEzB,2BACAuF,GADP,IAEI2O,cAlBR,kDAuBJhe,EAAgB,EAAD,IAvBX,0DA1BO,EA4DnBie,gBAAkB,SAACD,GACf/d,QAAQuB,IAAIwc,GAEZ,EAAKE,sBA/DU,EAkEnBA,mBAAqB,WACjB,EAAKtW,SAAS,CACVsR,cAAe,EAAK3R,MAAM2R,gBApEf,EAyEnBiF,eAAiB,WACb,EAAKD,qBACL,EAAK1F,aA3EU,EA8EnB4F,aAAe,WACa,EAAK7W,MAArB0R,YACR,EAAKiF,sBAhFU,EAmFnBG,WAAa,SAAC7X,GAMV,IALA,IAAI8X,EAAO9X,EAAM8X,OACbC,EAAM/X,EAAMgY,YACZC,EAAU,GACRpJ,EAAS,EAAK9N,MAAd8N,KAEGxJ,EAAI,EAAGA,EAAIwJ,EAAKzJ,OAAQC,IAAK,CAClC,IAAI6S,EAAerJ,EAAKxJ,GAAGmS,KACtBU,IAEDJ,IAASI,EAAaJ,QAAUC,IAAQG,EAAaF,aACrDC,EAAQ5T,KAAKwK,EAAKxJ,KAK1B,OAAO4S,GAnGQ,EAsGnBE,eAAiB,SAACnY,GACd,IAAMkT,EAAW,EAAK2E,WAAW7X,GACjC,OACI,oBAEIxC,UAAU,SAFd,SAGK0V,EAAS1L,KAAI,SAAAqB,GAAI,OACd,oBACItJ,QAAS,kBAAM,EAAK6B,SAAS,CAAEqR,YAAa5J,GAAQ,EAAK+O,eAEzDna,MAAO,CACHyD,gBAAkB,WACd,IAAMtB,EAASiJ,EAATjJ,KACN,MAAa,UAATA,EACO,UAEO,YAATA,EACE,UACS,YAATA,EACA,UAEA,UAVG,GAalBlB,aAAc,EACdG,aAAc,EACdf,YAAa,EACbU,MAAO,SApBf,SAwBKqK,EAAK3G,OAtBD2G,EAAKnH,UA7G1B,EAAKX,MAAQ,CACTqX,gBAAgB,EAChB1F,cAAc,EACd7D,KAAM,GACN4D,YAAa,GACb4F,aAAc9O,QAPH,E,qDAenB,WACI1H,KAAKmQ,c,gCAqCT,SAAmBlQ,GACXA,EAAUL,QAAQC,KAAOG,KAAKxB,MAAMoB,QAAQC,IAC5CG,KAAKmQ,c,oBAwFb,WAAU,IAAD,OACL,OACI,cAAC,IAAD,CAAY3V,SAAU,IAAtB,SACK,SAACF,GAAD,OACG,8BACI,sBAAKsB,MAAO,CACRuE,YAAa7F,EAAW,GAAK,IADjC,UAGI,qxBAqBA,cAAC,IAAD,UAMI,cAAC,IAAD,CACIyD,KAAK,UACLL,QAAS,kBAAM,EAAK6B,SAAS,CAAEiX,aAAc9O,UAFjD,qBAOJ,cAAC,KAAD,CACIvJ,MAAO,EAAKe,MAAMsX,aAClBC,SAAU,SAACd,GAAD,OAAU,EAAKpW,SAAS,CAAEiX,aAAcb,KAClDW,eAAgB,EAAKA,iBAEzB,cAAC,KAAD,CACIxL,QAAS,EAAK5L,MAAMqX,eACpBxL,KAAM,kBAAM,EAAKxL,SAAS,CAAEgX,gBAAiB,EAAKrX,MAAMqX,kBACxDvL,SAAU,kBAAM,EAAKzL,SAAS,CAAEgX,gBAAiB,EAAKrX,MAAMqX,kBAC5DlW,MAAM,qBAIV,cAAC,KAAD,CACIE,MAAO,IACPF,MAAM,YACN+R,UAAU,QACVC,UAAU,EACVC,QAAS,kBAAM,EAAK/S,SAAS,CAAEsR,cAAc,KAC7C/F,QAAS,EAAK5L,MAAM2R,aANxB,iBAWA,cAAC,KAAD,CACItQ,MAAOjG,EAAW,OAAS,IAC3B+F,MAAO,EAAKnB,MAAM0R,YAAYvQ,MAC9B+R,UAAU,QACVC,UAAU,EACVC,QAAS,EAAKwD,eACdhL,QAAS,EAAK5L,MAAM2R,aACpBe,gBAAc,EAPlB,SASI,cAACW,GAAD,CAASxL,IAAK,EAAK7H,MAAM0R,4B,GA3NvClQ,IAAMC,WC0QTK,oBAvQf,SAAiBxC,GAEb,IAAMkY,EAAsB,WAExBC,EAAWnY,EAAMoB,SACjByB,EAAS7C,EAAMoB,QAAQS,OACvBuW,EAAepY,EAAMoB,QAAQ8C,aAC7B,IACImU,EAAY,SAAWrY,EAAMoB,QAAQwJ,KAAK,GAAGvJ,IAC/C,MAAO5B,KAIY,uCAAG,8BAAA9C,EAAA,+EAEKC,IAAMuE,IAAI,gBAAiB,CAC5C3G,QAASlB,IACTwL,OAAQ,CACJF,UAAW5E,EAAMoB,QAAQC,MALjB,iBAEVvI,EAFU,EAEVA,MAOGsI,UACLhI,QAAQuB,IAAI7B,EAAKsI,SACjB+W,EAAWrf,EAAKsI,SAChBiX,EAAYhf,EAAU,SAAWP,EAAKsI,QAAQwJ,KAAK,GAAGvJ,IACtDwB,EAAS/J,EAAKsI,QAAQS,OACtBuW,EAAetf,EAAKsI,QAAQ8C,cAdhB,gDAiBhB/K,EAAgB,EAAD,IAjBC,yDAAH,qDAqBrBmf,IAGJ5S,oBAAUwS,EAAqB,CAAClY,EAAMoB,UACtC,MAA0B5F,mBAAS,IAAnC,mBAAOqG,EAAP,KAAcgB,EAAd,KACA,EAAsCrH,mBAAS,IAA/C,mBAAO0I,EAAP,KAAoBkU,EAApB,KACA,EAAgC5c,mBAAS,IAAzC,mBAAO+c,EAAP,KAAiBF,EAAjB,KACA,EAA8B7c,mBAAS,IAAvC,mBAAO4F,EAAP,KAAgB+W,EAAhB,KAKMtU,EAAY,uCAAG,WAAOC,GAAP,qBAAAnH,EAAA,6DACbgH,EAAW,IAAID,UACVuB,OAAO,OAAQnB,GAFP,kBAIQlH,IAAMC,KAAK,eAAgB8G,EAAU,CACtDnJ,QAAQ,2BACAlB,KADD,IAEH,eAAgB,wBAEpBwL,OAAQ,CACJF,UAAWxD,EAAQC,MAVd,gBAIPvI,EAJO,EAIPA,KASNM,QAAQuB,IAAI7B,GACR0f,EAAcnf,EAAU,SAAWP,EAAKyU,cAAc,GAAGlM,GAE7DrB,EAAMyY,gBACNJ,EAAYG,GACZtf,KAAQ6D,QAAQ,oBAlBH,kDAoBb5D,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KArB5B,kCAyBV,GAzBU,0DAAH,sDA4BZ8f,EAAa,uCAAG,WAAOtO,GAAP,qBAAAxN,EAAA,4DAEJ,UAAVwN,EACAxK,EAAQkC,EACS,gBAAVsI,IACPxK,EAAQuE,GALM,kBAQOtH,IAAMwN,IAAI,YAAchJ,EAAQC,GAAhC,eAChB8I,EAAQxK,GACV,CACCnF,QAASlB,MAXC,gBAQRR,EARQ,EAQRA,KAMF4f,EAAa5f,EAAKsI,QACtB+W,EAAWO,GAEXxf,KAAQ6D,QAAR,UAAmBoN,EAAnB,4BAA4CxK,EAA5C,MACAK,EAAMyY,gBAlBQ,kDAoBdtf,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KArB3B,0DAAH,sDAyBfwZ,EAAUwG,cACRC,EAAa,uCAAG,4BAAAjc,EAAA,6DACZiI,EAAY5E,EAAMoB,QAAQC,GADd,kBAGRzE,IAAM+Q,OAAOhU,EAAON,QAAU,YAAcuL,EAAW,CACzDpK,QAASb,EAAOL,qBAJN,OAMdwD,IAAaC,QAAQ,CACjB7D,QAAS,wBAEb8G,EAAM6Y,4BACN1G,EAAQnO,KAAK,cAVC,gDAYd7K,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAb3B,yDAAH,qDAkBnB+M,oBAAUwS,EAAqB,IAE/B,IAAMtI,EAAY,uCAAG,4BAAAjT,EAAA,6DACbiI,EAAY5E,EAAM6E,MAAMC,OAAOF,UADlB,kBAIPsM,GAAKM,QAAQ5B,aAAahL,GAJnB,OAKb5E,EAAMmS,QAAQnO,KAAK,cACnB9K,KAAQ6D,QAAQ,gBANH,gDAQb7D,KAAQN,MAAM,4BAA8BD,EAAgB,EAAD,KAR9C,yDAAH,qDAaZmgB,EAAW,CACb,CACIjX,MAAO,QACPkX,UAAY,eAAC,IAAD,WAEJlX,IAAUT,EAAQS,MACd,cAAC,IAAD,CACI3C,QAAS,kBAAMuZ,EAAc,UAC7BlZ,KAAK,UAFT,oBAIY,KACpB,cAAC,IAAD,CACII,MAAOkC,EACPmX,aAAc,WACNnX,IAAUT,EAAQS,OAAO4W,EAAc,UAE/CjZ,SAAU,SAACC,GACPoD,EAASpD,EAAEC,OAAOC,QAEtBJ,KAAK,aAIjB,CACIsC,MAAO,cACPkX,UACI,eAAC,IAAD,WAEQ7U,IAAgB9C,EAAQ8C,YACpB,cAAC,IAAD,CACIhF,QAAS,kBAAMuZ,EAAc,gBAC7BlZ,KAAK,UAFT,oBAIY,KACpB,cAAC,IAAD,CACII,MAAOuE,EACP8U,aAAc,WACN9U,IAAgB9C,EAAQ8C,aAAauU,EAAc,gBAE3DjZ,SAAU,SAACC,GACP2Y,EAAe3Y,EAAEC,OAAOC,QAE5BsZ,GAAC,EACD1Z,KAAK,aAKrB,CACIsC,MAAO,eACPkX,UACI,8BACI,cAAC,IAAD,CACIje,KAAK,SACLoe,SAAS,eACTC,OAAO,UACPC,gBAAgB,EAEhBvV,aAAcA,EANlB,SAUqB,KAAb0U,EACI,cACA,qBAAKnb,MAAO,CACR2E,MAAO,MACP2U,OAAQ,MACR7Y,gBAAiB,OAAS0a,EAAW,IACrCza,eAAgB,QAChBC,mBAAoB,iBAWhD,CACI8D,MAAO,iBACPkX,UACI,cAAC,KAAD,CACIlX,MAAM,gBACNgN,UAAWe,EAFf,SAII,cAAC,IAAD,CAAQyJ,QAAM,EAAd,sBAIZ,CACIxX,MAAO,kBACPkX,UACI,cAAC,KAAD,CACIlX,MAAM,gBACNgN,UAAW+J,EAFf,SAII,cAAC,IAAD,CAAQS,QAAM,EAAd,wBAOhB,OAAQ,qBAAKjc,MAAO,CAAE2E,MAAO,QAArB,SACJ,cAAC,KAAD,CACI3E,MAAO,CACH2E,MAAO,OACP/F,SAAU,KAEdgM,WAAY8Q,EACZ3M,UAAQ,EAERhE,WAAY,SAACK,GAAD,OAAU,cAAC,KAAKrJ,KAAN,CAElBma,MAAO,CAAC9Q,EAAKuQ,WAFK,SAIjBvQ,EAAK3G,OAHD2G,EAAK3G,e,UC9PpB0X,GACG,MADHA,GAEc,iBAFdA,GAGc,iBAHdA,GAIW,cAJXA,GAKoB,uBAWlBjX,GAAWC,IAAXD,OAkOOE,gBAhOI,SAACxC,GAChB0F,qBAAU,WACF1F,EAAMwZ,OACNjU,EAAWvF,EAAMwZ,KAAK1T,OACtB2T,EAAmBzZ,EAAMwZ,KAAK1T,MAAMqB,KAAI,SAACqB,GAAD,OAAUA,EAAKnH,OACnDrB,EAAMwZ,KAAKrb,OAAOub,EAAS1Z,EAAMwZ,KAAKrb,UAE/C,CAAC6B,EAAMwZ,OAEV,MAA8Bhe,mBAAS,IAAvC,mBAAO8J,EAAP,KAAgBC,EAAhB,KACA,EAA8C/J,mBAAS,IAAvD,mBAAO8P,EAAP,KAAwBmO,EAAxB,KACA,EAA4Bje,mBAAS,IAArC,mBAAO0P,EAAP,KAAeyO,EAAf,KACQC,EAAsC5Z,EAAtC4Z,sBAAuBC,EAAe7Z,EAAf6Z,WAC/B,EAA0Bre,mBAAS,WAAnC,mBAAO2C,EAAP,KAAcub,EAAd,KAIMI,EAAgB,uCAAG,oCAAAnd,EAAA,+EAEIC,IAAMuE,IAAI,eAAgB,CAC3C2D,OAAQ,CACJU,MAAO0F,EACPtG,UAAW5E,EAAM6E,MAAMC,OAAOF,UAC9Be,MAAM,GAEVnL,QAASlB,MARI,OAajB,IAbiB,SAEXR,EAFW,EAEXA,KASF+M,EAAa,GACbC,EAAQhN,EAAK8M,QACRZ,EAAI,EAAGA,EAAIc,EAAMf,OAAQC,IAC9Ba,EAAW7B,KAAK,CACZ+B,IAAKD,EAAMd,GAAG3D,GACdvG,KAAMgL,EAAMd,GAAGlK,KACfY,MAAOoK,EAAMd,GAAGtJ,MAChB2F,GAAIyE,EAAMd,GAAG3D,KAGrBkE,EAAWM,GArBM,kDAuBjBzM,QAAQR,MAAMD,EAAgB,EAAD,KAvBZ,0DAAH,qDA2BhBohB,EAAU,uCAAG,WAAOjhB,GAAP,2BAAA6D,EAAA,6DACXkF,EAAQ/I,EAAK+I,MACbmY,EAAc,GAYdC,GATAC,EAAW,SAACva,GACZ,SAAIA,QAAmB6E,IAAV7E,KAQe7G,EAAKygB,KACjCY,EAAUD,EAASphB,EAAKygB,KACxBa,EAASF,EAASphB,EAAKygB,KACvBc,EAAaH,EAASphB,EAAKygB,KAE3BU,GAAoBE,GACjBC,GAAUC,EACbL,EAAYhW,KAAKuV,KAEbU,GAAkBD,EAAYhW,KAAKuV,IACnCY,GAASH,EAAYhW,KAAKuV,IAC1Ba,GAAQJ,EAAYhW,KAAKuV,IACzBc,GAAYL,EAAYhW,KAAKuV,KA1BtB,mBA8BL3c,IAAMwN,IAAI,QAAS,CACrBkQ,OAAQta,EAAMwZ,KAAKnY,GACnBQ,QACA1D,QACA6b,YAAaA,EAAYzV,KAAK,KAC9BuB,MAAOwF,EAAgB/G,KAAK,MAC7B,CACC/J,QAASlB,MArCF,QAuCXsgB,IACAC,IACA3gB,KAAQ6D,QAAQ,gBAzCL,kDA2CX3D,QAAQR,MAAMD,EAAgB,EAAD,KAC7BO,KAAQN,MAAMD,EAAgB,EAAD,KA5ClB,0DAAH,sDAgDV4hB,EAAkB,SAACpQ,GACrB,MAAc,UAAVA,EAA0BnK,EAAMwZ,KAAK3X,MAGV,QAA3B7B,EAAMwZ,KAAKQ,aAKKha,EAAMwZ,KAAKQ,YAAYjhB,MAAM,KAE9ByhB,SAASrQ,IAKhC,OAHA/Q,QAAQuB,IAAIqF,EAAMwZ,MAId,8BACI,cAAC,KAAD,CAAO3X,MAAM,cACTyK,QAAStM,EAAMsM,QAEfP,OAAQ,KACRqH,gBAAc,EACd5G,SAAUoN,EALd,SAQuB,OAAf5Z,EAAMwZ,KACF,eAAC,IAAD,CACIvT,OAAO,WACPlH,SAAUgb,EAFd,UAKI,cAAC,IAAK5a,KAAN,CACIC,MAAM,QACNtE,KAAK,QACL2f,aAAcF,EAAgB,SAC9Blb,MAAO,CACH,CACIC,UAAU,EACVpG,QAAS,uBAPrB,SAWI,cAAC,IAAD,CACIqG,KAAK,WAEb,cAAC,IAAKJ,KAAN,CACIC,MAAM,UACNtE,KAAK,UACL2f,aAAcnP,EAHlB,SAKI,cAAC,IAAD,CACIxE,YAAU,EACV7K,KAAK,WAELsK,YAAa,YAIbQ,cAAc,EACdC,SAAU,SAACrH,GACPga,EAAUha,GACVma,KAEJta,SAAUia,EAbd,SAkBQnU,EAAQ6B,KAAI,SAAAC,GAAG,OAAI,cAAC,GAAD,oBAAyBA,EAAItM,KAA7B,aAAsCsM,EAAI1L,MAA1C,MAAa0L,EAAI/F,WAIhD,cAAC,IAAKlC,KAAN,CACIC,MAAM,QACNtE,KAAK,QAFT,SAII,cAAC,KAAD,CACIqD,MAAOA,EACPuc,iBAAkB,SAAC/a,GAAD,OAAW+Z,EAAS/Z,EAAMgb,UAGpD,cAAC,IAAKxb,KAAN,CACIC,MAAM,kBACNtE,KAAMye,GACNkB,aAAcF,EAAgBhB,IAC9BqB,cAAc,UAJlB,SAKI,cAAC,KAAD,MAEJ,cAAC,IAAKzb,KAAN,CACIC,MAAM,2BAA2BtE,KAAMye,GACvCqB,cAAc,UACdH,aAAcF,EAAgBhB,IAHlC,SAKI,cAAC,KAAD,MAEJ,cAAC,IAAKpa,KAAN,CACIC,MAAM,qBAAqBtE,KAAMye,GACjCqB,cAAc,UACdH,aAAcF,EAAgBhB,IAHlC,SAKI,cAAC,KAAD,MAEJ,cAAC,IAAKpa,KAAN,CACIC,MAAM,qBACNwb,cAAc,UACd9f,KAAMye,GACNkB,aAAcF,EAAgBhB,IAJlC,SAMI,cAAC,KAAD,MAEJ,eAAC,IAAD,CAAOnc,MAAO,CACV2E,MAAO,OACP8E,UAAW,GACXtJ,QAAS,cACTgB,eAAgB,YAJpB,UAMI,cAAC,IAAD,CAAQW,QAAS0a,EAAjB,oBAGA,cAAC,IAAD,CACI9Z,SAAS,SACTP,KAAK,UAFT,0BAME,YCpO5Bga,GACG,MADHA,GAEc,iBAFdA,GAGc,iBAHdA,GAIW,cAJXA,GAKoB,uBAGlBjX,GAAWC,IAAXD,OAEauY,G,4MACjBna,MAAQ,CACJoa,MAAO,GACPC,aAAc,KACdC,gBAAgB,EAChB1V,QAAS,GACTgG,gBAAiB,GACjBJ,OAAQ,GACRc,QAAS,UACTiP,wBAAwB,EACxB9c,MAAO,W,EAeX+c,kB,sBAAoB,sCAAAve,EAAA,6DACRuO,EAAW,EAAKxK,MAAhBwK,OADQ,kBAGStO,IAAMuE,IAAI,eAAgB,CAC3C2D,OAAQ,CACJU,MAAO0F,EACPtG,UAAW,EAAK5E,MAAM6E,MAAMC,OAAOF,UACnCe,MAAM,GAEVnL,QAASlB,MATD,OAcZ,IAdY,SAGNR,EAHM,EAGNA,KASF+M,EAAa,GACbC,EAAQhN,EAAK8M,QACRZ,EAAI,EAAGA,EAAIc,EAAMf,OAAQC,IAC9Ba,EAAW7B,KAAK,CACZ+B,IAAKD,EAAMd,GAAG3D,GACdvG,KAAMgL,EAAMd,GAAGlK,KACfY,MAAOoK,EAAMd,GAAGtJ,MAChB2F,GAAIyE,EAAMd,GAAG3D,KAGrB,EAAKN,SAAS,CACVuE,QAASO,IAvBD,yDA0BZ1M,EAAgB,EAAD,IA1BH,6E,EAgCpBgiB,kBAAoB,SAAClU,GACjB,EAAKlG,SAAS,CACVuK,gBAAiBrE,K,EAIzBmU,W,uCAAa,WAAOtiB,GAAP,2BAAA6D,EAAA,6DACTvD,QAAQuB,IAAI7B,GAER+I,EAAQ/I,EAAK+I,MACbmY,EAAc,GAYdC,GATAC,EAAW,SAACva,GACZ,SAAIA,QAAmB6E,IAAV7E,KAQe7G,EAAKygB,KACjCY,EAAUD,EAASphB,EAAKygB,KACxBa,EAASF,EAASphB,EAAKygB,KACvBc,EAAaH,EAASphB,EAAKygB,KAE3BU,GAAoBE,GACjBC,GAAUC,EACbL,EAAYhW,KAAKuV,KAEbU,GAAkBD,EAAYhW,KAAKuV,IACnCY,GAASH,EAAYhW,KAAKuV,IAC1Ba,GAAQJ,EAAYhW,KAAKuV,IACzBc,GAAYL,EAAYhW,KAAKuV,KA5B5B,mBAgCC3c,IAAMC,KAAK,QAAS,CACtB+H,UAAW,EAAK5E,MAAMoB,QAAQC,GAC9BQ,QACAmY,YAAaA,EAAYzV,KAAK,KAC9BpG,MAAO,EAAKuC,MAAMvC,MAClB2H,MAAO,EAAKpF,MAAM4K,gBAAgB/G,KAAK,MACxC,CACC/J,QAASlB,MAvCR,QAyCL,EAAKyH,SAAS,CAEVia,gBAAgB,IAEpB9hB,KAAQ6D,QAAQ,gBAChB,EAAK8c,aA9CA,kDAgDL1gB,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAjDpC,0D,wDAsDbkhB,W,sBAAa,8BAAAld,EAAA,+EAE2BC,IAAMuE,IAAI,aAAe,EAAKnB,MAAMoB,QAAQC,GAAI,CAC5E7G,QAASlB,MAHR,gBAESwhB,EAFT,EAEChiB,KAAQgiB,MAGd1hB,QAAQuB,IAAI,oBACZvB,QAAQuB,IAAImgB,GACZ,EAAK/Z,SAAS,CACV+Z,UARC,kDAWL3hB,EAAgB,EAAD,IAXV,0D,EAebygB,sBAAwB,WACpB,EAAK7Y,SAAS,CACVka,wBAAyB,EAAKva,MAAMua,0B,EAG5CI,qBAAuB,SAACld,GACpB,EAAK4C,SAAS,CAAE5C,MAAOA,EAAMwc,O,EAGjCW,W,uCAAa,WAAOhB,GAAP,SAAA3d,EAAA,+EAECC,IAAM+Q,OAAO,SAAW2M,EAAQ,CAClC9f,QAASlB,MAHR,OAKL,EAAKugB,aACL3gB,KAAQ6D,QAAQ,oBANX,gDAQL5D,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KATpC,yD,6GA/Hb,WACI6I,KAAKqY,e,gCAGT,SAAmBpY,GACXA,EAAUL,QAAQC,KAAOG,KAAKxB,MAAMoB,QAAQC,IAC5CG,KAAKqY,e,oBAsIb,WAAU,IAAD,OACG/d,EAAa0F,KAAKxB,MAAlBlE,SAER,OAAQ,qCACJ,sBAAKsB,MAAO,CACRpB,SAAUF,EAAW,QAAU,KADnC,UAGI,sBAAKsB,MAAO,CACRG,QAAS,cACTgB,eAAgB,gBAChBN,WAAY,SACZT,cAAe,MACfuE,MAAO,OACP1D,aAAc,IANlB,UAQI,oBAAIjB,MAAO,CAAEC,OAAQ,GAArB,uBAGA,cAAC,IAAD,CACI6B,QAAS,kBAAM,EAAK6B,SAAS,CAAEia,gBAAgB,KAC/Czb,KAAK,UAFT,2BAOJ,cAAC,KAAD,CAEI4M,UAAQ,EACRnE,WAAYxG,KAAKd,MAAMoa,MACvB3S,WAAY,SAAAK,GAAI,OACZ,cAAC,KAAKrJ,KAAN,CAEIma,MACI,eAAC,IAAD,WACI,cAAC,IAAD,CAEIpa,QAAS,SAACO,GACN,EAAKsB,SAAS,CACVga,aAAcvS,EACdyS,wBAAwB,IAE5Bxb,EAAEsP,kBAPV,kBAWA,cAAC,KAAD,CACIlN,MAAM,gBACNgN,UAAW,kBAAM,EAAKyM,WAAW9S,EAAKnH,KAF1C,SAKI,cAAC,IAAD,CACIgY,QAAM,EADV,yBApBhB,SA8BI,eAAC,KAAD,CAAKlb,MAAOqK,EAAKrK,MAAjB,UAAyBqK,EAAK3G,MAA9B,QA7BK2G,EAAKnH,UAuC1B,cAAC,KAAD,CAAOQ,MAAM,cACTyK,QAAS9K,KAAKd,MAAMsa,eACpBzO,KAAM/K,KAAK4Z,WACXrP,OAAQ,KACRqH,gBAAc,EACd5G,SAAU,kBAAM,EAAKzL,SAAS,CAAEia,gBAAgB,KALpD,SAOI,eAAC,IAAD,CACI/U,OAAO,WACPlH,SAAUyC,KAAK4Z,WAFnB,UAKI,cAAC,IAAKjc,KAAN,CACIC,MAAM,QACNtE,KAAK,QAELuE,MAAO,CACH,CACIC,UAAU,EACVpG,QAAS,uBAPrB,SAWI,cAAC,IAAD,CAEIqG,KAAK,WAEb,cAAC,IAAKJ,KAAN,CACIC,MAAM,UACNtE,KAAK,UAFT,SAII,cAAC,IAAD,CACIgM,YAAU,EACV7K,KAAK,WACLsK,YAAa,YACbQ,cAAc,EACdC,SAAU,SAACrH,GAAD,OAAW,EAAKoB,SAAS,CAAEmK,OAAQvL,GAAS,EAAKub,oBAC3D1b,SAAUgC,KAAK2Z,kBANnB,SAUQ3Z,KAAKd,MAAM4E,QAAQ6B,KAAI,SAAAC,GAAG,OAAI,cAAC,GAAD,oBAAyBA,EAAItM,KAA7B,aAAsCsM,EAAI1L,MAA1C,MAAa0L,EAAI/F,WAK3D,cAAC,IAAKlC,KAAN,CACIC,MAAM,QACNtE,KAAK,QAFT,SAII,cAAC,KAAD,CACIqD,MAAOqD,KAAKd,MAAMvC,MAClBuc,iBAAkBlZ,KAAK6Z,yBAG/B,cAAC,IAAKlc,KAAN,CACIC,MAAM,kBACNtE,KAAMye,GAENqB,cAAc,UAJlB,SAKI,cAAC,KAAD,CAEIlQ,gBAAgB,MAExB,cAAC,IAAKvL,KAAN,CACIC,MAAM,2BAA2BtE,KAAMye,GACvCqB,cAAc,UAFlB,SAII,cAAC,KAAD,CAAQlQ,gBAAc,MAE1B,cAAC,IAAKvL,KAAN,CACIC,MAAM,qBAAqBtE,KAAMye,GACjCqB,cAAc,UAFlB,SAII,cAAC,KAAD,CAAQlQ,gBAAc,MAE1B,cAAC,IAAKvL,KAAN,CACIC,MAAM,qBACNwb,cAAc,UACd9f,KAAMye,GAHV,SAII,cAAC,KAAD,CAAQ7O,gBAAc,MAE1B,eAAC,IAAD,CAAOtN,MAAO,CACV2E,MAAO,OACP8E,UAAW,GACXtJ,QAAS,cACTgB,eAAgB,YAJpB,UAMI,cAAC,IAAD,CAAQW,QAAS,WACb,EAAK6B,SAAS,CACVia,gBAAgB,KAFxB,oBAOA,cAAC,IAAD,CACIlb,SAAS,SACTP,KAAK,UAFT,4BASZ,cAAC,GAAD,CACI+M,QAAS9K,KAAKd,MAAMua,uBACpBrB,sBAAuBpY,KAAKoY,sBAC5BJ,KAAMhY,KAAKd,MAAMqa,aACjBlB,WAAYrY,KAAKqY,oB,GA5UE0B,IAAMpZ,WCzBpBqZ,G,4MACjB9a,MAAQ,CACJ+a,qBAAqB,G,EAEzBpT,MAAQ9O,OAAOC,aAAaC,QAAQ,S,EAWpCiiB,kB,sBAAoB,8BAAA/e,EAAA,+EAEWC,IAAMuE,IAAI,yBAA2B,EAAKnB,MAAMoB,QAAQC,GAAI,CAC/E7G,QAASlB,MAHD,gBAEJR,EAFI,EAEJA,KAGR,EAAKiI,SAAS,CACV0a,oBAAqB3iB,EAAK6iB,oBAAoBC,uBANtC,gDAUZziB,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAX7B,yD,EAepBkjB,kB,uCAAoB,WAAOpR,GAAP,SAAA9N,EAAA,+EAENC,IAAMwN,IAAI,yBAA2B,EAAKpK,MAAMoB,QAAQC,GAAI,CAC9Dua,qBAAsBnR,GACvB,CACCjQ,QAASlB,MALD,OAOZJ,KAAQ6D,QAAQ,oBAChB,EAAKgE,SAAS,CAAE0a,oBAAqBhR,IARzB,gDAUZtR,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAX7B,yD,6GAxBpB,WACI6I,KAAKka,sB,gCAET,SAAmBja,GACXA,EAAUL,QAAQC,KAAOG,KAAKxB,MAAMoB,QAAQC,IAC5CG,KAAKka,sB,oBAmCb,WAAU,IAAD,OACG5f,EAAa0F,KAAKxB,MAAlBlE,SACR,OAAO,qBAAKsB,MAAO,CACf2E,MAAOjG,EAAW,QAAU,KADzB,SAGH,cAAC,KAAD,CAGIqQ,UAAQ,EACRnE,WAAY,CAAC,GACbG,WAAY,SAAAK,GAAI,OACZ,cAAC,KAAKrJ,KAAN,CAEIma,MACI,cAAC,KAAD,CACI9Z,SAAU,EAAKqc,kBACfpR,QAAS,EAAK/J,MAAM+a,sBALhC,mDACSjT,Y,GA1Dc+S,IAAMpZ,WCH5B2Z,G,4JAEjB,WACI,MAAO,c,GAHsBP,IAAMpZ,WCMrCrJ,GAAO,CACT,UACA,QACA,iBAkHWiH,G,kDA7GX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IACDU,MAAQ,CACTrE,UAAU,EACV0f,gBAAiB,WAJN,E,qDAUnB,c,oBAIA,WAAU,IAAD,OACL,OACI,cAAC,IAAD,CAAY/f,SAAU,IAAtB,SACK,SAACF,GAAD,OAGG,sBAAKsB,MAAO,CACRG,QAAS,OACTC,cAAe1B,EAAW,SAAW,MACrC+K,UAAW,GACXlF,YAAa7F,EAAW,GAAK,GAC7B8F,IAAK,IALT,UAQI,mMASA,8BACI,cAAC,KAAD,CAGIuK,UAAQ,EACRnE,WAAYlP,GACZsE,MAAO,CACH2E,MAAOjG,EAAW,QAAU,KAIhCqM,WAAY,SAAAK,GACR,IAAI6F,EAAM7F,EAAKhB,cAAczO,MAAM,KAAKwL,KAAK,KAC7C,OACI,eAAC,KAAKpF,KAAN,CAEIhC,UAAU,wBACV+B,QAAS,WACL,EAAK6B,SAAS,CACVgb,gBAAiB1N,KAGzBjR,MAAO,CACHe,MAAQ,EAAKuC,MAAMqb,kBAAoB1N,EAAM,UAAY,SATjE,UAYI,cAAC,KAAD,CAAQjR,MAAO,CACXuE,YAAa,IADjB,SAEI6G,EAAK6D,UAAU,EAAG,GAAG2P,sBAd7B,IAc4DxT,IAbnD6F,QAuBzB,qBAAKjR,MAAO,CACRc,KAAM,GADV,SAKS,WACG,OAAQ,EAAKwC,MAAMqb,iBACf,KAAKjjB,GAAK,GAAG0O,cAAczO,MAAM,KAAKwL,KAAK,KACvC,OAAO,cAAC,GAAD,CACHnD,QAAS,EAAKpB,MAAMoB,QACpBqX,cAAe,EAAKzY,MAAMyY,cAC1BI,0BAA2B,EAAK7Y,MAAM6Y,4BAE9C,KAAK/f,GAAK,GAAG0O,cAAczO,MAAM,KAAKwL,KAAK,KACvC,OAAO,cAAC,GAAD,CAAOzI,SAAUA,EAAUsF,QAAS,EAAKpB,MAAMoB,UAC1D,KAAKtI,GAAK,GAAG0O,cAAczO,MAAM,KAAKwL,KAAK,KACvC,OAAO,cAAC,GAAD,CAAezI,SAAUA,EAAUsF,QAAS,EAAKpB,MAAMoB,UAClE,KAAKtI,GAAK,GAAG0O,cAAczO,MAAM,KAAKwL,KAAK,KACvC,OAAO,cAAC,GAAD,CAASnD,QAAS,EAAKpB,MAAMoB,UACxC,QACI,MAAO,mBAflB,e,GAjFfc,IAAMC,W,UCJhB0J,GAAW4F,IAAX5F,OACAvJ,GAAWC,IAAXD,O,IAQFvC,G,kDACF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAgBVqI,MAAQ9O,OAAOC,aAAaC,QAAQ,SAjBjB,EA4BnBwiB,aA5BmB,sBA4BJ,sCAAAtf,EAAA,+DACsB,EAAK+D,MAAhCyK,EADK,EACLA,KAAMC,EADD,EACCA,SAAUF,EADX,EACWA,OADX,kBAIgBtO,IAAMuE,IAAI,kBAAoB,EAAKnB,MAAMoB,QAAQC,GAAI,CACxE7G,QAASlB,IACTwL,OAAQ,CACJsL,MAAOjF,EAAO,GAAKC,EACnB+E,MAAO/E,EACPF,YATD,gBAICpS,EAJD,EAICA,KASR,EAAKiI,SAAS,CACVuE,QAASxM,EAAKwM,QACd+F,MAAOvS,EAAKuS,QAfT,gDAkBPlS,EAAgB,EAAD,IAlBR,yDA5BI,EAmDnB+iB,aAAe,SAAChR,GACZ,EAAKnK,SAAS,CACVmK,OAAQA,EACRC,KAAM,GACP,EAAK8Q,eAvDO,EA0DnBE,mBAAqB,SAAChR,EAAMC,GACxB,EAAKrK,SAAS,CACVoK,OAAMC,YACP,EAAK6Q,eA7DO,EAiEnBG,gBAAkB,kBAAM,EAAKrb,SAAS,CAAEqb,iBAAkB,EAAK1b,MAAM0b,mBAjElD,EAkEnBC,mBAAqB,SAACpV,GAAD,OAAS,EAAKlG,SAAS,CAAEub,qBAAsBrV,KAlEjD,EAqEnBsV,WArEmB,sBAqEN,4BAAA5f,EAAA,6DACD2f,EAAyB,EAAK5b,MAA9B4b,qBADC,kBAIC1f,IAAMC,KAAK,kBAAmB,CAChC2f,WAAYF,EACZ1X,UAAW,EAAK5E,MAAMoB,QAAQC,IAC/B,CACC7G,QAASlB,MARR,OAULJ,KAAQ6D,QAAQ,kBAChB,EAAKqf,kBACL,EAAKH,eAZA,gDAcL9iB,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAfpC,yDArEM,EA0FnB8jB,cA1FmB,sBA0FH,gCAAA9f,EAAA,6DACJ6I,EAAU,EAAK9E,MAAf8E,MADI,kBAGY5I,IAAMuE,IAAI,eAAgB,CAC1C2D,OAAQ,CACJU,MAAOA,EACPZ,UAAW,EAAK5E,MAAM6E,MAAMC,OAAOF,UACnCe,MAAM,GAEVnL,QAASlB,MATL,OAGJsM,EAHI,OAWJN,EAAUM,EAAQ9M,KAAK8M,QAAQuB,KAAI,SAACqB,GAAD,MAAW,CAC9CzC,IAAKyC,EAAK9M,MACVZ,KAAM0N,EAAK1N,KACXY,MAAO8M,EAAK9M,MACZ2F,GAAImH,EAAKnH,GACTqb,YAAY,MAhHb,wJACD9L,KAAKC,OAkHWrL,GAlHGgC,iBAmHjBlC,EAAO,CAAI,CACPoX,YAAY,EACZhhB,MAAO8J,EACPO,IAAKP,IAHF,oBAIDF,KAGV,EAAKvE,SAAS,CACV4b,aAAcrX,IA5BV,kDA+BRnM,EAAgB,EAAD,IA/BP,0DA1FG,EA6HnByjB,aA7HmB,uCA6HJ,WAAOC,GAAP,SAAAlgB,EAAA,+EAGDC,IAAM+Q,OAAO,kBAAmB,CAClCnT,QAASlB,IACTR,KAAM,CACF8L,UAAW,EAAK5E,MAAMoB,QAAQC,GAC9Bwb,YAPD,cAUP,EAAKZ,eACL,EAAKlb,SAAS,CACV+b,gBAAgB,EAChBC,qBAAqB,IAblB,kBAkBctM,KAlBd,cAmBMpP,KAAOwb,IACZ,EAAK7c,MAAMyY,gBACX,EAAKzY,MAAMmS,QAAQnO,KAAK,eArBzB,kDAyBH7K,EAAgB,EAAD,IAzBZ,0DA6BPA,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KA9BlC,iEA7HI,sDAEf,EAAK+H,MAAQ,CACT0b,iBAAiB,EACjBjR,KAAM,EACNC,SAAU,GACVC,MAAO,EACPH,OAAQ,GACR5F,QAAS,GACTqX,aAAc,GACdnX,MAAO,GACP8W,qBAAsB,GACtBQ,gBAAgB,EAChBC,qBAAqB,GAbV,E,qDAkBnB,WACIvb,KAAKya,iB,gCAGT,SAAmBxa,GACXA,EAAUL,QAAQC,KAAOG,KAAKxB,MAAMoB,QAAQC,IAC5CG,KAAKya,iB,oBAuIb,WAAU,IAAD,OACGngB,EAAa0F,KAAKxB,MAAlBlE,SAER,OACI,sBACIsB,MAAO,CAEHuE,YAAa7F,EAAW,GAAK,IAHrC,UAMI,sBAAKsB,MAAO,CACRiB,aAAc,GACduD,IAAK,EACLrE,QAAS,OACTuV,SAAU,QAJd,UAMI,cAAC,GAAD,CACI1V,MAAO,CAAE2E,MAAO,KAChBwE,YAAY,SACZ5G,MAAO6B,KAAKd,MAAMwK,OAClB1L,SAAU,SAACC,GAAD,OAAO,EAAKyc,aAAazc,EAAEC,OAAOC,QAC5CqH,SAAUxF,KAAK0a,eACnB,cAAC,IAAD,CACIhd,QAASsC,KAAK4a,gBACd7c,KAAK,UAFT,+BAOJ,cAAC,KAAD,CAEIyP,WAAY,CACRhD,QAASxK,KAAKd,MAAMyK,KACpBE,MAAO7J,KAAKd,MAAM2K,MAClBD,SAAU5J,KAAKd,MAAM0K,SACrB5L,SAAUgC,KAAK2a,oBAEnBhQ,UAAQ,EACRnE,WAAYxG,KAAKd,MAAM4E,QACvBlI,MAAO,CACHpB,SAAU,KAEdmM,WAAY,SAAAK,GAAI,OACZ,eAAC,KAAKrJ,KAAN,CAEIyP,QAAS,EACHpG,EAAKwU,SAAW,cAAC,KAAD,CACdnb,MAAM,gBAENob,cAAe,CAAE9gB,QAAS,EAAKuE,MAAMqc,qBACrClO,UAAW,kBAAM,EAAK+N,aAAapU,EAAKnH,KAJ1B,SAMd,cAAC,IAAD,2BAIQvF,EAAW,CACX8O,KAAM,cAACsS,GAAA,EAAD,KACN,IANR,IAQI7D,QAAM,EARV,SAQYvd,EAAW,GAAK,eAjBxC,UAsBI,cAAC,KAAD,CAAQsB,MAAO,CAAEuE,YAAa,IAA9B,SAAqC6G,EAAK1N,KAAKuR,UAAU,EAAG,KAtBhE,UAuBQ7D,EAAK1N,KAAK/B,MAAM,KAAK,GAvB7B,YAuBoCyP,EAAK1N,KAAK/B,MAAM,KAAK,GAAKyP,EAAK1N,KAAK/B,MAAM,KAAK,GAAGsT,UAAU,EAAG,GAAG1B,cAAgB,IAAM,GAvB5H,aAuBoInC,EAAK9M,MAvBzI,KAyBQ8M,EAAKwU,SAAW,cAAC,KAAD,CAAK7e,MAAM,MAAMf,MAAO,CAAE0R,WAAY,IAAtC,qBAxBftG,EAAKnH,OA8BtB,cAAC,KAAD,CAAOQ,MAAM,sBACTyK,QAAS9K,KAAKd,MAAM0b,gBACpBhJ,gBAAc,EACd7G,KAAM/K,KAAK+a,WACX/P,SAAUhL,KAAK4a,gBAJnB,SAKI,cAAC,IAAD,CACIngB,KAAK,WACLkhB,YAAU,EACV/f,MAAO,CAAE2E,MAAO,QAChBwE,YAAY,kBACZS,SAAU,SAACvH,GACP,EAAKsB,SAAS,CACVyE,MAAO/F,GACR,EAAKgd,gBAEZjd,SAAUgC,KAAK6a,mBAVnB,SAaQ7a,KAAKd,MAAMic,aAAaxV,KAAI,SAAAC,GACxB,OAAIA,EAAIsV,WACG,cAAC,GAAD,oBAA0BtV,EAAItM,KAA9B,aAAuCsM,EAAI1L,MAA3C,MAAa0L,EAAIrB,KAEjB,cAAC,GAAD,8CAAoDqB,EAAI1L,MAAxD,MAAa0L,EAAIrB,mB,GAhQ1C7D,IAAMC,WA8QTK,eAAWzC,I,kDCzQpBA,G,kDACF,WAAYC,GAAQ,IAAD,uBACf,cAAMA,IAyBVod,aAAe,SAACC,GAAY,IAAD,EAKvB,iBAJgB,CACZ,SAAY,kBAAM,EAAKtc,SAAS,CAAEuc,UAAW,UAC7C,kBAAqB,kBAAM,EAAKvc,SAAS,CAAEuc,UAAW,oBAEzCD,UAAjB,QAA6B,kBAAM,OA/BpB,EAqDnB5E,cArDmB,uCAqDH,WAAOpX,GAAP,iBAAA1E,EAAA,6DACEpD,OAAOC,aAAaC,QAAQ,SAC1C4H,EAAKA,GAAM,EAAKX,MAAMU,QAAQC,GAFlB,kBAIazE,IAAMuE,IAAI,gBAAiB,CAC5C3G,QAASlB,IACTwL,OAAQ,CACJF,UAAWvD,KAPX,iBAIFvI,EAJE,EAIFA,MAOGsI,SACL,EAAKL,SAAS,CACVc,MAAO/I,EAAKsI,QAAQS,MACpBT,QAAStI,EAAKsI,QACdmc,SAAUlkB,EAAU,UAAYP,EAAKsI,QAAQwJ,MAAQ9R,EAAKsI,QAAQwJ,KAAK,GAAK9R,EAAKsI,QAAQwJ,KAAK,GAAGvJ,GAAK,MAftG,kDAqBRlI,EAAgB,EAAD,IArBP,0DArDG,wDA+EnBqkB,YAAc,SAAA/d,GAAC,OAAI,EAAKsB,SAAS,CAAEuc,UAAW7d,EAAEsG,OA/E7B,EAiFnB0X,aAAe,SAAC3hB,GACZ,OAAIA,EACO,GAEC,EAAK4E,MAAMU,QAAQ8C,YAAc,IAAM,IAnFnD,IAAI7C,EAAK,EAAKrB,MAAM6R,SAASC,SAAS/Y,MAAM,KAF7B,OAGfsI,EAAKA,EAAGA,EAAG0D,OAAS,GACpB,EAAKrE,MAAQ,CACT4c,UAAW,WACXzb,MAAO,GACP0b,SAAU,GACVnc,QAAS,CAAEC,OARA,E,qDAanB,WACI,IAAIA,EAAKG,KAAKxB,MAAM6R,SAASC,SAAS/Y,MAAM,KAC5CsI,EAAKA,EAAGA,EAAG0D,OAAS,GAEpBvD,KAAKiX,cAAcpX,GAEnB,IAAQwQ,EAAarQ,KAAKxB,MAAlB6R,SACJrM,EAAQ,IAAIgN,gBAAgBX,EAAS3G,QACrC1F,EAAMmQ,IAAI,WACVnU,KAAK4b,aAAa5X,EAAMrE,IAAI,UAA5BK,K,gCAaR,SAAmBC,GAKf,GAHID,KAAKxB,MAAM6R,WAAapQ,EAAUoQ,SAGjB,CACjB,IAAIxQ,EAAKG,KAAKxB,MAAM6R,SAASC,SAAS/Y,MAAM,KAC5CsI,EAAKA,EAAGA,EAAG0D,OAAS,GACpBvD,KAAKiX,cAAcpX,GAEnB,IAAQwQ,EAAarQ,KAAKxB,MAAlB6R,SACJrM,EAAQ,IAAIgN,gBAAgBX,EAAS3G,QACrC1F,EAAMmQ,IAAI,WACVnU,KAAK4b,aAAa5X,EAAMrE,IAAI,UAA5BK,M,oBAwCZ,WAAU,IAAD,OACCwK,EAAUxK,KAAKd,MAAM4c,UAC3B,OACI,cAAC,IAAD,CAAYthB,SAAU,IAAtB,SACK,SAACF,GAAD,aACG,eAAC,IAAM4F,SAAP,WACI,8LASA,eAAC,IAAD,CAAOO,MAAM,SAAb,UAGI,qBACI9E,UAAU,6BACVC,MAAO,CACH2E,MAAO,EAAK0b,aAAa3hB,GACzB4a,OAAQ,EAAK+G,aAAa3hB,GAC1B0C,aAAc,EACd+X,YAAa,iBACbC,YAAa,QACbC,YAAa,EACbiH,iBAAkB,YAClB7f,gBAAiB,OAAS,EAAK6C,MAAM6c,SAAW,IAChDxf,mBAAoB,SACpBD,eAAgB,QAChB+C,gBAAiB,mBACjBc,YAAa,MAErB,gCAEI,oBAAIvE,MAAO,CACPgB,SAAUtC,EAAW,GAAK,GAC1BuB,OAAQ,GAFZ,SAIK,EAAKqD,MAAMmB,QAEhB,mBAAGzE,MAAO,CAAEC,OAAQ,EAAGiB,QAAS,GAAIwQ,WAAY,GAAhD,mBAAsD,EAAKpO,MAAMU,QAAQ8C,mBAAzE,QAAwF,WAIhG,qBAAK9G,MAAO,CACRG,QAAS,OACToE,YAAa7F,EAAW,GAAK,GAC7B0B,cAAe,UAHnB,SAQI,eAAC,KAAD,CACImgB,oBAAoB,OACpBvgB,MAAO,CACHiB,aAAc,GACdwI,UAAW,GACX+W,SAAU,WAEV7b,MAAO,OAIX7C,QAAS,EAAKse,YAAaK,aAAc,CAAC7R,GAAU/P,KAAK,aAX7D,UAYI,cAAC,KAAKkD,KAAN,CAA0ByL,KAAM,cAACkT,GAAA,EAAD,IAAhC,qBAAe,YAGf,cAAC,KAAK3e,KAAN,CAAsByL,KAAM,cAACmT,GAAA,EAAD,IAA5B,iBAAe,QAGf,cAAC,KAAK5e,KAAN,CAA+ByL,KAAM,cAACoT,GAAA,EAAD,IAArC,0BAAe,iBAGf,cAAC,KAAK7e,KAAN,CAA0ByL,KAAM,cAACoI,GAAA,EAAD,IAAhC,qBAAe,YAGf,cAAC,KAAK7T,KAAN,CAA0ByL,KAAM,cAACqT,GAAA,EAAD,IAAhC,qBAAe,YAGf,cAAC,KAAK9e,KAAN,CAA+ByL,KAAM,cAACsT,GAAA,EAAD,IAArC,0BAAe,sBAQlB,WACG,OAAQ,EAAKxd,MAAM4c,WACf,IAAK,WACD,OAAO,cAACa,EAAD,CAAU/c,QAAS,EAAKV,MAAMU,UACzC,IAAK,OACD,OAAO,cAACgd,GAAD,CAAMhd,QAAS,EAAKV,MAAMU,UACrC,IAAK,gBACD,OAAO,cAACid,GAAD,CAAejd,QAAS,EAAKV,MAAMU,UAC9C,IAAK,WACD,OAAO,cAACkd,GAAD,CAAUld,QAAS,EAAKV,MAAMU,UACzC,IAAK,WACD,OAAO,cAAC,GAAD,CAAUA,QAAS,EAAKV,MAAMU,QAASqX,cAAe,WACzD,EAAKA,gBACL,EAAKzY,MAAMue,kBAGX1F,0BAA2B,EAAK7Y,MAAMue,iBAE9C,IAAK,gBACD,OAAO,cAACC,GAAD,CACH1iB,SAAUA,EACV2c,cAAe,EAAKzY,MAAMue,eAC1Bnd,QAAS,EAAKV,MAAMU,UAC5B,QACI,MAAO,MAxBlB,a,GAlLXc,IAAMC,WA0NTK,eAAWzC,IC/OlBuC,GAAWC,IAAXD,OACJqB,GAAW,IAAID,SAGZ,SAAS+a,GAAcze,GAG1B,MAA0BxE,mBAAS,IAAnC,mBAAOmE,EAAP,KAAcqD,EAAd,KAEA,EAAezG,IAAKC,UAAbC,EAAP,oBACA,EAAgCjB,mBAAS,IAAzC,mBAAO+c,EAAP,KAAiBF,EAAjB,KAKMxU,EAAY,uCAAG,WAAOC,GAAP,eAAAnH,EAAA,6DAEbgH,GAASxC,IAAI,SACbwC,GAASgK,OAAO,QAEpBhK,GAASsB,OAAO,OAAQnB,IAEpB4a,EAAa,IAAIC,YACV9jB,iBAAiB,QAAQ,WAChCwd,EAAYqG,EAAWE,WACxB,GAEHF,EAAWG,cAAc/a,GAZR,mBAcV,GAdU,2CAAH,sDAiBZpH,EAAY,uCAAG,WAAO+C,GAAP,eAAA9C,EAAA,6DAEjBvD,QAAQuB,IAAIgF,GAFK,kBAKD/C,IAAMC,KAAK,kBAAmB,CACtCgF,MAAOpC,EAAEoC,MACTqC,YAAazE,EAAEyE,YACfoB,QAAS3F,EAAM4E,QAEf,CACI/J,QAASlB,MAXJ,UAKbmB,EALa,QAaTkJ,GAASxC,IAAI,QAbJ,gCAcHvE,IAAMC,KAAK,eAAgB8G,GAAU,CACvCnJ,QAAQ,2BACAlB,KADD,IAEH,eAAgB,wBAEpBwL,OAAQ,CACJF,UAAWnK,EAAI3B,KAAKuI,MApBnB,yDA2BbjI,QAAQR,MAAMD,EAAgB,EAAD,KAC7BmE,IAAalE,MAAM,CACfM,QAASP,EAAgB,EAAD,MA7Bf,QAgCb8B,IACArB,QAAQuB,IAAIF,EAAI3B,MAEhBgE,IAAaC,QAAQ,CACjB7D,QAAS,wBAEbuD,EAAKqiB,cACL9e,EAAMue,iBACNlG,EAAY,IACZrY,EAAM+e,aAzCO,0DAAH,sDAgDlB,EAA8BvjB,mBAAS,IAAvC,mBAAO8J,EAAP,KAAgBC,EAAhB,KACA,EAA0B/J,qBAA1B,mBAAOgK,EAAP,KAAcC,EAAd,KAEAC,qBAAU,YACY,uCAAG,kCAAA/I,EAAA,+EAKGC,IAAMuE,IAAI,eAAgB,CACtC2D,OAAQ,CACJU,MAAOA,GAEXhL,QAASlB,MATA,OAKbsM,EALa,8DAYbxM,QAAQR,MAAMD,EAAgB,EAAD,KAZhB,2BAoBjB,IAFIkN,EAAa,GACbC,EAAQF,EAAQ9M,KAAK8M,QAChBZ,EAAI,EAAGA,EAAIc,EAAMf,OAAQC,IAC9Ba,EAAW7B,KAAK,CACZ+B,IAAKD,EAAMd,GAAG3D,GACdvG,KAAMgL,EAAMd,GAAGlK,KACfY,MAAOoK,EAAMd,GAAGtJ,MAChB2F,GAAIyE,EAAMd,GAAG3D,KAIrBkE,EAAWM,GA7BM,yDAAH,qDAmClBG,KACD,CAACR,IAQJ,OACI,8BAEI,cAAC,IAAD,CAAOxD,UAAU,WAAW5E,MAAO,CAAE2E,MAAO,QAA5C,SACI,eAAC,IAAD,CACIkE,OAAO,WACPlH,SAAUrC,EACVD,KAAMA,EAHV,UAKI,cAAC,IAAK0C,KAAN,CACIC,MAAM,QACNtE,KAAK,QACLuE,MAAO,CACH,CACIC,UAAU,EACVpG,QAAS,uBANrB,SAUI,cAAC,IAAD,CACIqG,KAAK,WAGb,cAAC,IAAKJ,KAAN,CACIC,MAAM,cACNtE,KAAK,cAFT,SAKI,cAAC,IAAD,CACIyE,KAAK,WAGb,cAAC,IAAKJ,KAAN,CACIC,MAAM,OACNtE,KAAK,OAFT,SAKI,cAAC,IAAD,CACIA,KAAK,SACLoe,SAAS,eACTC,OAAO,UACPC,gBAAgB,EAEhBvV,aAAcA,EANlB,SAUqB,KAAb0U,EACI,cACA,qBAAKnb,MAAO,CACR2E,MAAO,MACP2U,OAAQ,MACR7Y,gBAAiB,OAAS0a,EAAW,IACrCza,eAAgB,QAChBC,mBAAoB,gBASxC,cAAC,IAAKoB,KAAN,CACIC,MAAM,UACNtE,KAAK,UAFT,SAII,cAAC,IAAD,CACIgM,YAAU,EACV7K,KAAK,WAELsK,YAAa,YAIbQ,cAAc,EACdC,SAAUvB,EACVjG,SAlFH,SAACyH,EAAKC,GAEvBlE,EAASiE,IAsEO,SAeQ3B,EAAQ6B,KAAI,SAAAC,GAAG,OAAI,cAAC,GAAD,oBAAyBA,EAAItM,KAA7B,aAAsCsM,EAAI1L,MAA1C,MAAa0L,EAAI/F,WAIhD,eAAC,IAAD,CAAOjE,MAAO,CACV2E,MAAO,OACP8E,UAAW,GACXtJ,QAAS,cACTgB,eAAgB,YAJpB,UAMI,cAAC,IAAD,CAAQW,QAAS,WACbzC,EAAKqiB,cACL9e,EAAM+e,YACN1G,EAAY,KAHhB,oBAOA,cAAC,IAAD,CACIvY,SAAS,SACTP,KAAK,UAFT,8BChOxB,IA6Deyf,GA7DK,SAAChf,GACjB,MAAkCxE,mBAAS,IAA3C,mBAAOoJ,EAAP,KAAkBqa,EAAlB,KAEMviB,EAAY,uCAAG,4BAAAC,EAAA,+EAKDC,IAAMC,KAAK,gBAAiB,CACpC+H,aACD,CACCpK,QAASlB,MARA,OAKbmB,EALa,8DAYbrB,QAAQR,MAAMD,EAAgB,EAAD,KAC7BmE,IAAalE,MAAM,CACfM,QAASP,EAAgB,EAAD,MAdf,2BAmBjBmE,IAAaC,QAAQ,CACjB7D,QAAS,2BAA6BuB,EAAI3B,KAAKsI,QAAQS,MAAQ,MAEnE7B,EAAMue,iBACNU,EAAa,IACbjf,EAAM+e,YAxBW,yDAAH,qDA4BlB,OACI,gCACI,cAAC,IAAD,CACIpf,MAAOiF,EACPpF,SAAU,SAACC,GAAD,OAAOwf,EAAaxf,EAAEC,OAAOC,QACvC4G,YAAY,4BAChB,eAAC,IAAD,CAAOnJ,MAAO,CACV2E,MAAO,OACP8E,UAAW,GACXtJ,QAAS,cACTgB,eAAgB,YAJpB,UAMI,cAAC,IAAD,CAAQW,QAAS,WACb+f,EAAa,IACbjf,EAAM+e,aAFV,oBAOA,cAAC,IAAD,CACI7f,QAASxC,EACT6C,KAAK,UAFT,yBCqEhB,IAAM2f,GAAgB,SAAClf,GACnB,OACI,cAAC,IAAD,CACI5C,MAAO,CACH2E,MAAO,OACPvD,aAAc,GAGlBwD,UAAU,WACV9C,QAASc,EAAMd,QACf+C,MAAM,SARV,SAUI,sBACI9E,UAAU,cACVC,MAAO,CACH2E,MAAO,IACPvD,aAAc,EACdb,WAAY,GALpB,UAQI,qBAAKP,MAAO,CACR2E,MAAO,IACP2U,OAAQ,IACRlY,aAAc,EACd+X,YAAa,iBACbC,YAAa,QACbkH,iBAAkB,YAClBjH,YAAa,EACb5Y,gBAAiB,OAASmC,EAAMud,SAAW,IAC3Cxf,mBAAoB,SACpBD,eAAgB,QAChB+C,gBAAiB,mBACjBiO,WAAY,OACZnN,YAAa,UAEjB,oBAAIvE,MAAO,CAAEpB,SAAU,IAAKmjB,UAAW,UAAvC,SACKnf,EAAM6B,cASZW,gBAhKf,SAAcxC,GAAQ,IAAD,EAEjB,EAA0CxE,oBAAS,GAAnD,mBAAO4jB,EAAP,KAAsBC,EAAtB,KACA,EAAsC7jB,oBAAS,GAA/C,mBAAO8jB,EAAP,KAAoBC,EAApB,KACMC,EAAQ,UAAGxf,EAAMwf,gBAAT,QAAqB,GAC7BrN,EAAUwG,cACV7c,EAAWC,wBAAc,CAAEC,SAAU,MAI3C,OAHA0J,oBAAU1F,EAAMue,eAAgB,IAI5B,sBAAKnhB,MAAO,CACRuE,YAAc7F,EAAW,GAAK,GAC9ByB,QAAS,OACTC,cAAe,UAHnB,UAKI,gCAGI,sCAIA,cAAC,KAAD,OAIJ,cAAC,KAAD,CACIqE,MAAM,iBACNkK,OAAQ,KACRS,SAAU,kBAAM6S,GAAiB,IACjC/S,QAAS8S,EAJb,SAKI,cAACX,GAAD,CACIF,eAAgBve,EAAMue,eACtBQ,UAAW,kBAAMM,GAAiB,QAI1C,cAAC,KAAD,CACIxd,MAAM,eACNkK,OAAQ,KACRS,SAAU,kBAAM+S,GAAe,IAC/BjT,QAASgT,EAJb,SAKI,cAAC,GAAD,CACIf,eAAgBve,EAAMue,eACtBQ,UAAW,kBAAMQ,GAAe,QAKxC,4KAUA,cAAC,IAAD,CAEIzd,OAAQ,GAFZ,SAGI,cAAC,IAAD,CAAKnD,KAAM,GAAX,SACI,cAAC,IAAD,CACI8gB,UAAW,CACPhiB,YAAa,GACbC,aAAc,IAElB4b,MACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAQ/Z,KAAK,UAAUL,QAAS,kBAAMmgB,GAAiB,IAAvD,oBACA,cAAC,IAAD,CAAQngB,QAAS,kBAAMqgB,GAAe,IAAtC,qBAGR1d,MAAM,WAXV,SAaI,cAAC,IAAD,CAAKC,OAAQ,CAAC,GAAI,IAAlB,SAEQ0d,EAASrY,KAAI,SAACqB,GAQV,OACI,cAAC,IAAD,CACIkX,GAAI,GACJC,GAAI,EACJC,GAAI,EAHR,SAKI,cAAC,GAAD,CACI/d,MAAO2G,EAAK3G,MACZ3C,QAAS,kBAAMiT,EAAQnO,KAAK,uBAAyBwE,EAAKnH,KAC1Dkc,SAfJ/U,EAAKoC,KAAKvJ,GACHhI,EAAU,SAAWmP,EAAKoC,KAAKvJ,GAE/B,wBCjF7CvI,GAAO,CACT,WA4WW+mB,G,4MApWXnf,MAAQ,CACJqb,gBAAiBjjB,GAAK,GAAG0O,cACzBkJ,KAAM,CACF5V,KAAM,GACNY,MAAO,GACP2F,GAAI,IAERvG,KAAM,GACNY,MAAO,GACPS,SAAS,EACTP,SAAU,GACVmV,YAAa,GACb+O,uBAAuB,EACvBC,uBAAuB,EACvBC,gBAAiB,I,EAQrBnc,a,uCAAe,WAAOC,GAAP,eAAAnH,EAAA,6DAEPgH,EAAW,IAAID,UAEVuB,OAAO,OAAQnB,GAJb,kBAQDoN,GAAKC,KAAKF,eAAetN,GARxB,OASP,EAAKsc,YACL,EAAKjgB,MAAMkgB,oBACXhnB,KAAQ6D,QAAQ,gBAXT,kDAcP5D,EAAgB,EAAD,IACfD,KAAQN,MAAMD,EAAgB,EAAD,KAftB,kCAkBJ,GAlBI,0D,wDAqBfwnB,W,sBAAa,4BAAAxjB,EAAA,+EAEeuU,GAAKC,KAAKH,iBAFzB,OAEDoP,EAFC,OAGL,EAAKrf,SAAS,CACVif,gBAAiBI,IAJhB,uG,EAWbH,U,sBAAY,4BAAAtjB,EAAA,+EAEa8T,KAFb,OAEAC,EAFA,OAGJ,EAAKyP,aAEL,EAAKpf,SAAS,CACV2P,OACA5V,KAAM4V,EAAK5V,KACXY,MAAOgV,EAAKhV,QARZ,gDAWJvC,EAAgB,EAAD,IAXX,yD,EAkBZwX,W,uCAAa,WAAOxG,EAAOxK,GAAd,eAAAhD,EAAA,6DACT,EAAKoE,SAAS,CAAE5E,SAAS,IADhB,kBAGY+U,GAAKC,KAAKR,WAAWxG,EAAOxK,GAHxC,OAGD+Q,EAHC,OAKL,EAAK3P,SAAS,CACV2P,OACA5V,KAAM4V,EAAK5V,KACXY,MAAOgV,EAAKhV,QAEhB,EAAKsE,MAAMkgB,oBACXhnB,KAAQ6D,QAAQ,gBAXX,kDAaL,EAAKgE,SAAL,eACKoJ,EAAQ,EAAKzJ,MAAMgQ,KAAKvG,KAE7BjR,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAhBpC,QAkBT,EAAKoI,SAAS,CAAE5E,SAAS,IAlBhB,0D,0DAqBb2U,e,sBAAiB,kCAAAnU,EAAA,2DACqB,EAAK+D,MAA/B9E,EADK,EACLA,SAAUmV,EADL,EACKA,YAEZnV,GAAYmV,EAHL,uBAIT7X,KAAQN,MAAM,yCAJL,iCAOb,EAAKmI,SAAS,CACVgf,uBAAuB,IARd,kBAWS7O,GAAKC,KAAKL,eAAelV,EAAUmV,GAX5C,OAWL3V,EAXK,OAYTlC,KAAQ6D,QAAQ,oBAChB,EAAKgE,SAAS,CACV+e,uBAAuB,IAE3BvmB,OAAOC,aAAawD,QAAQ,QAAS5B,GACrCF,IACA,EAAK+kB,YAlBI,kDAqBT/mB,KAAQN,MAAMD,EAAgB,EAAD,KArBpB,QAuBb,EAAKoI,SAAS,CACVgf,uBAAuB,IAxBd,0D,uDA7EjB,WACIve,KAAKye,c,oBAwGT,WAAU,IAAD,OACCnH,EAAW,CACb,CACIjX,MAAO,OACPkX,UAAY,eAAC,IAAD,WAER,cAAC,IAAD,CACIpZ,MAAO6B,KAAKd,MAAM5F,KAClBke,aAAc,WACN,EAAKtY,MAAM5F,OAAS,EAAK4F,MAAMgQ,KAAK5V,MAAM,EAAK6V,WAAW,OAAQ,EAAKjQ,MAAM5F,OAErF0E,SAAU,SAACC,GACP,EAAKsB,SAAS,CACVjG,KAAM2E,EAAEC,OAAOC,SAIvBJ,KAAK,SACT,cAAC,IAAD,CACIpD,QAASqF,KAAKd,MAAMvE,QACpB+C,QAAS,kBAAM,EAAKyR,WAAW,OAAQ,EAAKjQ,MAAM5F,OAClDyE,KAAK,UACL8gB,SAAW7e,KAAKd,MAAM5F,OAAS0G,KAAKd,MAAMgQ,KAAK5V,KAJnD,wBAWL,CACC+G,MAAO,QACPkX,UAAY,eAAC,IAAD,WAER,cAAC,IAAD,CACIpZ,MAAO6B,KAAKd,MAAMhF,MAClBsd,aAAc,WACN,EAAKtY,MAAMhF,QAAU,EAAKgF,MAAMgQ,KAAKhV,OAAO,EAAKiV,WAAW,QAAS,EAAKjQ,MAAMhF,QAExF8D,SAAU,SAACC,GACP,EAAKsB,SAAS,CACVrF,MAAO+D,EAAEC,OAAOC,SAGxBJ,KAAK,SACT,cAAC,IAAD,CACIpD,QAASqF,KAAKd,MAAMvE,QACpB+C,QAAS,kBAAM,EAAKyR,WAAW,QAAS,EAAKjQ,MAAMhF,QACnD6D,KAAK,UACL8gB,SAAW7e,KAAKd,MAAMhF,QAAU8F,KAAKd,MAAMgQ,KAAKhV,MAJpD,wBAWL,CACCmG,MAAO,WACPkX,UACI,cAAC,IAAD,CAEI7Z,QAAS,kBAAM,EAAK6B,SAAS,CAAE+e,uBAAuB,KACtDvgB,KAAK,UAHT,qBAWR,CACIsC,MAAO,YACPkX,UACI,8BACI,cAAC,IAAD,CACIje,KAAK,SACLoe,SAAS,eACTC,OAAO,UACPC,gBAAgB,EAEhBvV,aAAcrC,KAAKqC,aANvB,SAUSrC,KAAKd,MAAMsf,gBAER,qBAAK5iB,MAAO,CACR2E,MAAO,MACP2U,OAAQ,MACR7Y,gBAAiB,OAAS2D,KAAKd,MAAMsf,gBAAkB,IACvDliB,eAAgB,QAChBC,mBAAoB,YANxB,oBAkB5B,OACI,cAAC,IAAD,CAAY/B,SAAU,IAAtB,SACK,SAACF,GAAD,OACG,sBACIsB,MAAO,CACHuE,YAAa7F,EAAW,GAAK,IAFrC,UAKI,mMAWA,0CAGA,cAAC,KAAD,IAMA,sBAAKsB,MAAO,CACRG,QAASzB,EAAW,OAAS,cAC7BiG,MAAO,OACPvE,cAAe1B,EAAW,SAAW,SAHzC,UAMI,8BAEI,cAAC,KAAD,CAGIqQ,UAAQ,EACRnE,WAAYlP,GACZsE,MAAO,CACH2E,MAAOjG,EAAW,QAAU,IAC5BuC,aAAcvC,EAAW,GAAK,SAElCqM,WAAY,SAACK,EAAM4D,GAAP,OACR,eAAC,KAAKjN,KAAN,CAEI/B,MAAO,CACHe,MAAQ,EAAKuC,MAAMqb,kBAAoBvT,EAAKhB,cAAgB,UAAY,SAE5ErK,UAAU,wBALd,UAMI,cAAC,KAAD,CACIC,MAAO,CACHuE,YAAa,IAFrB,SAIE6G,EAAK6D,UAAU,EAAG,GAAG2P,sBAV3B,IAU0DxT,IATjD4D,QAcrB,qBAAKhP,MAAO,CACRc,KAAM,EACN4Q,WAAYhT,EAAW,EAAI,IAF/B,SAKS,WAEG,OAAQ,EAAK4E,MAAMqb,iBACf,KAAKjjB,GAAK,GAAG0O,cACT,OACI,cAAC,KAAD,CACI2E,UAAQ,EACR/O,MAAO,GAGP8K,WAAW,WACXF,WAAY8Q,EACZ3Q,WAAY,SAAAK,GAAI,OACZ,cAAC,KAAKrJ,KAAN,CAEIma,MAAO,CAAC9Q,EAAKuQ,WAFjB,SAIKvQ,EAAK3G,OAHD2G,EAAK3G,UAO9B,QACI,MAAO,mBAtBlB,KA4BT,eAAC,KAAD,CACIob,cAAe,CACX9gB,QAAS,EAAKuE,MAAMqf,uBAExB3M,gBAAc,EACd9G,QAAS,EAAK5L,MAAMof,sBACpBje,MAAM,kBACN0K,KAAM,EAAKuE,eACXtE,SAAU,kBAAM,EAAKzL,SAAS,CAAE+e,uBAAuB,KAR3D,UAUI,mBAAG1iB,MAAO,CAAEiB,aAAc,IAA1B,gCACA,cAAC,IAAD,CACIkB,KAAK,WACL4G,aAAa,eACbrL,KAAK,eACL6E,MAAO,EAAKe,MAAM9E,SAClB4D,SAAU,SAACC,GAAD,OAAO,EAAKsB,SAAS,CAAEnF,SAAU6D,EAAEC,OAAOC,SACpD4G,YAAY,iBAGhB,mBAAGnJ,MAAO,CAAEiB,aAAc,GAAIwI,UAAW,IAAzC,4BACA,cAAC,IAAD,CACItH,KAAK,WACL4G,aAAa,eACbxG,MAAO,EAAKe,MAAMqQ,YAClBvR,SAAU,SAACC,GAAD,OAAO,EAAKsB,SAAS,CAAEgQ,YAAatR,EAAEC,OAAOC,SACvD4G,YAAY,iC,GAxVzBrE,IAAMC,W,UCTvBiP,G,4MAEF1Q,MAAQ,CACJyK,KAAM,EACNC,SAAU,GACVkV,cAAe,GACfjV,MAAO,EACPkV,aAAa,G,EAUjBC,UAAY,SAAC1jB,GACT,OAAQA,EAAayC,MACjB,IAAK,iBACD,EAAKS,MAAMygB,YAAY3jB,EAAa4jB,QAAQ9b,WAC5C,MACJ,IAAK,cACD,EAAK5E,MAAM2gB,eAAe7jB,EAAa4jB,QAAQ1Q,gBAC/C,EAAKhQ,MAAM4gB,QACX,MACJ,IAAK,UACD,EAAK5gB,MAAMmS,QACNnO,KAAK,uBAAyBlH,EAAa4jB,QAAQ9b,UAA9C,iCAAoF9H,EAAa4jB,QAAQvb,QACnH,EAAKnF,MAAM4gB,QACX,MACJ,IAAK,mBACD,EAAK5gB,MAAMmS,QACNnO,KAAK,uBAAyBlH,EAAa4jB,QAAQ9b,UAA9C,mDAAsG9H,EAAa4jB,QAAQjR,iBACrI,EAAKzP,MAAM4gB,QACX,MACJ,QACI1nB,KAAQN,MAAM,iBAEtB,EAAKioB,oBAAoB/jB,EAAauE,K,EAY1Cwf,oB,uCAAsB,WAAOC,GAAP,SAAAnkB,EAAA,+EAERC,IAAM+Q,OAAO,iBAAmBmT,EAAgB,CAClDtmB,QAASlB,MAHC,OAKd,EAAKynB,qBACL7nB,KAAQ6D,QAAQ,0BANF,gDAQd5D,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KAT3B,yD,wDActBqoB,wB,sBAA0B,sBAAArkB,EAAA,+EAEZC,IAAM+Q,OAAO,oBAAqB,CACpCnT,QAASlB,MAHK,OAKlB,EAAKynB,qBACL7nB,KAAQ6D,QAAQ,oCANE,gDAQlB5D,EAAgB,EAAD,IACfD,KAAQN,MAAM,UAAYD,EAAgB,EAAD,KATvB,yD,EAe1BsoB,wBAA0B,SAACC,GACvB,EAAKngB,SAAS,CACVoK,KAAM,GACP,EAAK4V,qB,EAWZA,mB,sBAAqB,oCAAApkB,EAAA,+DACU,EAAK+D,MAAxByK,EADS,EACTA,KAAMC,EADG,EACHA,SADG,kBAIQxO,IAAMuE,IAAI,oBAAqB,CAChD3G,QAASlB,IACTwL,OAAQ,CACJqL,MAAO/E,EACPgF,MAAOjF,EAAO,GAAKC,KARd,gBAIPtS,EAJO,EAIPA,KAONM,QAAQuB,IAAI7B,GAEZ,EAAKiI,SAAS,CACVuf,cAAexnB,EAAKwnB,cACpBjV,MAAOvS,EAAKqoB,qBAfH,kDAmBbhoB,EAAgB,EAAD,IAnBF,0D,EAuBrBioB,iBAAmB,SAACjW,EAAMC,GACtB,EAAKrK,SAAS,CACVoK,OAAMC,YACP,EAAK2V,qB,EAGZM,6BAA+B,SAAC9hB,GAAU,IAAD,EAKrC,iBAJc,CACV,eAAkB,eAClB,YAAe,gBAEJA,UAAf,QAAwB,Q,uDArH5B,WACI1E,EAAiB,mBAAoB2G,KAAKyf,yBAC1Czf,KAAKuf,uB,kCA8BT,WACI/lB,EAAoB,mBAAoBwG,KAAKyf,2B,oBAuFjD,WAAU,IAAD,OACL,OACI,gCACI,cAAC,IAAD,CAAO7jB,MAAO,CACViB,aAAc,IADlB,SAGI,cAAC,IAAD,CACIa,QAASsC,KAAKwf,wBACdzhB,KAAK,UAFT,2BAMJ,cAAC,KAAD,CACIyP,WAAY,CACR5D,SAAU5J,KAAKd,MAAM0K,SACrBD,KAAM3J,KAAKd,MAAMyK,KACjB3L,SAAUgC,KAAK4f,iBACf/V,MAAO7J,KAAKd,MAAM2K,OAEtBrD,WAAYxG,KAAKd,MAAM4f,cACvBnY,WAAY,SAAAK,GAAI,OACZ,qBAEIpL,MAAO,CACHiB,aAAc,IAHtB,SAKI,cAAC,IAAD,CACIuQ,QAAS,CACL,cAAC,IAAD,CACI1P,QAAS,kBAAM,EAAKshB,UAAUhY,IAC9BjJ,KAAK,UAFT,SAEoB,EAAK8hB,6BAA6B7Y,EAAKjJ,QAC3D,cAAC,IAAD,CACIL,QAAS,kBAAM,EAAK2hB,oBAAoBrY,EAAKnH,KAC7C9B,KAAK,OAFT,sBALR,SAUI,cAAC,IAAK0P,KAAN,CACItG,OAAQ,cAAC,KAAD,CAAQiC,KAAM,cAAC0W,GAAA,EAAD,MACtBzf,MAAO,qCAAG2G,EAAK3G,MAIV2G,EAAK+Y,KAAO,KAAO,cAAC,KAAD,CAAKpjB,MAAM,MAAMf,MAAO,CAAE0R,WAAY,IAAtC,oBAGxB5K,YACIsE,EAAKtE,YAAc,MAAQgF,KAAO,IAAIC,KAAKX,EAAKY,YAAYC,eAxBnEb,EAAKnH,c,GAzJXa,IAAMC,WA8LlBK,eAAW4O,I,UCxDXoQ,OA7If,SAAyBxhB,GACrB,IACIyhB,EAOAzhB,EAPAyhB,eACAC,EAMA1hB,EANA0hB,WACAC,EAKA3hB,EALA2hB,YACA7R,EAIA9P,EAJA8P,cACA8R,EAGA5hB,EAHA4hB,mBACAC,EAEA7hB,EAFA6hB,oBACA/lB,EACAkE,EADAlE,SA2BEyZ,EAAa,SAACza,GAChB,IAAI0a,EAAe1a,EAAK/B,MAAM,KAC1B0c,EAAgBD,EAAa,GAMjC,OAJIA,EAAa,KACbC,GAAiB,IAAMD,EAAa,GAAGnJ,UAAU,EAAG,GAAG1B,cAAgB,KAGpE8K,GAIX,OAEI,eAAC,IAAD,CACIqM,UAAW,CACPjhB,gBAAiB,UACjB1C,MAAO,SAIX0D,MAAM,WACNyX,MACI,cAAC,IAAD,CAAO1N,KAAK,SAAZ,SACI,cAAC,IAAD,CACI1M,QAASuiB,EACTliB,KAAK,OAAOqL,KAAM,cAACmX,GAAA,EAAD,CAAe3kB,MAAO,CAAEe,MAAO,eAI7Df,MAAO,CACH2E,MAAO,IAEPwU,YAAa,iBACbjZ,QAAS,EACT0kB,SAAU,SACVzkB,QAhDJzB,EACI+lB,EAAoB9c,OAAS,GAGrB2c,EAFD,OAEwB,QAG3BA,EAAc,OAAS,SA2C/BrgB,GAAG,gBACHoe,UAAW,CACPniB,QAAS,EACToZ,OAAQ,IACRnZ,QAAS,OACTC,cAAe,UA7BvB,UAgCI,cAAC,IAAD,CAAOJ,MAAO,CACV2E,MAAO,OACP8E,UAAW,GACXxI,aAAc,IAHlB,SAMI,cAAC,IAAD,CACIjB,MAAO,CACH0R,WAAY,IAEhB5P,QAASyiB,EACTpiB,KAAK,UALT,gCASJ,qBAAKnC,MAAO,CACRc,KAAM,EACNyY,UAAW,QAFf,SAII,cAAC,KAAD,CACI3O,WAAY8H,EACZ3H,WAAY,SAAAK,GAAI,OACZ,cAAC,KAAKrJ,KAAN,CAEI/B,MAAO,CACHK,YAAa,GACbC,aAAc,IAElB4b,MAAO,CAACpQ,KAAQ,IAAIC,KAAKX,EAAK2G,WAAYzK,WAAW2E,WANzD,SAQI,cAAC,KAAKlK,KAAK8P,KAAX,CACIpN,MAAO,qCACH,mBAAG5C,KAAK,IAAIC,QAAS,SAACO,GAAD,OAAOmiB,EAAmBniB,EAAG+I,IAAlD,SACE+M,EAAW/M,EAAKyZ,UAAUnnB,SAvG3ConB,EAyGwB1Z,GAxGRqZ,EAAoB1a,KAAI,SAAAC,GAAG,OAAIA,EAAI/F,MAErCmZ,SAAS0H,EAAa7gB,KAGtC6gB,EAAaC,YAoGQ,cAAC,KAAD,CACI/kB,MAAO,CACH0R,WAAY,IAEhB3Q,MAAM,MAJV,iBAI4B,SAIpCwK,OACI,cAAC,KAAD,CAAQvL,MAAO,CAAEuE,YAAa,IAA9B,SACK6G,EAAKyZ,UAAUnnB,KAAKuR,UAAU,EAAG,GAAG1B,gBAE7CzG,YAAasE,EAAK4Z,mBAzBjB5Z,EAAKnH,IA7FlB,IAAC6gB,W,qCCCrB,SAAS7Q,GAAQrR,GACb,OAAIA,EAAMqiB,UAEF,sBAAKjlB,MAAO,CACRG,QAAS,cAETwE,MAAO,QAHX,UAKI,cAAC,KAAD,CAAQ3E,MAAO,CAAE0R,WAAY,GAA7B,SAAoC9O,EAAMsiB,eAC1C,mBAAGllB,MAAO,CACNpB,SAAU,IACV6E,gBAAiB,mBACjBvD,QAAS,EACTkB,aAAc,EACdsQ,WAAY,IALhB,SAOK9O,EAAM9G,aAGd8G,EAAMuiB,OACH,sBAAKnlB,MAAO,CAChBG,QAAS,cACTgB,eAAgB,WAEhBwD,MAAO,QAJH,UAOJ,mBAAG3E,MAAO,CACNpB,SAAU,IACV6E,gBAAiB,wBACjBvD,QAAS,EACTkB,aAAc,EACdmD,YAAa,IALjB,SAOK3B,EAAM9G,UAEX,cAAC,KAAD,CAAQkE,MAAO,CAAEuE,YAAa,GAA9B,SAAqC3B,EAAMsiB,kBAIxC,K,IAMME,G,4MACjB9hB,MAAQ,CACJ+hB,SAAU,GACVzZ,KAAM,GACN0Z,cAAc,EACdC,WAAW,EACXR,aAAa,G,EAEjB9Z,MAAQ9O,OAAOC,aAAaC,QAAQ,S,EAiBpCmpB,c,sBAAgB,8BAAAjmB,EAAA,+EAEaC,IAAMuE,IAAI,iBAAmB,EAAKnB,MAAMkiB,aAAa7gB,GAAI,CAC1E7G,QAASlB,IACTwL,OAAQ,CACJqL,MAAO,GACPC,KAAM,KANN,gBAEFtX,EAFE,EAEFA,KAQN,EAAKiI,SAAS,CACV0hB,SAAU3pB,EAAK2pB,SAASnZ,UACxB+B,MAAOvS,EAAKuS,QAZR,gDAeRjS,QAAQR,MAAMD,EAAgB,EAAD,KAfrB,yD,EAmBhBgpB,Y,sBAAc,gCAAAhlB,EAAA,yDACgC,KAAtC,EAAK+D,MAAMsI,KAAK6Z,QAAQ,KAAM,IADxB,0EAIejmB,IAAMC,KAAK,YAAc,EAAKmD,MAAMkiB,aAAaG,UAAUhhB,GAAI,CAChF2H,KAAM,EAAKtI,MAAMsI,MAClB,CACCxO,QAASlB,MAPP,gBAIAR,EAJA,EAIAA,MAKA2pB,EAAa,EAAK/hB,MAAlB+hB,UACGze,KAAKlL,EAAKI,SACnB,EAAK6H,SAAS,CACV0hB,WACAzZ,KAAM,KAEV,EAAKhJ,MAAM8iB,qBAfL,kDAiBN1pB,QAAQR,MAAMD,EAAgB,EAAD,KAjBvB,0D,EAsBd8oB,eAAiB,WACb,IAAIsB,GAAkB,EAAKriB,MAAMgiB,aACjC,EAAK3hB,SAAS,CACV2hB,aAAcK,IAGlB,IAAIC,EAAOppB,SAASwG,eAAe,EAAKJ,MAAMkiB,aAAa7gB,IAGvD0hB,EACAE,aAAM,CACFC,QAAS,CAACF,GACVtM,OAAQ,GACRyM,OAAQ,gBACRC,SAAU,OAGd,EAAKriB,SAAS,CACVohB,aAAa,IAEjBc,aAAM,CACFC,QAAS,CAACF,GACVtM,OAAQ,IACRyM,OAAQ,gBACRC,SAAU,Q,EAMtBC,oBAAsB,SAACnqB,GAEnB,IAAMupB,EAAa,EAAK/hB,MAAlB+hB,SACNA,EAASze,KAAK9K,GACd,EAAK6H,SAAS,CACV0hB,aAEA,EAAK/hB,MAAMgiB,cACX,EAAK3hB,SAAS,CACVohB,aAAa,IAGrB,EAAKniB,MAAM8iB,sB,EAGf/S,gB,sBAAkB,sBAAApT,EAAA,+EAEJuU,GAAKG,QAAQtB,gBAAgB,EAAK/P,MAAMkiB,aAAa7gB,IAFjD,OAGV,EAAKrB,MAAMsjB,2BAHD,+CAKVnqB,EAAgB,EAAD,IALL,wD,8FArGlB,sBAAAwD,EAAA,sEACU6E,KAAKohB,gBADf,OAEIphB,KAAKxB,MAAMsjB,2BACXzoB,EAAiB,cAAe2G,KAAK6hB,qBACrC7hB,KAAKxB,MAAM8iB,qBAJf,gD,wFAOA,WAEI9nB,EAAoB,cAAewG,KAAK6hB,uB,oBAqG5C,WAAU,IAAD,OACL,EAA2C7hB,KAAKxB,MAA1CujB,EAAN,EAAMA,mBAAoBrB,EAA1B,EAA0BA,aAI1B,OACI,cAAC,IAAD,CACIJ,UAAW,CACPjhB,gBAAiB,UACjB1C,MAAO,SAGXkD,GAAI6gB,EAAa7gB,GACjBQ,MAAO,yCAAIqgB,EAAaD,UAAUnnB,KAA3B,IAAkC0G,KAAKd,MAAMyhB,YAAc,cAAC,KAAD,CAAK/kB,MAAO,CAAE0R,WAAY,IAAM3Q,MAAM,MAAtC,yBAAgE,KAA3H,OACPmb,MACI,eAAC,IAAD,CAAO1N,KAAK,SAAZ,UACI,cAAC,IAAD,CACI1M,QAASsC,KAAKigB,eAEdliB,KAAK,OAAOqL,KAAM,cAACmX,GAAA,EAAD,CAAe3kB,MAAO,CAAEe,MAAO,aACrD,cAAC,IAAD,CACIoB,KAAK,OACLL,QAAO,sBAAE,sBAAAvC,EAAA,sEACC,EAAKoT,kBADN,OAELwT,EAAmBrB,EAAa7gB,IAF3B,2CAITuJ,KAAM,cAAC4Y,GAAA,EAAD,CAAepmB,MAAO,CAAEe,MAAO,gBAMjDf,MAAO,CACH2E,MAAO,IAEPwU,YAAa,iBACbjZ,QAAS,EACT0kB,SAAU,SACVzkB,QAASiE,KAAKxB,MAAM0hB,WAAa,OAAS,SAE9CjC,UAAW,CACPniB,QAAS,EACToZ,OAAQ,KApChB,SAuCI,sBAAKtZ,MAAO,CACRG,QAAS,OACTC,cAAe,SACfkZ,OAAQ,QAHZ,UAKI,qBACItZ,MAAO,CACHG,QAAS,OACTW,KAAM,EAENV,cAAe,iBACfmZ,UAAW,QAEf3U,UAAU,WARd,SAaI,cAAC,KAAD,CAEIgG,WAAYxG,KAAKd,MAAM+hB,SACvBta,WAAY,SAACK,EAAMib,GAAP,OACR,8BACI,cAAC,GAAD,CACIlB,OAAQ/Z,EAAK+Z,OAAOmB,MACpBrB,WAAY7Z,EAAK+Z,OAAOmB,MACxBC,UAAWnb,EAAKY,UAChBkZ,aAAc9Z,EAAK+Z,OAAOznB,KAAKuR,UAAU,EAAG,GAAG1B,cAC/CzR,QAASsP,EAAKQ,QANZR,EAAKnH,SAa3B,sBAAKjE,MAAO,CAER2E,MAAO,OACPzE,QAAS,EACTC,QAAS,eAJb,UAMI,cAAC,IAAD,CACIH,MAAO,CACHc,KAAM,EACNyD,YAAa,IAEjB4E,YAAY,kBACZ5G,MAAO6B,KAAKd,MAAMsI,KAClBxJ,SAAU,SAACC,GAAD,OAAO,EAAKsB,SAAS,CAAEiI,KAAMvJ,EAAEC,OAAOC,SAChDqZ,aAAcxX,KAAKmgB,cAGvB,cAAC,IAAD,CAIIziB,QAASsC,KAAKmgB,YACdpiB,KAAK,UALT,8B,GAzNsBgc,IAAMpZ,WC3D5CG,GAAWC,IAAXD,OAGashB,G,4MACjBljB,MAAQ,CACJ4E,QAAS,GACTue,eAAgB,GAChBre,MAAO,GACPwD,KAAM,I,EAEVX,MAAQ9O,OAAOC,aAAaC,QAAQ,S,EAEpCgS,Y,sBAAc,oCAAA9O,EAAA,6DAEF6I,EAAU,EAAK9E,MAAf8E,MAFE,kBAIU5I,IAAMuE,IAAI,eAAgB,CACtC2D,OAAQ,CACJU,MAAOA,GAEXhL,QAASlB,MARP,OAINsM,EAJM,8DAWNxM,QAAQR,MAAMD,EAAgB,EAAD,KAXvB,2BAmBV,IAFIkN,EAAa,GACbC,EAAQF,EAAQ9M,KAAK8M,QAChBZ,EAAI,EAAGA,EAAIc,EAAMf,OAAQC,IAC9Ba,EAAW7B,KAAK,CACZ+B,IAAKD,EAAMd,GAAG3D,GACdvG,KAAMgL,EAAMd,GAAGlK,KACfY,MAAOoK,EAAMd,GAAGtJ,MAChB2F,GAAIyE,EAAMd,GAAG3D,KAGrB,EAAKN,SAAS,CACVuE,QAASO,IA5BH,yD,EAgCd6F,WAAa,SAAC/L,GACV,EAAKoB,SAAS,CACV8iB,eAAgBlkB,K,EAIxBgiB,Y,sBAAc,8BAAAhlB,EAAA,yDACgC,KAAtC,EAAK+D,MAAMsI,KAAK6Z,QAAQ,KAAM,IADxB,uBAEN3pB,KAAQN,MAAM,wBAFR,6BAML,EAAK8H,MAAMmjB,eANN,uBAON3qB,KAAQN,MAAM,6BAPR,oDAYegE,IAAMC,KAAK,YAAc,EAAK6D,MAAMmjB,eAAgB,CACrE7a,KAAM,EAAKtI,MAAMsI,MAClB,CACCxO,QAASlB,MAfP,wBAYAR,EAZA,EAYAA,KAON,EAAKiI,SAAS,CAEViI,KAAM,KAEV5P,QAAQuB,IAAI7B,EAAKI,QAAQgpB,cAvBnB,UAwBA,EAAKliB,MAAM8iB,qBAxBX,QAyBN,EAAK9iB,MAAM4hB,mBAAmB9oB,EAAKI,QAAQgpB,cAC3C,EAAKliB,MAAMoV,aA1BL,kDA4BNhc,QAAQR,MAAMD,EAAgB,EAAD,KA5BvB,0D,4CAgCd,WAAU,IAAD,OACL,OACI,eAAC,KAAD,CACI2T,QAAS9K,KAAKxB,MAAMsM,QACpBzK,MAAM,mBACN2K,SAAUhL,KAAKxB,MAAMoV,WACrB7I,KAAM/K,KAAKmgB,YACXvO,gBAAc,EALlB,UAOI,yCACA,cAAC,IAAD,CACItM,YAAU,EACVP,YAAa,YACbnJ,MAAO,CAAE2E,MAAO,QAChBgF,cAAc,EACdC,SAAU,SAACvH,GACP,EAAKsB,SAAS,CACVyE,MAAO/F,GACR,EAAKgM,cAEZjM,SAAUgC,KAAKkK,WAVnB,SAaKlK,KAAKd,MAAM4E,QAAQ6B,KAAI,SAAAC,GAAG,OAAI,cAAC,GAAD,oBAAyBA,EAAItM,KAA7B,aAAsCsM,EAAI1L,MAA1C,MAAa0L,EAAI/F,SAEpD,uBACA,mBAAGjE,MAAO,CAAEyJ,UAAW,IAAvB,sBACA,cAAC,IAAD,CACIrH,SAAU,SAACC,GAAD,OAAO,EAAKsB,SAAS,CAAEiI,KAAMvJ,EAAEC,OAAOC,SAChDA,MAAO6B,KAAKd,MAAMsI,KAClBgQ,aAAcxX,KAAKmgB,YACnBpb,YAAY,2B,GA9GgBgV,IAAMpZ,WCYhDpC,G,kDACF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IA2BV8jB,iBAAmB,SAACC,GAChB,IAAIC,GAAiB,EAAKtjB,MAAMghB,WAChC,EAAK3gB,SAAS,CAAE2gB,WAAYsC,IAGvBA,IAAoC,IAAnBD,GAClB,EAAKjB,sBAlCM,EAuCnBnC,eAvCmB,uCAuCF,WAAO3Q,GAAP,iBAAArT,EAAA,6DAET,EAAK+D,MAAMghB,YACX,EAAKoC,kBAAiB,GAHb,SAMP,EAAKhB,qBANE,UAOTmB,EAAkB,EAAKvjB,MAAMoP,cAAc3I,KAAI,SAAAC,GAAG,OAAIA,EAAI/F,MAC9DjI,QAAQuB,IAAIqV,GACZ5W,QAAQuB,IAAIspB,GACR7X,EAAM6X,EAAgBxc,QAAQuI,GAClC5W,QAAQuB,IAAIyR,IACC,IAATA,EAZS,mDAcb,EAAKwV,mBAAmB,EAAKlhB,MAAMoP,cAAc1D,IAdpC,4CAvCE,wDAyDnBqV,eAAiB,SAAC3mB,GACd,IAMIkoB,EANAN,GAAgB,EAAKhiB,MAAM5F,GAE/B,EAAKiG,SAAL,eACKjG,EAAO4nB,IAKC,sBAAT5nB,EACAkoB,EAAOppB,SAASwG,eAAe,iBAEf,yBAATtF,IACPkoB,EAAOppB,SAASwG,eAAe,sBAG/BsiB,EAEAO,aAAM,CACFC,QAAS,CAACF,GACVtM,OAAQ,GACRyM,OAAQ,gBACRC,SAAU,MAGdH,aAAM,CACFC,QAAS,CAACF,GACVtM,OAAQ,IACRyM,OAAQ,gBACRC,SAAU,OAtFH,EAgGnBN,mBAhGmB,sBAgGE,4BAAAnmB,EAAA,+EAKauU,GAAKG,QAAQxB,mBAL1B,cAKTC,EALS,gBAMP,IAAI5P,SAAQ,SAACzF,GAAD,OAAS,EAAKsG,SAAS,CAAE+O,iBAAiBrV,MAN/C,uDAQbtB,EAAgB,EAAD,IARF,yDAhGF,EA6GnByoB,mBAAqB,SAACM,GAClB,IAAIgC,EAAY,EAAKxjB,MAAMmhB,oBACvBqC,EAAU/c,KAAI,SAACC,GAAD,OAASA,EAAI/F,MAAImZ,SAAS0H,EAAa7gB,MAEhC,IAArB6iB,EAAUnf,QACVmf,EAAUvd,OAAO,EAAG,GACpBud,EAAUlgB,KAAKke,IAEfgC,EAAUlgB,KAAKke,GAEnB,EAAKnhB,SAAS,CACV8gB,oBAAqBqC,IAEzB,EAAKlkB,MAAMmkB,yBAAyBD,EAAU/c,KAAI,SAAAC,GAAG,OAAIA,EAAI/F,SA1H9C,EAiInBkiB,mBAAqB,SAACvT,GAClB,IAAIkU,EAAY,EAAKxjB,MAAMmhB,oBACvB4B,EAAQS,EAAUE,WAAU,SAACzkB,GAAD,OAAWA,EAAM0B,KAAO2O,MAEzC,IAAXyT,IACAS,EAAUvd,OAAO8c,EAAO,GACxB,EAAK1iB,SAAS,CACV8gB,oBAAqBqC,IAEzB,EAAKlkB,MAAMmkB,yBAAyBD,EAAU/c,KAAI,SAAAC,GAAG,OAAIA,EAAI/F,QAEjE,EAAKyhB,sBA5IU,EAgJnBuB,QAAU,SAACnC,GAGP,OAF6B,EAAKxhB,MAAMmhB,oBAAoB1a,KAAI,SAAAC,GAAG,OAAIA,EAAI/F,MAEhDmZ,SAAS0H,EAAa7gB,KAGtC6gB,EAAaC,aApJxB,EAAKzhB,MAAQ,CACTrE,UAAU,EACVioB,WAAW,EACXC,mBAAmB,EACnBC,sBAAsB,EACtB9C,YAAY,EACZ5R,cAAe,GACf+R,oBAAqB,GACrBxnB,OAAQ,KACRoqB,6BAA6B,GAXlB,E,qDAiBnB,WACIjjB,KAAKshB,qBAELthB,KAAKxB,MAAM0kB,kBAAkBljB,KAAKmf,gBAClC9lB,EAAiB,cAAe2G,KAAKshB,sB,kCAGzC,WACI9nB,EAAoB,cAAewG,KAAKshB,sB,oBAkI5C,WAAU,IAAD,OACGhnB,EAAa0F,KAAKxB,MAAlBlE,SAER,OACI,eAAC,IAAD,CACImG,MAAOnG,EAAW,QAAU,MAC5B8P,KAAK,QACL5J,UAAWlG,EAAW,WAAa,aACnCsB,MAAO,CACHwgB,SAAU,QACV+G,KAAM7oB,EAAW,GAAK,KACtB8oB,OAAQ,GACRC,OAAQ,KARhB,WAaS/oB,GAAY,cAAC,KAAD,CACT8X,UAAU,QACV/R,MAAM,WAFG,SAGT,cAAC,IAAD,CAAQqL,MAAM,SAAStB,KAAK,QACxB1M,QAASsC,KAAKsiB,iBACdlZ,KAAM,cAACka,GAAA,EAAD,QAKlB,8BACI,cAAC,GAAD,CACIrD,eAAgB,kBAAM,EAAKA,eAAe,sBAC1CC,WAAYlgB,KAAKd,MAAMghB,WACvB5lB,SAAUA,EACV6lB,YAAa,kBAAM,EAAK5gB,SAAS,CAAE0jB,6BAA6B,KAChE3U,cAAetO,KAAKd,MAAMoP,cAC1B8R,mBAAoB,SAACniB,EAAG+I,GACpB,EAAKoZ,mBAAmBpZ,GACxB/I,EAAEsP,kBAEN8S,oBAAqBrgB,KAAKd,MAAMmhB,wBAKpCrgB,KAAKd,MAAMmhB,oBAAoB1a,KAAI,SAACqB,GAAD,OAC/B,cAAC,GAAD,CAEInO,OAAQ,EAAKqG,MAAMrG,OACnBqnB,WAAY,EAAKhhB,MAAMghB,WACvBoB,mBAAoB,EAAKA,mBACzBS,mBAAoB,EAAKA,mBACzBrB,aAAc1Z,EACd8a,yBAA0B,EAAKtjB,MAAMsjB,0BANhC9a,EAAKnH,OAWlBvF,GAAY,cAAC,KAAD,CACR8X,UAAU,QACV/R,MAAM,WAFE,SAGR,cAAC,IAAD,CAAQqL,MAAM,SAAStB,KAAK,QACxB1M,QAASsC,KAAKsiB,iBACdlZ,KAAM,cAACka,GAAA,EAAD,QAGlB,cAAC,GAAD,CACIxY,QAAS9K,KAAKd,MAAM+jB,4BACpB3B,mBAAoBthB,KAAKshB,mBACzBlB,mBAAoBpgB,KAAKogB,mBACzBxM,WAAY,kBAAM,EAAKrU,SAAS,CAAE0jB,6BAA6B,c,GAhOjEviB,IAAMC,WAwOTK,eAAWzC,I,wCClPlBglB,GAAYC,KAAZD,QAEFE,G,4MACFvkB,MAAQ,CACJ4jB,WAAW,G,EAsBfY,gB,uCAAkB,WAAOvlB,EAAOwlB,GAAd,uBAAAxoB,EAAA,6DACV2nB,GAAa,EAAK5jB,MAAM4jB,UACP,mBAAV3kB,IAAqB2kB,EAAY3kB,GAE5C,EAAKoB,SAAS,CACVujB,cAGAc,EAAOxrB,SAASwG,eAAe,iBAC/BilB,EAAQzrB,SAASwG,eAAe,uBAChCklB,EAAS1rB,SAASwG,eAAe,4BACjCmlB,EAAY3rB,SAASwG,eAAe,kBAX1B,SAaRolB,GAAQ,CACVJ,OACAd,YACAe,QACAC,SACAC,aACDJ,GAnBW,2C,+GAnBlB,gBACwC3gB,IAAhChD,KAAKxB,MAAMylB,iBACXjkB,KAAK0jB,gBAAgB1jB,KAAKxB,MAAMylB,kBAEhCjkB,KAAK0jB,iBAAgB,K,yEAI7B,sBAAAvoB,EAAA,sEACU6E,KAAK0jB,iBAAgB,GAAM,GADrC,gD,0EAiCA,WAAU,IAAD,SACD1F,EAAQ,UAAGhe,KAAKxB,MAAMwf,gBAAd,QAA0B,GACtC,OACI,sBACIne,GAAG,sBACHlE,UAAU,aAAaC,MAAOsoB,GAAOC,WAFzC,UAGI,eAAC,IAAD,CACIvoB,MAAOsoB,GAAOE,OACd3jB,MAAM,SACND,UAAU,aAHd,UAKI,cAAC,IAAD,CACIX,GAAG,2BACH9B,KAAK,OACLL,QAASsC,KAAK0jB,gBACd9nB,MAAOsoB,GAAOG,QAJlB,SAMQ3jB,IAAM0S,cAAcpT,KAAKd,MAAM4jB,UAAYwB,KAAqBC,QAGxE,oBACI1kB,GAAG,gBACHjE,MAAOsoB,GAAOM,GAFlB,qBAQJ,eAAC,KAAD,CACIC,oBAAqB,CAAC,QACtBC,gBAAiB,CAAC,QAClBjqB,KAAK,SACLkqB,MAAM,OACN/oB,MAAOsoB,GAAOV,KACdoB,gBAAiB5kB,KAAKd,MAAM4jB,UANhC,UAQI,cAAC,KAAKnlB,KAAN,CACID,QAAS,kBAAM,EAAKc,MAAMmS,QAAQnO,KAAK,eACvC5G,MAAOsoB,GAAOW,MACdzb,KAAM,cAAC0b,GAAA,EAAD,IAHV,iBAAe,QAQf,cAAC,KAAKnnB,KAAN,CACID,QAAS,kBAAM,EAAKc,MAAMmS,QAAQnO,KAAK,wBACvC5G,MAAO,CACHyD,gBAAiB,eAErB+J,KAAM,cAACqT,GAAA,EAAD,IALV,qBAAe,YASf,cAAC8G,GAAD,CAEI3nB,MAAO,CACHyD,gBAAiB,eAErB+J,KAAM,cAAC2b,GAAA,EAAD,IACN1kB,MAAM,WACN1E,UAAU,gBAPd,SAWQqiB,EAASrY,KAAI,SAACC,EAAKgF,GAAN,OACT,cAAC,KAAKjN,KAAN,CACI/B,MAAO,CACHyD,gBAAiB,eAErB3B,QAAS,kBAAM,EAAKc,MAAMmS,QAAQnO,KAAK,uBAAyBoD,EAAI/F,KAJxE,SAMkB+F,EAAIvF,OAAbuF,EAAI/F,QAjBjB,sB,GApGAa,IAAMC,WAmI5BqjB,GAAO,uCAAG,0CAAA7oB,EAAA,yDAAO4T,EAAP,+BAAa,CACzB+T,UAAW,GACXc,KAAM,GACNC,MAAO,GACPC,OAAQ,GACRC,UAAW,IACZJ,EANa,wBAOR5U,EAAI+T,UAPI,gCASFpkB,QAAQsmB,IAAI,CACdvD,aAAM,CACFC,QAAS,CAAC3S,EAAI6U,MAEd9mB,QAAS,EACTmoB,WAAY,GACZrD,SAAU,IACVD,OAAQ,kBACTuD,SACHzD,aAAM,CACFC,QAAS,CAAC3S,EAAI8U,OACdtjB,MAAO,GACPohB,OAAQ,gBACRC,SAAU,MACXsD,SACHzD,aAAM,CACFC,QAAS,CAAC3S,EAAI+U,QACdmB,WAAY,EACZrD,SAAU,IACVD,OAAQ,gBACRwD,MAAO,MACRD,SACHzD,aAAM,CACFC,QAAS,CAAC3S,EAAIgV,WACd9nB,YAAc0nB,EAAc,GAAK,IACjC/B,SAAU,IACVD,OAAQ,kBAETuD,WArCC,6CA8CFxmB,QAAQsmB,IAAI,CACdvD,aAAM,CACFC,QAAS,CAAC3S,EAAI6U,MACdjnB,MAAO,yBACPG,QAAS,EACTmoB,WAAY,EACZrD,SAAU,IACVD,OAAQ,kBACTuD,SACHzD,aAAM,CACFC,QAAS,CAAC3S,EAAI8U,OACdtjB,MAAO,IACPohB,OAAQ,gBACRC,SAAU,MACXsD,SACHzD,aAAM,CACF2D,MAAO,EACP1D,QAAS,CAAC3S,EAAI+U,QACdmB,WAAY,EACZrD,SAAU,IACVD,OAAQ,gBACRwD,MAAO,IACRD,SACHzD,aAAM,CACFC,QAAS,CAAC3S,EAAIgV,WACd9nB,YAAa,IACb2lB,SAAU,IACVD,OAAQ,kBAETuD,WA3EC,2CAAH,qDAmFPhB,GAAS,CACXmB,UAAW,CACPtpB,QAAS,cACTwE,MAAO,OACPtE,YAAa,IACbqpB,cAAe,IAEnBnB,WAAY,CACRxnB,MAAO,QACP4D,MAAO,EACP8iB,OAAQ,GACR,aAAc,0BACdkC,UAAW,EACXpQ,UAAW,OACX9N,UAAW,SACX+U,SAAU,QACV+G,KAAM,EACNqC,IAAK,EACLtQ,OAAQ,OACR7V,gBAAiB,UACjBhD,gBAAiB,mDACjBN,QAAS,OACTC,cAAe,UAEnBooB,OAAQ,CACJ/e,UAAW,GACXpJ,YAAa,EACbY,aAAc,IAElBwnB,QAAS,CAGL1nB,MAAO,SAEX6nB,GAAI,CAIA3oB,OAAQ,EACRc,MAAO,QAEP6oB,IAAK,GACLrC,KAAM,IAEVK,KAAM,CACFnkB,gBAAiB,eAErBwlB,MACA,CACIxlB,gBAAiB,eAErBoH,OAAQ,CACJlG,MAAO,OACPxE,QAAS,cACTgB,eAAgB,gBAChBmY,OAAQ,IACRzY,WAAY,WAKLuE,eAAWyiB,I,oBCvM1B,IAAMgC,GAAO,SAACjnB,GAAD,OACT,cAAC,KAAD,CAAM5C,MAAO,CACT2E,MAAO,KADX,SAGI,cAAC,KAAK5C,KAAN,CACID,QAASc,EAAMknB,OACf9pB,MAAO,CACHe,MAAO,OAHf,mBAKQ,QAOVunB,GAAS,CACXzd,OAAQ,CACJlG,MAAO,OACPxE,QAAS,cACTgB,eAAgB,gBAChBmY,OAAQ,IACRzY,WAAY,WAQLkpB,GAvGf,SAA0BnnB,GACtB,IAAMlE,EAAWC,wBAAc,CAAEC,SAAU,MAE3C,OACI,sBACImB,UAAU,SACVC,MAAOsoB,GAAOzd,OAFlB,UAGI,oBAAI7K,MAAK,eACDtB,EAAW,CAAEsC,SAAU,IAAO,IADtC,SAGK,WAAa4B,EAAMlF,KAAO,KAAO,IAAMkF,EAAMlF,OAElD,eAAC,IAAD,WAII,cAAC,KAAD,CACI+E,OAAQ,EAAE,EAAG,GACbunB,MAAOpnB,EAAMqnB,oBAFjB,SAGI,cAAC,IAAD,CACI9nB,KAAK,UACL2N,MAAM,SACNtB,KAAK,QACLxO,MAAO,CACHkqB,UAAW,aACXnpB,MAAO,kBAIXe,QAASc,EAAMunB,yBACf3c,KAAM,cAAC4c,GAAA,EAAD,CACFpqB,MAAO,SAMnB,2IAOA,cAAC,KAAD,CAEI2V,QAASkU,GAAK,CAAEC,OAAQlnB,EAAMknB,SAC9BO,QAAS,CAAC,SAHd,SAMI,cAAC,KAAD,CACItqB,UAAU,mBACVyO,KAAiB,GACjBpC,IAAKxJ,EAAM0nB,YAGXtqB,MAAK,aACDuE,YAAa,GACb8U,YAAa,EACbF,YAAa,iBACbC,YAAa,SACT1a,EAAW,CAAE6F,YAAa,IAAO,eCnEzDojB,GAAYC,KAAZD,QAEF4C,G,4MACFjnB,MAAQ,CACJ4jB,WAAW,G,EAIfY,gB,sBAAkB,sCAAAvoB,EAAA,6DACVirB,EAAWhuB,SAASwG,eAAe,4BAMnCkkB,GAAa,EAAK5jB,MAAM4jB,UAE5B,EAAKvjB,SAAS,CACVujB,cAGAc,EAAOxrB,SAASwG,eAAe,wBAC/BilB,EAAQzrB,SAASwG,eAAe,8BAChCklB,EAAS1rB,SAASwG,eAAe,mCACjCmlB,EAAY3rB,SAASwG,eAAe,kBAhB1B,mBAmBJolB,GAAQ,CACVJ,OACAd,YACAe,QACAC,SACAC,YACAqC,aAzBM,0DA4BVC,MAAM,EAAD,IA5BK,0D,EAiClBC,WAAa,SAAChW,GACV,EAAK9R,MAAMmS,QAAQnO,KAAK8N,GACxB,EAAKoT,mB,4CAIT,WAAU,IAAD,SACD1F,EAAQ,UAAGhe,KAAKxB,MAAMwf,gBAAd,QAA0B,GACtC,OACI,qCACI,qBAAKpiB,MAAO,CACRsZ,OAAQ,GACRH,YAAa,iBACbE,YAAa,EACbsR,kBAAmB,EACnBvR,YAAa,QACb1H,YAAa,GACbnN,aAAc,IAPlB,SAUI,sBAEIvE,MAAO,CACHsZ,OAAQ,GACRnZ,QAAS,OACTC,cAAe,MACfS,WAAY,SACZR,YAAa,GACbmE,IAAK,GACLijB,OAAQ,IACRjH,SAAU,QACVoJ,IAAK,EACLrC,KAAM,EACN5iB,MAAO,OACPglB,UAAW,0BACXlpB,gBAAiB,wEACjBgD,gBAAiB,oBAhBzB,UAmBI,cAAC,IAAD,CACItB,KAAK,QAELL,QAASsC,KAAK0jB,gBACd9nB,MAAOsoB,GAAOG,QAJlB,SAKKrkB,KAAKd,MAAM4jB,UAAY,cAACwB,GAAA,EAAD,CAAoB1oB,MAAO,CAAEe,MAAO,WAAgB,cAAC4nB,GAAA,EAAD,CAAkB3oB,MAAO,CAAEe,MAAO,aAGlH,oBAAIf,MAAO,CAAEC,OAAQ,EAAGc,MAAO,SAA/B,uBAIR,sBACIkD,GAAG,6BAEHjE,MAAK,2BACEsoB,GAAOC,YADT,IAED2B,UAAW,uBALnB,UAQI,eAAC,IAAD,CACIlqB,MAAOsoB,GAAOE,OACd3jB,MAAM,SACND,UAAU,aAHd,UAKI,cAAC,IAAD,CACIX,GAAG,kCACH9B,KAAK,OACLL,QAASsC,KAAK0jB,gBACd9nB,MAAOsoB,GAAOG,QAJlB,SAMQ3jB,IAAM0S,cAAcpT,KAAKd,MAAM4jB,UAAYwB,KAAqBC,QAGxE,oBACI1kB,GAAG,uBACHjE,MAAOsoB,GAAOM,GAFlB,qBAQJ,eAAC,KAAD,CACIC,oBAAqB,CAAC,QACtBC,gBAAiB,CAAC,YAClBjqB,KAAK,SACLkqB,MAAM,OACN/oB,MAAOsoB,GAAOV,KACdoB,gBAAiB5kB,KAAKd,MAAM4jB,UANhC,UAQI,cAAC,KAAKnlB,KAAN,CACID,QAAS,kBAAM,EAAK4oB,WAAW,eAC/B1qB,MAAOsoB,GAAOW,MACdzb,KAAM,cAAC0b,GAAA,EAAD,IAHV,iBAAe,QAQf,cAAC,KAAKnnB,KAAN,CACID,QAAS,kBAAM,EAAK4oB,WAAW,wBAC/B1qB,MAAO,CACHyD,gBAAiB,eAErB+J,KAAM,cAACqT,GAAA,EAAD,IALV,qBAAe,YASf,cAAC,GAAD,CAEI7gB,MAAO,CACHyD,gBAAiB,eAErB+J,KAAM,cAAC2b,GAAA,EAAD,IACN1kB,MAAM,WACN1E,UAAU,gBAPd,SAWQqiB,EAASrY,KAAI,SAACC,EAAKgF,GAAN,OACT,cAAC,KAAKjN,KAAN,CACI/B,MAAO,CACHyD,gBAAiB,eAErB3B,QAAS,kBAAM,EAAK4oB,WAAW,uBAAyB1gB,EAAI/F,KAJhE,SAMkB+F,EAAIvF,OAAbuF,EAAI/F,QAjBjB,kBA2BhB,qBACInC,QAAS,YACwB,IAAzB,EAAKwB,MAAM4jB,WACX,EAAKY,mBAGb7jB,GAAG,2BACHjE,MAAO,CACHG,QAAS,OACTe,QAAS,EACTsf,SAAU,QACVoJ,IAAK,EACLrC,KAAM,EACN5iB,MAAO,OACP2U,OAAQ,OACR7V,gBAAiB,oBACjBgkB,OAAQ,KAhBhB,2B,GA7KW3iB,IAAMC,WAsM3BqjB,GAAO,uCAAG,wCAAA7oB,EAAA,yDAAO4T,EAAP,+BAAa,CACzB+T,UAAW,GACXc,KAAM,GACNC,MAAO,GACPC,OAAQ,GACRC,UAAW,GACXqC,SAAU,IANE,wBAQRrX,EAAI+T,UARI,gCAYFpkB,QAAQsmB,IAAI,CACdvD,aAAM,CACFC,QAAS,CAAC3S,EAAI6U,MAEd9mB,QAAS,EACTmoB,WAAY,GACZrD,SAAU,IACVD,OAAQ,kBACTuD,SACHzD,aAAM,CACFC,QAAS,CAAC3S,EAAI8U,OACdoB,YAAa,IACbtD,OAAQ,gBACRC,SAAU,MACXsD,SACHzD,aAAM,CACFC,QAAS,CAAC3S,EAAI+U,QACdmB,WAAY,EACZrD,SAAU,IACVD,OAAQ,gBACRwD,MAAO,MACRD,SACHzD,aAAM,CACFC,QAAS,CAAC3S,EAAIqX,UACdtpB,QAAS,EACT8kB,SAAU,IACVD,OAAQ,kBAETuD,WAxCC,OA0CRnW,EAAIqX,SAASxqB,MAAMG,QAAU,OA1CrB,8BAiDRgT,EAAIqX,SAASxqB,MAAMG,QAAU,QAjDrB,UAkDF2C,QAAQsmB,IAAI,CACdvD,aAAM,CACFC,QAAS,CAAC3S,EAAI6U,MACdjnB,MAAO,yBACPG,QAAS,EACTmoB,WAAY,EACZrD,SAAU,IACVD,OAAQ,kBACTuD,SACHzD,aAAM,CACFC,QAAS,CAAC3S,EAAI8U,OACdoB,WAAY,EACZtD,OAAQ,gBACRC,SAAU,MACXsD,SACHzD,aAAM,CACF2D,MAAO,EACP1D,QAAS,CAAC3S,EAAI+U,QACdmB,WAAY,EACZrD,SAAU,IACVD,OAAQ,gBACRwD,MAAO,IACRD,SACHzD,aAAM,CACFC,QAAS,CAAC3S,EAAIqX,UACdtpB,QAAS,EACT8kB,SAAU,IACVD,OAAQ,kBAETuD,WA/EC,4CAAH,qDAuFPhB,GAAS,CACXmB,UAAW,CACPtpB,QAAS,cACTwE,MAAO,OACPtE,YAAa,IACbqpB,cAAe,IAEnBnB,WAAY,CACRxnB,MAAO,QACP4D,MAAO,IACP8iB,OAAQ,IACR,aAAc,0BACdkC,UAAW,EACXpQ,UAAW,OACX9N,UAAW,SACX+U,SAAU,QACV+G,KAAM,EACNqC,IAAK,EACLtQ,OAAQ,OACR7V,gBAAiB,UACjBhD,gBAAiB,mDACjBN,QAAS,OACTC,cAAe,UAEnBooB,OAAQ,CACJ/e,UAAW,GACXpJ,YAAa,EACbY,aAAc,IAElBwnB,QAAS,CAGL1nB,MAAO,SAEX6nB,GAAI,CAIA3oB,OAAQ,EACRc,MAAO,QAEP6oB,IAAK,GACLrC,KAAM,IAEVK,KAAM,CACFnkB,gBAAiB,eAErBwlB,MACA,CACIxlB,gBAAiB,eAErBoH,OAAQ,CACJlG,MAAO,OACPxE,QAAS,cACTgB,eAAgB,gBAChBmY,OAAQ,IACRzY,WAAY,WAKLuE,eAAWmlB,IC3UpB5nB,G,kDACF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAkBVmkB,yBAA2B,SAACxkB,GAAD,OAAW,EAAKoB,SAAS,CAAEinB,sBAAuBroB,KAnB1D,EAqBnB2jB,yBArBmB,sBAqBQ,4BAAA3mB,EAAA,+EAGauU,GAAKE,aAAalB,yBAH/B,OAGfmX,EAHe,OAKnB,EAAKtmB,SAAS,CACVsmB,wBANe,gDAUnBluB,EAAgB,EAAD,IAVI,yDArBR,EA2CnB8uB,gBA3CmB,sBA2CD,4BAAAtrB,EAAA,+EAEJC,IAAMuE,IAAI,gBAFN,sDAINjI,EAAUP,EAAgB,EAAD,IAC7BS,QAAQuB,IAAIzB,GALF,wDA3CC,EA2DnBynB,eAAiB,aA3DE,EA6DnB+D,kBAAoB,SAAC3pB,GACjB,EAAK4lB,eAAiB,SAAC3Q,GACnBjV,EAAKiV,GACL,EAAKjP,SAAS,CACVsR,cAAc,MAjEP,EAsEnB6U,OAAS,WACL,IAAI9rB,EAAQ7B,OAAOC,aAAaC,QAAQ,SACxC0B,EAAwBC,GACxB7B,OAAOC,aAAa0uB,WAAW,SAC/B,EAAKloB,MAAMmS,QAAQnO,KAAK,UA1ET,EA6EnBua,eA7EmB,sBA6EF,8BAAA5hB,EAAA,+EAEYC,IAAMuE,IAAI,eAAgB,CAC3C3G,QAASlB,MAHJ,gBAEHR,EAFG,EAEHA,KAGN,EAAKiI,SAAS,CACVye,SAAU1mB,EAAK0mB,WANV,gDAUTpmB,QAAQR,MAAMD,EAAgB,EAAD,KAVpB,yDA7EE,EA2FnB6nB,UAAY,SAAC1jB,GACT,OAAQA,EAAayC,MACjB,IAAK,iBACD,EAAKkhB,YAAY3jB,EAAa4jB,QAAQ9b,WACtC,MACJ,IAAK,cACD,EAAK+b,eAAe7jB,EAAa4jB,QAAQ1Q,gBACzC,MACJ,IAAK,UACD,EAAKhQ,MAAMmS,QACNnO,KAAK,uBAAyBlH,EAAa4jB,QAAQ9b,UAA9C,iCAAoF9H,EAAa4jB,QAAQvb,QACnH,EAAKpE,SAAS,CACVsR,cAAc,IAElB,MACJ,IAAK,mBACD,EAAKrS,MAAMmS,QACNnO,KAAK,uBAAyBlH,EAAa4jB,QAAQ9b,UAA9C,mDAAsG9H,EAAa4jB,QAAQjR,iBACrI,EAAK1O,SAAS,CACVsR,cAAc,IAElB,MACJ,QACInZ,KAAQN,MAAM,mBAlHP,EAuHnBuvB,4BAA8B,SAAC5oB,GAAU,IAAD,EAMpC,iBALe,CACX,eAAkB,oCAClB,YAAe,qCAGHA,UAAhB,QAAyB,qCA7HV,EAgInB0hB,wBAA0B,SAACC,GAEvB,EAAKoC,2BACc,gBAAfpC,EAAM3hB,MAA0B,EAAKmB,MAAMsnB,sBAAsBxN,SAAS0G,EAAMR,QAAQ1Q,iBAE5FlT,IAAasrB,KAAK,CACdlvB,QAASgoB,EAAMrf,MACfqC,YAAagd,EAAMhd,YAAc,EAAKikB,4BAA4BjH,EAAM3hB,MACxEL,QAAS,WACL,EAAKshB,UAAUU,GACf,EAAKL,oBAAoBK,EAAM7f,QA1IxB,EAoJnBwf,oBApJmB,uCAoJG,WAAOC,GAAP,SAAAnkB,EAAA,+EAERC,IAAM+Q,OAAOtU,EAAU,iBAAmBynB,EAAgB,CAC5DtmB,QAASlB,MAHC,OAKd,EAAKgqB,2BALS,+CAQdnqB,EAAgB,EAAD,IARD,wDApJH,wDAsKnB+mB,kBAtKmB,sBAsKC,gCAAAvjB,EAAA,6DACZ4Y,EAAa,SAACza,GACd,IAAI0a,EAAe1a,EAAK/B,MAAM,KAC1B0c,EAAgBD,EAAa,GAMjC,OAJIA,EAAa,KACbC,GAAiB,IAAMD,EAAa,GAAGnJ,UAAU,EAAG,GAAG1B,cAAgB,KAGpE8K,GATK,kBAYKvE,GAAKC,KAAKV,QAZf,cAYRC,EAZQ,gBAaYQ,GAAKC,KAAKH,iBAbtB,OAaR0W,EAbQ,OAcZ,EAAK3mB,SAAS,CACVjG,KAAMya,EAAW7E,EAAK5V,MACtB4sB,gBAhBQ,kDAmBZtuB,QAAQR,MAAMD,EAAgB,EAAD,KAnBjB,0DAtKD,EA8LnB8nB,YA9LmB,uCA8LL,WAAO7b,GAAP,iBAAAjI,EAAA,+EAGeC,IAAMC,KAAK,gBAAiB,CAC7C+H,aACD,CACCpK,QAASlB,MANP,gBAGAR,EAHA,EAGAA,KAKNgE,IAAaC,QAAQ,CACjB7D,QAAS,2BAA6BJ,EAAKsI,QAAQS,MAAQ,MAE/D,EAAK0c,iBAXC,gDAaNplB,EAAgB,EAAD,IACf2D,IAAalE,MAAM,CACfM,QAASP,EAAgB,EAAD,MAftB,yDA9LK,sDAEf,EAAK+H,MAAQ,CACTrE,UAAU,EACVioB,WAAW,EACXjS,cAAc,EACdmN,SAAU,GACVnlB,OAAQ,KACRS,KAAM,GACN4sB,YAAa,GACbL,oBAAqB,EACrBW,sBAAuB,GACvBK,cAAe,IAZJ,E,qDAmCnB,WACI7mB,KAAK+c,iBACL/c,KAAK0e,oBACLhlB,IACAsG,KAAK8hB,2BACLzoB,EAAiB,mBAAoB2G,KAAKyf,2B,gCAY9C,SAAmBxf,GACXD,KAAKxB,MAAM6R,WAAapQ,EAAUoQ,UAClCrQ,KAAK+c,mB,kCA4Gb,WACIvjB,EAAoB,mBAAoBwG,KAAKyf,2B,oBAgDjD,WAAU,IAAD,OAEL,OACI,cAAC,IAAD,CAAYjlB,SAAU,IAAtB,SACK,SAACF,GAAD,OACG,sBACIuF,GAAG,iBACHlE,UAAU,YAAYC,MAAO,CAEzB2E,MAAO,OACPtE,YAAa,GACbC,aAAc,GACdopB,cAAe,IAPvB,WASMhrB,GACE,cAAC,GAAD,CAAe0jB,SAAU,EAAK9e,MAAM8e,WAGpC1jB,GACA,cAAC,GAAD,CAAc0jB,SAAU,EAAK9e,MAAM8e,WAEvC,sBAAKriB,UAAU,eAAeC,MAAO,CACjCc,KAAM,GADV,UAII,cAAC,GAAD,CACIpD,KAAM,EAAK4F,MAAM5F,KACjBusB,oBAAqB,EAAK3mB,MAAM2mB,oBAChCH,OAAQ,EAAKA,OACbQ,YAAa,EAAKhnB,MAAMgnB,YACxBH,yBAA0B,kBAAM,EAAKxmB,SAAS,CAAEsR,cAAc,OAElE,cAAC,IAAD,CAAOiW,OAAK,EAACC,KAAK,aAAlB,SAEI,cAAC,GAAD,CACI/I,SAAU,EAAK9e,MAAM8e,SACrBjB,eAAgB,EAAKA,mBAI7B,cAAC,IAAD,CAAOgK,KAAK,sBAAZ,SACI,cAAC,GAAD,CAAUrI,kBAAmB,EAAKA,sBAEtC,cAAC,IAAD,CAAOqI,KAAK,iCAAZ,SACI,cAACC,GAAD,CAAiBjK,eAAgB,EAAKA,sBAM9C,cAAC,KAAD,CAIIxc,MAAOjG,EAAW,MAAQ,IAC1B+F,MAAM,gBACN+R,UAAU,QACVC,UAAU,EACVC,QAAS,WACL,EAAKwP,2BACL,EAAKviB,SAAS,CAAEsR,cAAc,KAElCe,gBAAgB,EAChB9G,QAAS,EAAK5L,MAAM2R,aAbxB,SAeI,cAAC,GAAD,CACIuO,MAAO,WACH,EAAK0C,2BACL,EAAKviB,SAAS,CAAEsR,cAAc,KAElCsO,eAAgB,EAAKA,eACrBF,YAAa,EAAKA,YAClBpmB,OAAQ,EAAKqG,MAAMrG,WAI3B,cAACouB,GAAD,CACI3sB,SAAUA,EACVqoB,yBAA0B,EAAKA,yBAC/BO,kBAAmB,EAAKA,kBACxBpB,yBAA0B,EAAKA,qC,GApSzCphB,IAAMC,WA8STK,eAAWzC,ICxQXA,I,yDApDb,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDU,MAAQ,CACXrE,UAAU,GAHK,E,qDAQnB,WACM9C,OAAOC,aAAaC,QAAQ,UAE9B+H,KAAKT,SAAS,CACZ1E,UAAU,M,oBAKhB,WACE,IAAIA,EAAqD,OAAzC9C,OAAOC,aAAaC,QAAQ,SAE5C,OADAmD,IAAM8rB,SAASC,QAAUtvB,EAEvB,eAAC,IAAD,WAGKgD,EAAqC,KAA1B,cAAC,IAAD,CAAU2B,GAAG,WAIgC,IAAnDzE,OAAOsY,SAASC,SAASrK,QAAQ,cAAuBpL,IAEjDA,EAKwB,KAA9B,cAAC,IAAD,CAAU2B,GAAG,cAEtB,eAAC,IAAD,WACE,cAAC,IAAD,CAAOuqB,KAAK,QAAZ,SACE,cAACK,EAAD,MAEF,cAAC,IAAD,CAAOL,KAAK,aAAZ,SACE,cAAC1B,GAAD,gB,GA3CM3kB,IAAMC,YCDT0mB,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEF5vB,SAASwG,eAAe,SAM1ByoB,O","file":"static/js/main.b7d0f8e2.chunk.js","sourcesContent":["\r\n\r\n/**\r\n * Retrieves error message from AJAX request\r\n * @param {Error} error \r\n * @returns {String} The error message\r\n */\r\nconst getErrorMessage = (error) => {\r\n    if (error.response) {\r\n        // The request was made and the server responded with a status code\r\n        // that falls out of the range of 2xx\\\r\n        // let message = '';\r\n        // console.log(error.response.data);\r\n        // console.log(error.response.status);\r\n        // console.log(error.response.headers);\r\n\r\n        if ((typeof error.response.data) === 'string') {\r\n            return error.response.data.split('\\n')[0]\r\n        }\r\n\r\n        if (error.response.status === 403) {\r\n            return 'FORBIDDEN'\r\n        } else if (error.response.status === 500) {\r\n            return 'Server Error'\r\n        } else {\r\n            return 'unknown'\r\n        }\r\n\r\n    } else if (error.request) {\r\n        // The request was made but no response was received\r\n        // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\r\n        // http.ClientRequest in node.js\r\n        //console.log(error.request);\r\n        return 'Request Timeout'\r\n    } else {\r\n        // Something happened in setting up the request that triggered an Error\r\n        //console.log('Error', error.message);\r\n        return error.message\r\n    }\r\n    // console.log(error.config);\r\n\r\n}\r\n\r\n/**\r\n * Logs error with console.error\r\n * @param {Error} error \r\n */\r\nconst logErrorMessage = (error) => {\r\n    console.error('Error: ' + getErrorMessage(error))\r\n}\r\n\r\nlet obj = {\r\n    getErrorMessage,\r\n    logErrorMessage\r\n}\r\n\r\nexport {\r\n    getErrorMessage,\r\n    logErrorMessage\r\n};\r\n\r\nexport default obj;\r\n\r\n","\r\nconst isDev = false;\r\n\r\nlet baseUrl = isDev ? 'http://192.168.0.167:1337' : 'https://bugg.imranbey.com'\r\nconst getDefaultHeader = () => ({\r\n    'x-auth-token': window.localStorage.getItem('token')\r\n});\r\nconst staticServerUrl = isDev ? 'http://192.168.0.167:3000' : 'https://bugg.imranbey.com'\r\n\r\nlet config = {\r\n    baseUrl,\r\n    getDefaultHeader,\r\n    staticServerUrl\r\n}\r\n\r\n\r\nexport { baseUrl, getDefaultHeader, staticServerUrl }\r\nexport default config;","/**\r\n * Setup single sails socket instance\r\n */\r\nimport { baseUrl, getDefaultHeader } from '../pages/config'\r\n// import { Socket } from 'socket.io-client';\r\n// import SailsIOJS from 'sails.io.js';\r\n\r\nfunction initilizeSocket() {\r\n    if (document.io) return;\r\n    var socketIOClient = require('socket.io-client');\r\n    var sailsIOClient = require('sails.io.js');\r\n\r\n    // Instantiate the socket client (`io`)\r\n    // (for now, you must explicitly pass in the socket.io client when using this library from Node.js)\r\n    var io = sailsIOClient(socketIOClient);\r\n    document.io = io;\r\n    // io.sails.autoConnect = false;\r\n    io.sails.url = baseUrl;\r\n    io.sails.rejectUnauthorized = false;\r\n    io.sails.reconnection = true;\r\n    // io.sails.headers = {\r\n    //     'x-auth-token': window.localStorage.getItem('token')\r\n    // };\r\n\r\n    io.socket.on('connect', () => {\r\n        // io.socket.post('/message/subscribe', {}, );\r\n\r\n        io.socket.request({\r\n            method: 'POST',\r\n            url: '/message/subscribe',\r\n            headers: getDefaultHeader(),\r\n\r\n        }, (res, jwr) => {\r\n            console.log(res)\r\n            console.log(jwr)\r\n            console.log('Possibly Joined room')\r\n        });\r\n\r\n    });\r\n\r\n\r\n}\r\ninitilizeSocket()\r\n\r\nconst addEventListener = (name, func) => {\r\n    console.log('listening on ' + name)\r\n    // func()\r\n    document.io.socket.on(name, func)\r\n}\r\n\r\nconst removeEventListener = (name, func) => {\r\n    console.log('remove listeners on ' + name)\r\n    document.io.socket.off(name, func)\r\n}\r\n\r\nconst reconfigToken = () => {\r\n    let { io } = document;\r\n    // if (!io.socket.isConnected()) return\r\n\r\n    io.socket.request({\r\n        method: 'POST',\r\n        url: '/message/subscribe',\r\n        headers: getDefaultHeader(),\r\n\r\n    }, (res, jwr) => {\r\n        console.log(res)\r\n        console.log(jwr)\r\n\r\n        console.log('Possibly Joined room')\r\n    });\r\n}\r\n/**\r\n * Removes user from messages, requires current token\r\n * @param {string} token\r\n */\r\nconst unsubscribeFromMessages = (token) => {\r\n    const { io } = document;\r\n    io.socket.request({\r\n        method: 'POST',\r\n        url: '/message/unsubscribe',\r\n        headers: {\r\n            'x-auth-token': token\r\n        },\r\n\r\n    }, (res, jwr) => {\r\n        console.log(res)\r\n        console.log(jwr)\r\n\r\n        console.log('Possibly Joined room')\r\n    });\r\n}\r\n\r\n\r\nconst disconnectSocket = () => {\r\n    const { io } = document;\r\n    if (!io.socket.isConnected()) return;\r\n    io.socket.disconnect();\r\n}\r\n\r\nconst connectSocket = () => {\r\n    const { io } = document;\r\n    if (io.socket.isConnected() || io.socket.isConnecting()) return;\r\n    io.sails.headers = {\r\n        'x-auth-token': window.localStorage.getItem('token')\r\n    };\r\n    io.socket.reconnect();\r\n}\r\n\r\nlet obj = {\r\n    addEventListener,\r\n    removeEventListener,\r\n    reconfigToken,\r\n    disconnectSocket,\r\n    connectSocket,\r\n    unsubscribeFromMessages\r\n}\r\n\r\nexport { addEventListener, reconfigToken, removeEventListener, unsubscribeFromMessages };\r\nexport default obj;\r\n","import React, { useState } from 'react';\r\nimport {\r\n    Redirect,\r\n    // Link\r\n} from \"react-router-dom\";\r\nimport { Card } from 'antd';\r\nimport { Typography } from 'antd';\r\nimport { Form, Input, Button, notification, Space } from 'antd';\r\nimport axios from 'axios';\r\nimport { useMediaQuery } from 'react-responsive'\r\n\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\nimport { reconfigToken } from '../libraries/socket';\r\nimport { baseUrl } from './config';\r\n\r\n\r\nconst { Title } = Typography;\r\n\r\n\r\n\r\nconst AuthenticationHooks = () => {\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const isMobile = useMediaQuery({ maxWidth: 800 })\r\n    const [mode, setMode] = useState('login');\r\n    const [loading, setLoading] = useState(false);\r\n    const [isAuthed, setIsAuthed] = useState(false);\r\n    const [form] = Form.useForm();\r\n\r\n\r\n    const handleSubmit = async () => {\r\n        setLoading(true)\r\n        var res;\r\n        console.log(password)\r\n        // attempt to get token\r\n        try {\r\n            if (mode === 'login') {\r\n                console.log(password)\r\n                res = await axios.post(baseUrl + '/user/login', {\r\n                    email,\r\n                    password\r\n                })\r\n            } else {\r\n                res = await axios.post(baseUrl + '/user/signup',\r\n                    {\r\n                        name,\r\n                        email,\r\n                        password,\r\n                    })\r\n            }\r\n        } catch (e) {\r\n            let message = getErrorMessage(e)\r\n            console.error(\"Error: \" + message);\r\n            notification.error({\r\n                message: `Could not ${mode}: ` + getErrorMessage(e)\r\n            })\r\n        }\r\n\r\n\r\n        setLoading(false)\r\n        if (res) {\r\n            // store token :)\r\n            // alert(res.data.message)\r\n            notification.success({\r\n                message: res.data.message\r\n            })\r\n\r\n            window.localStorage.setItem('token', res.data.token);\r\n            reconfigToken()\r\n            setIsAuthed(true)\r\n        }\r\n\r\n    }\r\n    const onFinishedFailed = () => false;\r\n    const toggleMode = () => {\r\n        if (mode === 'login') {\r\n            setMode('signup')\r\n        } else {\r\n            setMode('login')\r\n        }\r\n    }\r\n\r\n    const loginAsDemo = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const { data: { token } } = await axios.post('/user/demo');\r\n\r\n            notification.success({\r\n                message: 'Logged in as demo'\r\n            })\r\n\r\n            window.localStorage.setItem('token', token);\r\n            reconfigToken()\r\n            setLoading(false)\r\n            setIsAuthed(true)\r\n        } catch (e) {\r\n            setLoading(false)\r\n            notification.error({\r\n                message: getErrorMessage(e)\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\" style={{\r\n            //backgroundColor: 'cyan',\r\n            margin: 0,\r\n            padding: 0,\r\n            display: 'flex',\r\n            flexDirection: isMobile ? 'column' : 'row',\r\n            paddingLeft: isMobile ? 10 : 64,\r\n            paddingRight: isMobile ? 10 : 64,\r\n            paddingTop: 64,\r\n            // alignItems: 'center'\r\n            //position: 'absolute',\r\n            //top: 0,\r\n            //left: 0,\r\n            minHeight: '100vh',\r\n            // width: '100%',\r\n            backgroundImage: \"url('https://images.unsplash.com/photo-1617653695386-1d78957d33f8?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2000&q=80')\",\r\n            backgroundSize: 'cover',\r\n            backgroundPosition: 'center'\r\n        }}>\r\n            {isAuthed ? <Redirect to=\"/dashboard\" /> : null}\r\n            <div\r\n\r\n                style={{\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    alignItems: isMobile ? 'center' : 'flex-start',\r\n                    flex: isMobile ? 'unset' : 1\r\n                }}>\r\n                <h1 style={{\r\n\r\n                    color: 'white',\r\n\r\n                    fontSize: 48,\r\n                    margin: 0,\r\n\r\n                }}>\r\n                    Bugg\r\n                </h1>\r\n                <p style={{ color: 'white', marginBottom: 30, opacity: .9 }}>A simple bug tracker\r\n                </p>\r\n            </div>\r\n\r\n            <div\r\n                style={{\r\n                    flex: isMobile ? 'unset' : 1,\r\n                    display: isMobile ? 'flex' : 'unset',\r\n                    flexDirection: isMobile ? 'row' : 'unset',\r\n                    justifyContent: isMobile ? 'center' : 'unset'\r\n                }}\r\n            >\r\n                <Card style={{\r\n                    maxWidth: isMobile ? 450 : 'unset',\r\n                    marginBottom: 30,\r\n                    borderRadius: 5,\r\n                    flex: 1\r\n                }}>\r\n\r\n                    <Form\r\n                        name=\"basic\"\r\n                        labelAlign=\"left\"\r\n                        labelCol={{\r\n                            //span: 8,\r\n                            span: 8,\r\n                        }}\r\n                        wrapperCol={{\r\n                            //span: 16,\r\n                            span: 16\r\n                        }}\r\n                        initialValues={{\r\n                            remember: true,\r\n                        }}\r\n                        form={form}\r\n                        onFinish={handleSubmit}\r\n                        onFinishFailed={onFinishedFailed}\r\n                    >\r\n                        <Typography>\r\n                            {\r\n                                mode === 'login' ?\r\n                                    <Title>Login</Title> : <Title>Signup</Title>\r\n                            }\r\n\r\n                        </Typography>\r\n                        <h4 style={{\r\n                            marginBottom: 30\r\n                        }}>\r\n                            {mode === 'login' ?\r\n                                <>\r\n                                    Don't have an account? <a href='#' onClick={toggleMode}>Sign up</a>\r\n                                </> :\r\n                                <>\r\n                                    Already have an account? <a href='#' onClick={toggleMode}>Login</a>\r\n                                </>\r\n                            }\r\n\r\n                        </h4>\r\n                        {\r\n                            mode === 'signup' ?\r\n                                <>\r\n                                    <Form.Item\r\n                                        label=\"Name\"\r\n                                        name=\"name\"\r\n                                        style={{\r\n\r\n                                        }}\r\n                                        rules={[\r\n                                            {\r\n                                                required: true,\r\n                                                message: 'Please input your name!',\r\n                                            },\r\n                                        ]}\r\n                                    >\r\n                                        <Input\r\n                                            type=\"text\" onChange={(e) => setName(e.target.value)}\r\n                                        />\r\n                                    </Form.Item>\r\n\r\n                                </>\r\n                                :\r\n                                null\r\n                        }\r\n                        <Form.Item name='email' label=\"Email\" rules={[{\r\n                            required: true,\r\n                            type: 'email'\r\n                        }]}>\r\n                            <Input\r\n\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                            />\r\n                        </Form.Item>\r\n\r\n                        <Form.Item\r\n                            label=\"Password\"\r\n                            name=\"password\"\r\n                            rules={[\r\n                                {\r\n                                    required: true,\r\n                                    message: 'Please input your password!',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input.Password\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n\r\n                            />\r\n                        </Form.Item>\r\n\r\n                        {\r\n                            mode === 'signup' ?\r\n                                <Form.Item\r\n                                    label=\"Confirm Passord\"\r\n                                    name=\"confirm-password\"\r\n                                    rules={[\r\n                                        {\r\n                                            required: true,\r\n                                            message: 'Please input your password!',\r\n                                        },\r\n                                    ]}\r\n                                >\r\n                                    <Input.Password\r\n                                    // onChange={(e) => setConfirmPassword(e.target.value)}\r\n\r\n                                    />\r\n                                </Form.Item>\r\n\r\n                                :\r\n                                null\r\n                        }\r\n                        <Form.Item\r\n                            wrapperCol={{\r\n                                offset: 0,\r\n                                span: 16,\r\n                            }}\r\n                        >\r\n                            <Space>\r\n                                <Button\r\n                                    loading={loading}\r\n                                    type=\"primary\" htmlType=\"submit\">\r\n                                    SUBMIT\r\n                                </Button>\r\n                                <Button\r\n                                    onClick={loginAsDemo}\r\n                                >\r\n                                    Use Demo Account Instead\r\n                                </Button>\r\n                            </Space>\r\n\r\n                        </Form.Item>\r\n                    </Form>\r\n                </Card>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AuthenticationHooks;\r\n\r\n","import React from 'react';\r\nimport Chart from 'chart.js/auto';\r\nimport { Card, Statistic, Row, Col, Space } from 'antd';\r\nimport axios from 'axios';\r\nimport MediaQuery from 'react-responsive'\r\nimport { logErrorMessage } from '../../../libraries/network-error-handling';\r\nimport { getDefaultHeader } from '../../config';\r\n\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isAuthed: false,\r\n            totalBugs: 0,\r\n            totalBugsClosed: 0,\r\n            totalBugsOpen: 0,\r\n            totalMembers: 0,\r\n            pieChart: null\r\n        };\r\n\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        await this.renderChart();\r\n        this.fetchStats()\r\n\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.project.id !== this.props.project.id) {\r\n            this.fetchStats()\r\n        }\r\n    }\r\n\r\n    renderChart = () => {\r\n        return new Promise((res) => {\r\n            var ctx = document.getElementById('pieChart').getContext('2d');\r\n            var pieChart = new Chart(ctx, {\r\n                type: 'pie',\r\n                data: {\r\n                    labels: [\r\n                        'Open',\r\n                        'Closed',\r\n\r\n                    ],\r\n                    datasets: [{\r\n                        label: 'My First Dataset',\r\n                        data: [this.state.totalBugsOpen, this.state.totalBugsClosed],\r\n                        backgroundColor: [\r\n                            '#f50',\r\n                            '#389e0d',\r\n                        ],\r\n                        hoverOffset: 4\r\n                    }]\r\n                }\r\n            })\r\n\r\n            this.setState({\r\n                pieChart\r\n            }, res)\r\n        })\r\n    }\r\n\r\n    updateChart = async () => {\r\n        let { pieChart } = this.state;\r\n        pieChart.data.datasets[0].data = [this.state.totalBugsOpen, this.state.totalBugsClosed];\r\n        pieChart.update()\r\n    }\r\n\r\n    fetchStats = async () => {\r\n        try {\r\n            let { data } = await axios.get('/project/stats/' + this.props.project.id, {\r\n                headers: getDefaultHeader(),\r\n            });\r\n\r\n            let {\r\n                totalBugs,\r\n                totalBugsClosed,\r\n                totalBugsOpen,\r\n                totalMembers } = data;\r\n\r\n            this.setState({\r\n                totalBugs,\r\n                totalBugsClosed,\r\n                totalBugsOpen,\r\n                totalMembers\r\n            }, this.updateChart)\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MediaQuery maxWidth={800}>\r\n                {(isMobile) =>\r\n                    <React.Fragment>\r\n\r\n                        <div\r\n                            style={{\r\n                                display: isMobile ? 'flex' : 'inline-flex',\r\n                                flexDirection: isMobile ? 'column' : 'unset',\r\n                                marginRight: isMobile ? 10 : 64,\r\n                                gap: 10\r\n                            }}\r\n                        >\r\n\r\n                            <Card\r\n                                title=\"Statistics\"\r\n                            >\r\n                                <Row gutter={16}>\r\n                                    <Col span={12}>\r\n                                        <Statistic title=\"Members\" value={this.state.totalMembers} />\r\n                                    </Col>\r\n                                    <Col span={12}>\r\n                                        <Statistic title=\"Bugs Submited\" value={this.state.totalBugs} />\r\n\r\n                                    </Col>\r\n                                    <Col span={12}>\r\n                                        <Statistic title=\"Bugs Open\" value={this.state.totalBugsOpen} />\r\n                                    </Col>\r\n                                    <Col span={12}>\r\n                                        <Statistic title=\"Bugs Closed\" value={this.state.totalBugsClosed} />\r\n                                    </Col>\r\n                                </Row>\r\n                            </Card>\r\n\r\n\r\n                            <Card\r\n                                title=\"Progress\"\r\n                                style={{\r\n                                    //width: 450\r\n                                }}>\r\n                                <Space\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        // display: 'none'\r\n                                    }}\r\n                                    direction='vertical' align='center'>\r\n\r\n                                    <canvas\r\n                                        id=\"pieChart\"\r\n                                    //width=\"400\"\r\n                                    //height=\"400\"\r\n                                    ></canvas>\r\n\r\n                                </Space>\r\n\r\n                            </Card>\r\n\r\n\r\n\r\n                        </div>\r\n\r\n\r\n\r\n\r\n                    </React.Fragment>\r\n                }\r\n            </MediaQuery>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default App;\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    withRouter\r\n} from \"react-router-dom\";\r\nimport { EditorState, convertToRaw } from 'draft-js';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport './../../node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport { Form, Input, Button, Space, DatePicker, notification } from 'antd';\r\n\r\nimport { Select } from 'antd';\r\nimport { Upload } from 'antd';\r\nimport { InboxOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\n\r\nconst { Dragger } = Upload;\r\nconst { Option } = Select;\r\n\r\n\r\n\r\n\r\n\r\nconst App = (props) => {\r\n    const [editorState, setEditorState] = useState(EditorState.createEmpty());\r\n    const [title, setTitle] = useState('');\r\n    const [tags, setTags] = useState([]);\r\n    const [value, setValue] = useState([]);\r\n\r\n    const [dueDate, setDueDate] = useState(0);\r\n    const [assignTo] = useState([]);\r\n    const [severity, setSeverity] = useState('');\r\n    const [reproducibility, setReproducibility] = useState('');\r\n    const [catagory, setCatagory] = useState('');\r\n    const [formData] = useState(new FormData());\r\n    const [fileRegister] = useState([]);\r\n\r\n\r\n    const beforeUpload = async (file, fileList) => {\r\n        fileRegister.push(file)\r\n        return false\r\n    };\r\n    const onRemove = (file) => {\r\n        for (let i = 0; i < fileRegister.length; i++) {\r\n            if (fileRegister[i].uid === file.uid) {\r\n                fileRegister.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    async function onFinish(values) {\r\n        let description = draftToHtml(convertToRaw(editorState.getCurrentContent()));\r\n\r\n        try {\r\n            // console.log(props.location.pathname.split('/')[3])\r\n            let requestData = {\r\n                description,\r\n                title,\r\n                tags: tags.join(','),\r\n                dueDate: (dueDate === 0 ? undefined : dueDate.toDate().getTime()),\r\n                assignTo: assignTo.join(','),\r\n                severity,\r\n                reproducibility,\r\n                catagory,\r\n                assignees: value.join(','),\r\n                projectId: props.match.params.projectId\r\n            }\r\n            // console.log(requestData)\r\n            let res = await axios.post('/bug/create', requestData, {\r\n                headers: getDefaultHeader()\r\n            })\r\n\r\n            const { data } = res;\r\n\r\n            // TODO: add file upload\r\n\r\n            if (fileRegister.length !== 0) {\r\n\r\n                for (let i = 0; i < fileRegister.length; i++) {\r\n                    formData.append(`files`, fileRegister[i])\r\n                }\r\n                console.log(formData.getAll('files'))\r\n                await axios.post('/file/', formData, {\r\n                    headers: {\r\n                        ...(getDefaultHeader()),\r\n                        'Content-Type': 'multipart/form-data'\r\n                    },\r\n                    params: {\r\n                        bugId: data.id\r\n                    }\r\n                })\r\n            }\r\n            props.toggleFunc()\r\n            props._handleListUpdate();\r\n            notification.success({\r\n                message: 'Bug was submitted!'\r\n            })\r\n\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n            notification.error({\r\n                message: getErrorMessage(e)\r\n            })\r\n        }\r\n\r\n    };\r\n\r\n    const handleChange = (val, option) => {\r\n        //console.log(value)\r\n        setValue(val)\r\n    }\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n        notification.error({\r\n            message: 'Please input title'\r\n        })\r\n    };\r\n\r\n    // const [name, setName] = useState('imran')\r\n    const [members, setMembers] = useState([]);\r\n    const [query, setQuery] = useState();\r\n\r\n    useEffect(() => {\r\n        const handleChange = async () => {\r\n            let results;\r\n            //setLoading(true);\r\n\r\n            try {\r\n                results = await axios.get('/user/search', {\r\n                    params: {\r\n                        query: query,\r\n                        projectId: props.match.params.projectId,\r\n                        isIn: true\r\n                    },\r\n                    headers: getDefaultHeader()\r\n                })\r\n            } catch (e) {\r\n                console.error(getErrorMessage(e))\r\n                // setLoading(false);\r\n                return\r\n            }\r\n\r\n            //console.log(results.data)\r\n            let newMembers = [];\r\n            let users = results.data.results;\r\n            for (let i = 0; i < users.length; i++) {\r\n                newMembers.push({\r\n                    key: users[i].id,\r\n                    name: users[i].name,\r\n                    email: users[i].email,\r\n                    id: users[i].id\r\n                })\r\n            }\r\n\r\n            setMembers(newMembers);\r\n            //setLoading(false);\r\n            // console.log('Updated: ')\r\n            //console.log(newMembers);\r\n        }\r\n\r\n        handleChange()\r\n    }, [query]);\r\n\r\n    return (\r\n        <div style={{\r\n            width: '100%',\r\n\r\n\r\n        }}>\r\n            <Form\r\n                name=\"basic\"\r\n                labelCol={{\r\n                    span: 8,\r\n                }}\r\n                wrapperCol={{\r\n                    span: 24,\r\n                }}\r\n                initialValues={{\r\n                    remember: false,\r\n                }}\r\n                layout='vertical'\r\n                // preserve={f}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n            >\r\n                <Form.Item\r\n                    label=\"Title\"\r\n                    name=\"title\"\r\n                    rules={[\r\n                        {\r\n                            required: true,\r\n                            remember: false\r\n                            // message: 'Please input your username!',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <Input\r\n                        type=\"text\"\r\n                        // value={'this.state.title'}\r\n                        autoComplete='off'\r\n                        onChange={(e) => setTitle(e.target.value)}\r\n                    />\r\n                </Form.Item>\r\n\r\n                <style>\r\n                    {`\r\n                    .demo-editor {\r\n                        padding: 0px 10px 0px 10px;\r\n                        border-color: rgba(0,0,0,.1);\r\n                        border-style: solid;\r\n                        border-width: 1px;\r\n                        min-height: 150px\r\n                    }\r\n                    `}\r\n                </style>\r\n                <Form.Item\r\n                    label=\"Description\"\r\n                    name=\"description\"\r\n                    rules={[\r\n                        {\r\n                            required: false,\r\n                            // message: 'Please input your username!',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <Editor\r\n                        editorState={editorState}\r\n                        wrapperClassName=\"demo-wrapper\"\r\n                        editorClassName=\"demo-editor\"\r\n                        onEditorStateChange={setEditorState}\r\n                    />\r\n                </Form.Item>\r\n\r\n                <Form.Item\r\n                    label=\"Tags\"\r\n                    name=\"tags\"\r\n                    rules={[\r\n                        {\r\n                            required: false,\r\n                            // message: 'Please input your username!',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <Select\r\n\r\n                        mode=\"tags\"\r\n                        style={{ width: '100%' }}\r\n                        placeholder=\"Tags Mode\"\r\n                        onChange={(e) => setTags(e)}\r\n                    // onChange={handleChange}\r\n                    >\r\n\r\n                    </Select>,\r\n                </Form.Item>\r\n\r\n                <Dragger\r\n                    style={{\r\n                        marginBottom: 20\r\n                    }}\r\n                    //{...props}\r\n                    multiple\r\n                    beforeUpload={beforeUpload}\r\n                    onRemove={onRemove}\r\n                >\r\n\r\n                    <p className=\"ant-upload-drag-icon\">\r\n                        <InboxOutlined />\r\n                    </p>\r\n                    <p className=\"ant-upload-text\">Click or drag file to this area to upload</p>\r\n                    <p className=\"ant-upload-hint\">\r\n                        Support for a single or bulk upload. Strictly prohibit from uploading company data or other\r\n                        band files\r\n                    </p>\r\n                </Dragger>\r\n                <Form.Item\r\n                    label=\"Due Date\"\r\n                    name=\"due-date\"\r\n                    style={{\r\n                        marginTop: 20\r\n                    }}\r\n                    rules={[\r\n                        {\r\n                            required: false,\r\n                            // message: 'Please input your username!',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <DatePicker\r\n                        style={{\r\n                            width: '100%'\r\n                        }}\r\n                        // onChange={() => alert('val')}\r\n                        onChange={setDueDate}\r\n                    />\r\n                </Form.Item>\r\n                <Form.Item\r\n                    label=\"Assign To...\"\r\n                    name=\"assignees\"\r\n                    rules={[\r\n                        {\r\n                            required: false,\r\n                            // message: 'Please input your username!',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <Select\r\n                        showSearch\r\n                        mode='multiple'\r\n                        // value={this.state.value}\r\n                        placeholder={\"search...\"}\r\n                        // style={this.props.style}\r\n                        // defaultActiveFirstOption={false}\r\n                        // showArrow={false}\r\n                        filterOption={false}\r\n                        onSearch={setQuery}\r\n                        onChange={handleChange}\r\n                    // notFoundContent={\"\"}\r\n                    >\r\n                        {/* <Option key={'1'}>{query}</Option> */}\r\n                        {\r\n                            members.map(doc => <Option key={doc.id}>{`${doc.name} (${doc.email})`}</Option>)\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item\r\n                    label=\"Severity\"\r\n                    name=\"severity\"\r\n                    rules={[\r\n                        {\r\n                            required: false,\r\n                            // message: 'Please input your username!',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <Select\r\n                        showSearch\r\n                        //style={{ width: 200 }}\r\n                        placeholder=\"Search to Select\"\r\n                        optionFilterProp=\"children\"\r\n                        filterOption={(input, option) =>\r\n                            option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                        }\r\n                        filterSort={(optionA, optionB) =>\r\n                            optionA.children.toLowerCase().localeCompare(optionB.children.toLowerCase())\r\n                        }\r\n                        onChange={setSeverity}\r\n                    >\r\n                        <Option value=\"None\">None</Option>\r\n                        <Option value=\"Critical\">Critical</Option>\r\n                        <Option value=\"Major\">Major</Option>\r\n                        <Option value=\"Minor\">Minor</Option>\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item\r\n                    label=\"Reproducibility\"\r\n                    name=\"reproducibility\"\r\n                    rules={[\r\n                        {\r\n                            required: false,\r\n                            // message: 'Please input your username!',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <Select\r\n                        onChange={setReproducibility}\r\n                        showSearch\r\n                        // style={{ width: 200 }}\r\n                        placeholder=\"Search to Select\"\r\n                        optionFilterProp=\"children\"\r\n                        filterOption={(input, option) =>\r\n                            option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                        }\r\n                        filterSort={(optionA, optionB) =>\r\n                            optionA.children.toLowerCase().localeCompare(optionB.children.toLowerCase())\r\n                        }\r\n                    >\r\n                        <Option value=\"Always\">Always</Option>\r\n                        <Option value=\"Sometimes\">Sometimes</Option>\r\n                        <Option value=\"Rarely\">Rarely</Option>\r\n                        <Option value=\"Unable\">Unable</Option>\r\n                        <Option value=\"Never tried\">Never tried</Option>\r\n                        <Option value=\"N/A\">N/A</Option>\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item\r\n                    label=\"Catagory\"\r\n                    name=\"catagory\"\r\n                    rules={[\r\n                        {\r\n                            required: false,\r\n                            // message: 'Please input your username!',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <Select\r\n                        showSearch\r\n                        onChange={setCatagory}\r\n                        //style={{ width: 200 }}\r\n                        placeholder=\"Search to Select\"\r\n                        optionFilterProp=\"children\"\r\n                        filterOption={(input, option) =>\r\n                            option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                        }\r\n                        filterSort={(optionA, optionB) =>\r\n                            optionA.children.toLowerCase().localeCompare(optionB.children.toLowerCase())\r\n                        }\r\n                    >\r\n                        <Option value=\"Security\">Security</Option>\r\n                        <Option value=\"Data Loss\">Data Loss</Option>\r\n                        <Option value=\"Performance\">Performance</Option>\r\n                        <Option value=\"Crash/Hang\">Crash/Hang</Option>\r\n                        <Option value=\"Other Bug\">Other Bug</Option>\r\n                        <Option value=\"UI\">UI</Option>\r\n                        <Option value=\"New Feature\">New Feature</Option>\r\n                        <Option value=\"Enhancement\">Enhancement</Option>\r\n                    </Select>\r\n                </Form.Item>\r\n                <Space\r\n                    style={{\r\n                        width: '100%',\r\n                        display: 'inline-flex',\r\n                        justifyContent: 'flex-end'\r\n                    }}\r\n\r\n                >\r\n                    <Button\r\n                        onClick={props.toggleFunc}\r\n                    >\r\n                        Cancel\r\n                    </Button>\r\n                    <Button\r\n                        htmlType='submit'\r\n\r\n                        type='primary'>\r\n                        Submit\r\n                    </Button>\r\n                </Space>\r\n\r\n            </Form>\r\n\r\n        </div>\r\n\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default withRouter(App);\r\n","import React from 'react';\r\nimport {\r\n    Comment,\r\n    Space, Divider,\r\n    Avatar, Button, List, Typography, message\r\n} from 'antd';\r\nimport moment from 'moment';\r\nimport { EditorState, convertToRaw } from 'draft-js';\r\nimport { Editor as DraftEditor } from 'react-draft-wysiwyg';\r\nimport './../../node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport axios from 'axios';\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\n\r\n\r\nconst { Title } = Typography;\r\n\r\n\r\nconst CommentList = ({ comments }) => (\r\n    <List\r\n        dataSource={comments}\r\n        header={`${comments.length} ${comments.length > 1 ? 'replies' : 'reply'}`}\r\n        itemLayout=\"horizontal\"\r\n        renderItem={props => <Comment  {...props} />}\r\n    />\r\n);\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n    state = {\r\n        comments: [],\r\n        submitting: false,\r\n        value: '',\r\n        editorState: EditorState.createEmpty(),\r\n    };\r\n\r\n    TOKEN = window.localStorage.getItem('token');\r\n\r\n    componentDidMount() {\r\n        this._handleUpdateComments()\r\n    }\r\n\r\n    _handleUpdateComments = async () => {\r\n        try {\r\n            let { data } = await axios.get('/comment', {\r\n                headers: getDefaultHeader(),\r\n                params: {\r\n                    bugId: this.props.bug.id\r\n                }\r\n            });\r\n\r\n            let comments = data.comments.map((item) => ({\r\n                author: item.owner.name,\r\n                key: item.id,\r\n                avatar: 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png',\r\n                content: <div\r\n                    style={{\r\n                        width: 700,\r\n                        minHeight: 50,\r\n                        overflowX: 'auto'\r\n                    }}\r\n                    dangerouslySetInnerHTML={{ __html: item.body }} />,\r\n                datetime: moment(new Date(item.createdAt)).fromNow(),\r\n\r\n            })\r\n            )\r\n            this.setState({\r\n                comments: [...this.state.comments, ...comments].reverse()\r\n            })\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    handleSubmit = async () => {\r\n        if (!this.state.value) return\r\n\r\n        this.setState({ submitting: true });\r\n\r\n        try {\r\n            await axios.post('/comment/', {\r\n                bugId: this.props.bug.id,\r\n                body: this.state.value\r\n            }, {\r\n                headers: getDefaultHeader(),\r\n            })\r\n        } catch (e) {\r\n            if (e.response) {\r\n                console.log(e.response)\r\n            } else {\r\n                console.log(e)\r\n            }\r\n            message.error('Could not send message: ' + getErrorMessage(e))\r\n            return this.setState({ submitting: false })\r\n        }\r\n\r\n\r\n\r\n        this.setState({\r\n            submitting: false,\r\n            value: '',\r\n            comments: [\r\n\r\n                {\r\n                    author: 'Han Solo',\r\n                    avatar: 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png',\r\n                    content: <div\r\n                        style={{\r\n                            width: 700,\r\n                            minHeight: 50,\r\n                            overflowX: 'auto'\r\n                        }}\r\n                        dangerouslySetInnerHTML={{ __html: this.state.value }} />,\r\n                    datetime: moment().fromNow(),\r\n                },\r\n                ...this.state.comments,\r\n            ],\r\n        });\r\n\r\n    };\r\n\r\n    handleChange = e => {\r\n        this.setState({\r\n            value: e.target.value,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const { comments, submitting } = this.state;\r\n\r\n        return (\r\n            <>\r\n                <br />\r\n\r\n                <Space align='center'>\r\n                    <Title\r\n                        style={{\r\n                            margin: 0,\r\n                            marginRight: 10\r\n                        }}\r\n                        level={5}>Discussion</Title>\r\n\r\n\r\n                </Space>\r\n\r\n                <Divider />\r\n                <Comment\r\n                    avatar={\r\n                        <Avatar\r\n                            src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\r\n                            alt=\"Han Solo\"\r\n                        />\r\n                    }\r\n                    content={\r\n                        // <Editor\r\n                        //     onChange={this.handleChange}\r\n                        //     onSubmit={this.handleSubmit}\r\n                        //     submitting={submitting}\r\n                        //     value={value}\r\n                        // />\r\n                        <React.Fragment>\r\n                            <style>\r\n                                {`\r\n                    .demo-editor {\r\n                        padding: 0px 10px 0px 10px;\r\n                        border-color: rgba(0,0,0,.1);\r\n                        border-style: solid;\r\n                        border-width: 1px;\r\n                        min-height: 120px;\r\n                        margin-bottom: 20px;\r\n                    }\r\n                    `}\r\n                            </style>\r\n                            <DraftEditor\r\n                                editorState={this.state.editorState}\r\n                                wrapperClassName=\"demo-wrapper\"\r\n                                editorClassName=\"demo-editor\"\r\n                                onEditorStateChange={(editorState) => {\r\n                                    this.setState({\r\n                                        value: draftToHtml(convertToRaw(editorState.getCurrentContent())),\r\n                                        editorState\r\n                                    })\r\n                                }}\r\n                            />\r\n                            <Button htmlType=\"submit\" loading={submitting} onClick={this.handleSubmit} type=\"primary\">\r\n                                Add Comment\r\n                            </Button>\r\n                        </React.Fragment>\r\n\r\n                    }\r\n                />\r\n                {comments.length > 0 && <CommentList comments={comments} />}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default App;\r\n","import React from 'react';\r\n// import moment from 'moment';\r\nimport {\r\n    Statistic,\r\n    Row,\r\n    Col,\r\n    Tag,\r\n    Button,\r\n\r\n    Switch,\r\n    DatePicker,\r\n    Select,\r\n    message,\r\n} from 'antd';\r\nimport { EditOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\nimport MediaQuery from 'react-responsive';\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\n\r\nconst { Option } = Select;\r\n\r\n\r\nclass BugStats extends React.Component {\r\n    state = {\r\n        editTags: false,\r\n        editDueDate: false,\r\n        editReproducibility: false,\r\n        editSeverity: false,\r\n        editCatagory: false,\r\n        editStatus: false,\r\n        values: { tags: [' '], dueDate: null }\r\n    };\r\n\r\n    toggleValue = (val) => this.setState({ [val]: !this.state[val] })\r\n\r\n    updateStatistic = async (field, value) => {\r\n\r\n        try {\r\n            await axios.put('/bug/' + this.props.bugId, {\r\n                [field]: value\r\n            }, {\r\n                headers: getDefaultHeader(),\r\n\r\n            })\r\n            message.success(`\"${field}\" was updated to \"${value}\"`)\r\n        } catch (e) {\r\n            message.error(\"Error: \" + getErrorMessage(e))\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        let { bug } = this.props;\r\n\r\n        this.setState({\r\n            values: {\r\n                status: bug.status,\r\n                tags: (bug.tags !== '' ? bug.tags.split(',') : []),\r\n                dueDate: (bug.dueDate ? moment(new Date(bug.dueDate)) : null),\r\n                catagory: (bug.catagory ? bug.catagory : undefined),\r\n                severity: (bug.severity ? bug.severity : undefined),\r\n                reproducibility: (bug.reproducibility ? bug.reproducibility : undefined),\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    _forceUpdateBug() {\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <MediaQuery maxWidth={800}>\r\n                {(isMobile) =>\r\n                    <>\r\n                        <Row //gutter={16}\r\n                            gutter={[0, 40]}\r\n                        >\r\n                            <Col span={isMobile ? 12 : 8}>\r\n\r\n                                <Statistic\r\n                                    valueStyle={{\r\n                                        fontSize: 16\r\n                                    }}\r\n\r\n                                    formatter={(val) => {\r\n                                        if (this.state.editStatus) {\r\n                                            return (<Switch\r\n                                                checkedChildren=\"OPEN\"\r\n                                                unCheckedChildren=\"CLOSED\"\r\n\r\n                                                onChange={(checked) => {\r\n                                                    if (checked) {\r\n                                                        //open\r\n                                                        this.setState({\r\n                                                            values: { ...this.state.values, status: 'open' }\r\n                                                        })\r\n                                                    } else {\r\n                                                        //closed\r\n                                                        this.setState({\r\n                                                            values: { ...this.state.values, status: 'closed' }\r\n                                                        })\r\n                                                    }\r\n                                                }}\r\n                                                defaultChecked={(this.state.values.status === 'open' ? true : false)} />\r\n                                            )\r\n                                        } else {\r\n                                            return <Tag color={(this.state.values.status === 'open' ? \"#f50\" : \"#389e0d\")} //\"#f50\"\r\n                                            >{\r\n                                                    ('' + this.state.values.status).toUpperCase()\r\n                                                }</Tag>\r\n                                        }\r\n                                    }}\r\n                                    title={<>\r\n                                        Status\r\n                                        <Button\r\n                                            onClick={() => {\r\n                                                if (this.state.editStatus) {\r\n                                                    this.updateStatistic('status', this.state.values.status)\r\n                                                }\r\n                                                this.toggleValue('editStatus')\r\n                                            }}\r\n                                            type=\"text\"\r\n                                            icon={<EditOutlined />}\r\n                                        />\r\n                                    </>\r\n\r\n                                    }\r\n\r\n                                    value={'OPEN'} />\r\n                            </Col>\r\n                            <Col span={isMobile ? 12 : 8}>\r\n                                <Statistic\r\n                                    valueStyle={{\r\n                                        fontSize: 16\r\n                                    }}\r\n\r\n                                    title={<>\r\n                                        Tags\r\n                                        <Button\r\n                                            onClick={() => {\r\n                                                if (this.state.editTags) {\r\n                                                    this.updateStatistic('tags', this.state.values.tags.join())\r\n                                                }\r\n                                                this.toggleValue('editTags')\r\n                                            }}\r\n                                            type=\"text\"\r\n                                            icon={<EditOutlined />}\r\n                                        />\r\n                                    </>\r\n\r\n                                    }\r\n                                    formatter={(val) => {\r\n                                        if (this.state.editTags) {\r\n                                            return (<Select mode=\"tags\"\r\n                                                onChange={\r\n                                                    (e) => {\r\n                                                        this.setState({\r\n                                                            values: { ...this.state.values, tags: e }\r\n                                                        })\r\n                                                    }\r\n                                                }\r\n\r\n                                                value={this.state.values.tags}\r\n                                                style={{ width: 200 }} placeholder=\"Tags Mode\">\r\n                                                )\r\n                                            </Select>)\r\n                                        } else {\r\n\r\n                                            return this.state.values.tags.map((item) => {\r\n                                                return <Tag color=\"cyan\">{item}</Tag>\r\n                                            })\r\n\r\n                                        }\r\n                                    }}\r\n                                    value={\"URGENT\"} />\r\n\r\n                            </Col>\r\n                            <Col\r\n\r\n                                span={isMobile ? 12 : 8}>\r\n                                <Statistic\r\n                                    valueStyle={{\r\n                                        fontSize: 16\r\n                                    }}\r\n                                    title={<>\r\n                                        Due Date\r\n                                        <Button\r\n                                            onClick={() => {\r\n                                                if (this.state.editDueDate && this.state.values.dueDate) {\r\n\r\n                                                    this.updateStatistic('dueDate', this.state.values.dueDate.toDate().getTime())\r\n                                                }\r\n                                                this.toggleValue('editDueDate')\r\n                                            }}\r\n                                            type=\"text\"\r\n                                            icon={<EditOutlined />}\r\n                                        />\r\n                                    </>\r\n\r\n                                    }\r\n                                    formatter={(val) => {\r\n                                        if (this.state.editDueDate) {\r\n                                            return (<DatePicker\r\n                                                style={{\r\n                                                    // width: 200\r\n                                                }}\r\n                                                value={this.state.values.dueDate}\r\n                                                onChange={(mom) => {\r\n                                                    this.setState({\r\n                                                        values: {\r\n                                                            ...this.state.values,\r\n                                                            dueDate: mom\r\n                                                        }\r\n                                                    })\r\n                                                }} />)\r\n                                        } else {\r\n                                            if (this.state.values.dueDate) {\r\n                                                return this.state.values.dueDate.format('MMM Do YY')\r\n                                            }\r\n                                            return \"N/A\"\r\n                                        }\r\n                                    }}\r\n                                    value={\"Oct 24, 2022\"} />\r\n                            </Col>\r\n\r\n\r\n                            <Col\r\n\r\n                                span={isMobile ? 12 : 8}>\r\n                                <Statistic\r\n                                    valueStyle={{\r\n                                        fontSize: 16\r\n                                    }}\r\n\r\n                                    title={<>\r\n                                        Reproducibility\r\n                                        <Button type=\"text\"\r\n\r\n                                            onClick={() => {\r\n                                                if (this.state.editReproducibility) {\r\n                                                    this.updateStatistic('reproducibility', this.state.values.reproducibility)\r\n                                                }\r\n                                                this.toggleValue('editReproducibility')\r\n                                            }}\r\n                                            icon={<EditOutlined />}\r\n                                        />\r\n                                    </>\r\n\r\n                                    }\r\n                                    formatter={(val) => {\r\n                                        if (this.state.editReproducibility) {\r\n                                            return (<Select\r\n                                                showSearch\r\n                                                onChange={(e) => {\r\n                                                    this.setState({\r\n                                                        values: {\r\n                                                            ...this.state.values,\r\n                                                            reproducibility: e\r\n                                                        }\r\n                                                    })\r\n                                                }}\r\n                                                value={this.state.values.reproducibility}\r\n                                                style={{\r\n                                                    //    width: 200 \r\n                                                }}\r\n                                                placeholder=\"Search to Select\"\r\n                                                optionFilterProp=\"children\"\r\n                                                filterOption={(input, option) =>\r\n                                                    option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                                }\r\n                                                filterSort={(optionA, optionB) =>\r\n                                                    optionA.children.toLowerCase().localeCompare(optionB.children.toLowerCase())\r\n                                                }\r\n                                            >\r\n                                                <Option value=\"Always\">Always</Option>\r\n                                                <Option value=\"Sometimes\">Sometimes</Option>\r\n                                                <Option value=\"Rarely\">Rarely</Option>\r\n                                                <Option value=\"Unable\">Unable</Option>\r\n                                                <Option value=\"Never tried\">Never tried</Option>\r\n                                                <Option value=\"N/A\">N/A</Option>\r\n                                            </Select>)\r\n                                        } else {\r\n                                            return this.state.values.reproducibility\r\n                                        }\r\n                                    }}\r\n                                    value={'Always'} />\r\n\r\n                            </Col>\r\n                            <Col\r\n\r\n                                span={isMobile ? 12 : 8}>\r\n                                <Statistic\r\n                                    valueStyle={{\r\n                                        fontSize: 16\r\n                                    }}\r\n\r\n                                    title={<>\r\n                                        Severity\r\n                                        <Button type=\"text\"\r\n                                            onClick={() => {\r\n                                                if (this.state.editSeverity) {\r\n                                                    this.updateStatistic('severity', this.state.values.severity)\r\n                                                }\r\n                                                this.toggleValue('editSeverity')\r\n                                            }}\r\n                                            icon={<EditOutlined />}\r\n                                        />\r\n                                    </>\r\n\r\n                                    }\r\n\r\n                                    formatter={(val) => {\r\n                                        if (this.state.editSeverity) {\r\n                                            return (\r\n                                                <Select\r\n                                                    showSearch\r\n                                                    style={{\r\n                                                        // width: 200\r\n                                                    }}\r\n                                                    placeholder=\"Search to Select\"\r\n                                                    optionFilterProp=\"children\"\r\n                                                    value={this.state.values.severity}\r\n                                                    onChange={(e) => {\r\n                                                        this.setState({\r\n                                                            values: {\r\n                                                                ...this.state.values,\r\n                                                                severity: e\r\n                                                            }\r\n                                                        })\r\n                                                    }}\r\n                                                    filterOption={(input, option) =>\r\n                                                        option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                                    }\r\n                                                    filterSort={(optionA, optionB) =>\r\n                                                        optionA.children.toLowerCase().localeCompare(optionB.children.toLowerCase())\r\n                                                    }\r\n                                                >\r\n                                                    <Option value=\"None\">None</Option>\r\n                                                    <Option value=\"Critical\">Critical</Option>\r\n                                                    <Option value=\"Major\">Major</Option>\r\n                                                    <Option value=\"Minor\">Minor</Option>\r\n                                                </Select>)\r\n                                        } else {\r\n                                            return this.state.values.severity\r\n                                        }\r\n                                    }}\r\n                                    value={'Major'} />\r\n\r\n                            </Col>\r\n                            <Col\r\n\r\n                                span={isMobile ? 12 : 8}>\r\n                                <Statistic\r\n                                    valueStyle={{\r\n                                        fontSize: 16\r\n                                    }}\r\n\r\n                                    title={<>\r\n                                        Catagory\r\n                                        <Button type=\"text\"\r\n                                            onClick={() => {\r\n                                                if (this.state.editCatagory) {\r\n                                                    this.updateStatistic('catagory', this.state.values.catagory)\r\n                                                }\r\n                                                this.toggleValue('editCatagory')\r\n                                            }}\r\n                                            icon={<EditOutlined />}\r\n                                        />\r\n                                    </>\r\n                                    }\r\n\r\n                                    formatter={(val) => {\r\n                                        if (this.state.editCatagory) {\r\n                                            return (\r\n                                                <Select\r\n                                                    showSearch\r\n                                                    //style={{ width: 200 }}\r\n                                                    placeholder=\"Search to Select\"\r\n                                                    optionFilterProp=\"children\"\r\n                                                    onChange={(e) => {\r\n                                                        this.setState({\r\n                                                            values: {\r\n                                                                ...this.state.values,\r\n                                                                catagory: e\r\n                                                            }\r\n                                                        })\r\n                                                    }}\r\n                                                    filterOption={(input, option) =>\r\n                                                        option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                                                    }\r\n                                                    value={this.state.values.catagory}\r\n                                                    filterSort={(optionA, optionB) =>\r\n                                                        optionA.children.toLowerCase().localeCompare(optionB.children.toLowerCase())\r\n                                                    }\r\n                                                >\r\n                                                    <Option value=\"Security\">Security</Option>\r\n                                                    <Option value=\"Data Loss\">Data Loss</Option>\r\n                                                    <Option value=\"Performance\">Performance</Option>\r\n                                                    <Option value=\"Crash/Hang\">Crash/Hang</Option>\r\n                                                    <Option value=\"Other Bug\">Other Bug</Option>\r\n                                                    <Option value=\"UI\">UI</Option>\r\n                                                    <Option value=\"New Feature\">New Feature</Option>\r\n                                                    <Option value=\"Enhancement\">Enhancement</Option>\r\n                                                </Select>)\r\n                                        } else {\r\n                                            return this.state.values.catagory\r\n                                        }\r\n                                    }}\r\n                                    value={'Crashes/Hang'} />\r\n\r\n                            </Col>\r\n\r\n                            <Col\r\n\r\n                                span={isMobile ? 12 : 8}>\r\n\r\n                                <Statistic\r\n                                    valueStyle={{\r\n                                        fontSize: 16\r\n                                    }}\r\n                                    title={<span style={{\r\n                                        marginTop: 10\r\n                                    }}>\r\n                                        Owner\r\n\r\n                                    </span>\r\n\r\n                                    }\r\n                                    value={this.props.bug.submitter.name} />\r\n                            </Col>\r\n\r\n                            <Col\r\n\r\n                                span={isMobile ? 12 : 8}>\r\n\r\n                                <Statistic\r\n                                    valueStyle={{\r\n                                        fontSize: 16\r\n                                    }}\r\n                                    title='Date Submited'\r\n                                    value={moment(new Date(this.props.bug.createdAt)).format('MMM Do YY')} />\r\n                            </Col>\r\n                        </Row>\r\n                        <br />\r\n\r\n                    </>\r\n                }</MediaQuery>\r\n\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default BugStats;\r\n","import React from 'react';\r\n// import moment from 'moment';\r\nimport {\r\n    Space,\r\n    Input, Avatar, Select,\r\n    Button, Divider, Typography, List, Pagination, Modal, message\r\n} from 'antd';\r\nimport { PlusOutlined } from '@ant-design/icons'\r\nimport axios from 'axios';\r\nimport {\r\n    withRouter,\r\n\r\n} from \"react-router-dom\";\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\n\r\nconst { Title } = Typography;\r\nconst { Option } = Select;\r\n\r\n\r\nclass BugStats extends React.Component {\r\n    state = {\r\n        editAssigned: false,\r\n        assignees: [],\r\n        search: '',\r\n        page: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n        query: '',\r\n        members: [],\r\n        selectedMembers: []\r\n    };\r\n\r\n\r\n    componentDidMount() {\r\n        this.fetchAssignees()\r\n    }\r\n\r\n    TOKEN = window.localStorage.getItem('token');\r\n\r\n    // updates and retrives ALL assignees. _handlePagination takes care of all pagination of array\r\n    fetchAssignees = async () => {\r\n        let { search } = this.state;\r\n\r\n        if (search === '') search = undefined;\r\n        // console.log(search)\r\n        try {\r\n            let { data } = await axios.get('/bug/assignee', {\r\n                headers: getDefaultHeader(),\r\n                params: {\r\n                    bugId: this.props.bug.id,\r\n                    search\r\n                }\r\n            });\r\n\r\n            // console.log(data)\r\n            this.setState({\r\n                assignees: data.users,\r\n                total: data.total\r\n            })\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    paginate = (page, pageSize) => {\r\n        if (page === 0) page = 1;\r\n\r\n        this.setState({\r\n            page,\r\n            pageSize\r\n        })\r\n    }\r\n\r\n    // TODO: only search for users apart of the project\r\n    searchUsers = async () => {\r\n        let results;\r\n        const { query } = this.state;\r\n        try {\r\n            results = await axios.get('/user/search', {\r\n                params: {\r\n                    query: query,\r\n                    projectId: this.props.match.params.projectId,\r\n                    isIn: true\r\n                },\r\n                headers: getDefaultHeader(),\r\n            })\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n\r\n            return\r\n        }\r\n\r\n        //console.log(results.data)\r\n        let newMembers = [];\r\n        let users = results.data.results;\r\n        for (let i = 0; i < users.length; i++) {\r\n            newMembers.push({\r\n                key: users[i].id,\r\n                name: users[i].name,\r\n                email: users[i].email,\r\n                id: users[i].id\r\n            })\r\n        }\r\n        this.setState({\r\n            members: newMembers\r\n        })\r\n    }\r\n\r\n    selectUser = (val) => {\r\n        this.setState({\r\n            selectedMembers: val\r\n        })\r\n    }\r\n\r\n    addAssignees = async () => {\r\n        const { selectedMembers } = this.state;\r\n        try {\r\n            await axios.post('/bug/assignee', {\r\n                assignees: selectedMembers.join(','),\r\n                bugId: this.props.bug.id\r\n            }, {\r\n                headers: getDefaultHeader(),\r\n            })\r\n            this.setState({ editAssigned: false, page: 1 }, this.fetchAssignees)\r\n            message.success('Members added')\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n            message.error(\"Error: \" + getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { page, pageSize, members } = this.state;\r\n        return (\r\n            <div>\r\n                <Space align='center'>\r\n                    <Title\r\n                        style={{\r\n                            margin: 0,\r\n                            marginRight: 10\r\n                        }}\r\n                        level={5}>Assigned To</Title>\r\n\r\n                </Space>\r\n\r\n                <Divider />\r\n                <List\r\n                    size=\"small\"\r\n                    header={<Space>\r\n\r\n                        <Input.Search\r\n                            onChange={(e) => {\r\n                                this.setState({\r\n                                    search: e.target.value\r\n                                }, this.fetchAssignees);\r\n                            }}\r\n                            placeholder=\"search\" style={{ width: 200 }} />\r\n                        <Button\r\n                            icon={<PlusOutlined />}\r\n                            onClick={() => this.setState({ editAssigned: true })} type='primary'>\r\n\r\n                        </Button>\r\n                    </Space>}\r\n                    footer={<div\r\n                        style={{\r\n                            width: '100%',\r\n                            display: 'inline-flex',\r\n                            justifyContent: 'flex-end'\r\n                        }}\r\n                    >\r\n\r\n                        <Pagination\r\n                            size=\"small\"\r\n                            total={this.state.total}\r\n                            current={this.state.page}\r\n                            onChange={this.paginate} showSizeChanger showQuickJumper />\r\n\r\n                    </div>}\r\n                    bordered\r\n                    dataSource={this.state.assignees}\r\n                    renderItem={(item, ind) => {\r\n                        //console.log(ind)\r\n                        if (ind >= (page - 1) * pageSize && ind < (page - 1) * pageSize + pageSize) {\r\n                            return (\r\n                                <List.Item key={item.id ?? ind}>\r\n                                    <Avatar style={{ color: '#f56a00', backgroundColor: '#fde3cf', marginRight: 15 }}>\r\n                                        {item.name.substring(0, 1)}\r\n                                    </Avatar>\r\n                                    {`${item.name.split(' ')[0]} ${(item.name.split(' ')[1] ? item.name.split(' ')[1].substring(0, 1).toUpperCase() + '.' : '')} (${item.email})`}\r\n                                </List.Item>\r\n                            )\r\n                        }\r\n\r\n                        return null\r\n                    }\r\n                    }\r\n                />\r\n\r\n                <Modal title=\"Add More Members...\"\r\n                    visible={this.state.editAssigned}\r\n                    onOk={() => {\r\n                        this.addAssignees()\r\n                        this.fetchAssignees()\r\n                    }} onCancel={() => this.setState({ editAssigned: false })}>\r\n                    <Select\r\n                        showSearch\r\n                        mode='multiple'\r\n                        // value={this.state.value}\r\n                        placeholder={\"search...\"}\r\n                        style={{ width: '100%' }}\r\n                        // defaultActiveFirstOption={false}\r\n                        // showArrow={false}\r\n                        filterOption={false}\r\n                        onSearch={(e) => {\r\n                            this.setState({\r\n                                query: e\r\n                            }, this.searchUsers)\r\n                        }}\r\n                        onChange={this.selectUser}\r\n                    // notFoundContent={\"\"}\r\n                    >\r\n                        {/* <Option key={'1'}>{query}</Option> */}\r\n                        {\r\n                            members.map(doc => <Option key={doc.id}>{`${doc.name} (${doc.email})`}</Option>)\r\n                        }\r\n                    </Select>\r\n                </Modal>\r\n            </div>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(BugStats);\r\n","import React from 'react';\r\n\r\nimport { Button, Divider, } from 'antd';\r\nimport {\r\n    message, Space,\r\n\r\n} from 'antd';\r\nimport {\r\n    EditOutlined\r\n} from '@ant-design/icons';\r\nimport { Typography } from 'antd';\r\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\r\nimport { Editor as DraftEditor } from 'react-draft-wysiwyg';\r\nimport './../../node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport axios from 'axios';\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\nimport DOMPurify from 'dompurify';\r\nconst { Title, Paragraph, } = Typography;\r\n\r\n\r\n\r\nclass BugDescription extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            editDescription: false,\r\n            editorState: EditorState.createWithContent(ContentState.createFromBlockArray(htmlToDraft(this.props.bug.description))),\r\n            description: ''\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            description: this.props.bug.description\r\n        })\r\n        console.log(this.props.bug.description)\r\n    }\r\n\r\n    toggleFunc = (name) => {\r\n        this.setState({\r\n            [name]: !this.state[name]\r\n        })\r\n    }\r\n\r\n    updateDescription = async (text) => {\r\n        try {\r\n            await axios.put('/bug/' + this.props.bug.id, {\r\n                description: this.state.description\r\n            }, {\r\n                headers: getDefaultHeader(),\r\n            });\r\n\r\n            message.success(\"Description was updated!\")\r\n        } catch (e) {\r\n            let message = getErrorMessage(e)\r\n            console.error(message)\r\n            message.error('Error: ' + message)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n\r\n                <Space align='center'>\r\n                    <Title\r\n                        style={{\r\n                            margin: 0,\r\n                            marginRight: 10\r\n                        }}\r\n                        level={5}>Description</Title>\r\n                    <Button shape=\"circle\"\r\n                        onClick={() => {\r\n                            if (this.state.editDescription) {\r\n                                this.updateDescription()\r\n                            }\r\n                            this.toggleFunc('editDescription')\r\n                        }}\r\n                        icon={<EditOutlined />}\r\n                    />\r\n\r\n                </Space>\r\n\r\n                <Divider />\r\n                {\r\n                    this.state.editDescription ?\r\n                        <React.Fragment>\r\n                            <style>\r\n                                {`\r\n            .demo-editor {\r\n                padding: 0px 10px 0px 10px;\r\n                border-color: rgba(0,0,0,.1);\r\n                border-style: solid;\r\n                border-width: 1px;\r\n                min-height: 120px;\r\n                margin-bottom: 20px;\r\n            }\r\n            `}\r\n                            </style>\r\n                            <DraftEditor\r\n                                editorState={this.state.editorState}\r\n                                wrapperClassName=\"demo-wrapper\"\r\n                                editorClassName=\"demo-editor\"\r\n                                onEditorStateChange={(editorState) => {\r\n                                    this.setState({\r\n                                        description: draftToHtml(convertToRaw(editorState.getCurrentContent())),\r\n                                        editorState\r\n                                    })\r\n                                }}\r\n                            />\r\n                            {/* <Button\r\n                                style={{\r\n                                    marginBottom: 30\r\n                                }}\r\n                                onClick={() => this.setState({ editDescription: false })}\r\n                                htmlType=\"submit\" type=\"primary\">\r\n                                Update\r\n                            </Button> */}\r\n                        </React.Fragment> :\r\n                        <Paragraph >\r\n                            <div\r\n                                // style={{ textAlign: 'center' }}\r\n                                dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(this.state.description) }} />\r\n                        </Paragraph>\r\n\r\n                }\r\n                <br />\r\n\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default BugDescription;\r\n","import React from 'react';\r\n\r\nimport { Button, Divider, Upload } from 'antd';\r\nimport {\r\n\r\n    List, message, Space,\r\n\r\n} from 'antd';\r\nimport {\r\n    EditOutlined, InboxOutlined\r\n} from '@ant-design/icons';\r\nimport { Typography } from 'antd';\r\nimport axios from 'axios';\r\nimport { getDefaultHeader, baseUrl } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\n\r\nconst { Title } = Typography;\r\nconst { Dragger } = Upload;\r\n\r\nclass BugDescription extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            editFiles: false,\r\n            files: [],\r\n            filesToRender: []\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        // console.log(this.props.bug.files)\r\n        let tempFiles = this.props.bug.files.map((item) => {\r\n            let tempFile = new File([], item.name)\r\n            tempFile.uid = '' + (new Date()).getTime() + '-' + tempFile.name;\r\n            tempFile.serverId = item.id;\r\n            tempFile.isUploaded = true;\r\n            return tempFile;\r\n        })\r\n        this.setState({\r\n            files: tempFiles\r\n        })\r\n    }\r\n\r\n    toggleFunc = (name) => {\r\n        this.setState({\r\n            [name]: !this.state[name]\r\n        })\r\n    }\r\n    token = window.localStorage.getItem('token');\r\n\r\n    beforeUpload = async (file) => {\r\n\r\n        let formData = new FormData()\r\n        formData.append('files', file);\r\n        // handle uploading\r\n        try {\r\n            let { data } = await axios.post('/file/', formData, {\r\n                headers: {\r\n                    ...(getDefaultHeader()),\r\n                    // 'x-auth-token': this.token,\r\n                    'Content-Type': 'multipart/form-data'\r\n                },\r\n                params: {\r\n                    bugId: this.props.bug.id\r\n                },\r\n                // onUploadProgress: (progress) => console.log(progress)\r\n            })\r\n            file.isUploaded = true;\r\n            // console.log(data)\r\n            let fileId = data.uploadedFiles[0].id;\r\n            file.serverId = fileId;\r\n            message.success(`\"${file.name}\" was uploaded!\"`)\r\n            this.setState({\r\n                files: [...this.state.files, file]\r\n            })\r\n        } catch (e) {\r\n            message.error(\"Error: \" + getErrorMessage(e))\r\n        }\r\n\r\n\r\n        return false;\r\n    }\r\n\r\n    _onFileDelete = async (file) => {\r\n        let { files } = this.state;\r\n        // console.log(\"HEY\")\r\n        for (let i = 0; i < files.length; i++) {\r\n            if (files[i].uid === file.uid) {\r\n                try {\r\n\r\n                    await axios.delete('/file/' + file.serverId, {\r\n                        headers: getDefaultHeader(),\r\n                    })\r\n\r\n                    message.success(`\"${file.name}\" was deleted!`)\r\n                    files.splice(i, 1);\r\n                    this.setState({\r\n                        files\r\n                    })\r\n\r\n                } catch (e) {\r\n                    message.error(\"Error: \" + getErrorMessage(e))\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        // if file was uploaded to server, remove on server\r\n    }\r\n\r\n    _onFileUpload = () => {\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n\r\n                <Space align='center'>\r\n                    <Title\r\n                        style={{\r\n                            margin: 0,\r\n                            marginRight: 10\r\n                        }}\r\n                        level={5}>Files</Title>\r\n                    <Button\r\n                        onClick={() => this.toggleFunc('editFiles')}\r\n                        shape=\"circle\"\r\n                        icon={<EditOutlined />}\r\n                    />\r\n\r\n                </Space>\r\n\r\n                <Divider />\r\n                {\r\n                    this.state.editFiles ?\r\n                        <Dragger\r\n                            style={{\r\n                                marginBottom: 20\r\n                            }}\r\n                            multiple\r\n                            beforeUpload={this.beforeUpload}\r\n                            onRemove={this._onFileDelete}\r\n                            fileList={this.state.files}\r\n                        >\r\n\r\n                            <p className=\"ant-upload-drag-icon\">\r\n                                <InboxOutlined />\r\n                            </p>\r\n                            <p className=\"ant-upload-text\">Click or drag file to this area to upload</p>\r\n                            <p className=\"ant-upload-hint\">\r\n                                Support for a single or bulk upload. Strictly prohibit from uploading company data or other\r\n                                band files\r\n                            </p>\r\n                        </Dragger> :\r\n                        <List\r\n                            bordered\r\n                            size='small'\r\n                            dataSource={this.state.files}\r\n                            renderItem={item => <List.Item key={item.serverId}>\r\n                                <a href={baseUrl + \"/file/\" + item.serverId}>{item.name}</a>\r\n                            </List.Item>}\r\n                        />\r\n\r\n                }\r\n                <br />\r\n\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default BugDescription;\r\n","import React from 'react';\r\nimport BugDissussion from '../../../components/BugDiscussion';\r\nimport BugStats from '../../../components/BugStats';\r\nimport BugAssignedTo from '../../../components/BugAssignedTo';\r\nimport BugDescription from '../../../components/BugDescription';\r\nimport BugFiles from './../../../components/BugFiles';\r\n\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n\r\n                <BugStats bugId={this.props.bug.id} bug={this.props.bug} />\r\n\r\n\r\n                <BugDescription bug={this.props.bug} description={this.props.bug.description} />\r\n\r\n                <BugFiles bug={this.props.bug} />\r\n\r\n                <BugAssignedTo bug={this.props.bug} />\r\n\r\n                <BugDissussion bug={this.props.bug} />\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default App;\r\n","import { List, Popconfirm, Tag } from 'antd'\r\nimport moment from \"moment\"\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nfunction BugList(props) {\r\n    const {\r\n        page,\r\n        totalBugCount,\r\n        _handlePaginationChange,\r\n        bugs,\r\n        isMobile,\r\n        viewBug,\r\n        shareBug,\r\n        deleteBug\r\n    } = props;\r\n\r\n    const actions = item => [\r\n        <a\r\n            style={{\r\n                margin: 10\r\n            }}\r\n            key=\"list-loadmore-edit\"\r\n            onClick={(e) => viewBug(e, item)}>\r\n            view\r\n        </a>,\r\n        <a\r\n            style={{\r\n                margin: 10\r\n            }}\r\n            key=\"list-loadmore-edit\"\r\n            onClick={(e) => shareBug(e, item)}>\r\n            share\r\n        </a>,\r\n        <Popconfirm\r\n            title=\"Are you sure?\"\r\n            onConfirm={() => deleteBug(item.id)}\r\n        >\r\n            <a\r\n\r\n                key=\"list-loadmore-edit\"\r\n                style={{ color: 'red', marginLeft: 10 }}\r\n                onClick={(e) => {\r\n\r\n                    e.preventDefault()\r\n                }}>\r\n                delete\r\n            </a>\r\n        </Popconfirm>\r\n    ]\r\n\r\n\r\n    return (<>\r\n        {isMobile && <style>{`\r\n    #bugg-bugs-list .ant-list-item-action {\r\n        justify-content: space-evenly;\r\n    display: inline-flex;\r\n    width: 100%;\r\n    }\r\n    `}</style>}\r\n        <List\r\n            // className=\"demo-loadmore-list\"\r\n            style={{\r\n                maxWidth: 1000\r\n            }}\r\n            id=\"bugg-bugs-list\"\r\n            pagination={{\r\n                // style={{ float: 'right', marginTop: 20 }}\r\n                current: page,\r\n                // defaultCurrent: 1,\r\n                total: totalBugCount,\r\n                onChange: _handlePaginationChange\r\n            }}\r\n            // loading={initLoading}\r\n            // itemLayout=\"horizontal\"\r\n            itemLayout={isMobile ? 'vertical' : 'horizontal'}\r\n            // loadMore={loadMore}\r\n            dataSource={bugs}\r\n            renderItem={item => (\r\n                <List.Item\r\n                    key={item.id}\r\n                    actions={actions(item)}\r\n\r\n                >\r\n\r\n                    <List.Item.Meta\r\n\r\n                        title={<div style={{\r\n                            display: 'inline'\r\n                        }}>\r\n                            <Tag color={(item.status === 'open' ? \"#f50\" : \"#389e0d\")} //\"#f50\"\r\n                            >{\r\n                                    item.status.toUpperCase()\r\n                                }</Tag>\r\n                            <a href=\"#\" onClick={(e) => viewBug(e, item)}>\r\n                                {item.title}\r\n                            </a>\r\n\r\n                        </div>}\r\n                        description={formatDescription(item.plainTextDescription)}\r\n                    />\r\n                    <div>{'Last modified ' + moment(new Date(item.updatedAt)).fromNow()}</div>\r\n\r\n                </List.Item>\r\n            )}\r\n        />\r\n    </>\r\n    )\r\n}\r\n\r\n// Handle overflow description\r\nfunction formatDescription(str) {\r\n    let len = str.length;\r\n    let maxChar = 100;\r\n    if (len > maxChar) {\r\n        return str.substring(0, maxChar) + '...'\r\n    } else {\r\n        return str\r\n    }\r\n}\r\n\r\nexport default withRouter(BugList)","import axios from 'axios';\r\nimport { getDefaultHeader, baseUrl } from '../../../pages/config';\r\nimport { getErrorMessage } from '../../network-error-handling';\r\n\r\nconst throwError = err => {\r\n    throw new Error(getErrorMessage(err))\r\n}\r\n\r\n/**\r\n * Gets announcement based on announcementId\r\n * @param {string} announcementId\r\n * @returns {Object} Bug\r\n */\r\nconst getAnnouncement = async (announcementId) => {\r\n    try {\r\n        let { data: { announcement } } = await axios.get(baseUrl + '/announcement', {\r\n            headers: getDefaultHeader(),\r\n            params: {\r\n                announcementId\r\n            }\r\n        })\r\n\r\n        return announcement\r\n    } catch (e) {\r\n        throwError(e)\r\n    }\r\n}\r\nlet object = {\r\n    getAnnouncement\r\n};\r\n\r\nexport default object\r\n\r\n","import axios from 'axios';\r\nimport { getDefaultHeader, baseUrl } from './../../../pages/config';\r\nimport { getErrorMessage } from './../../network-error-handling';\r\n\r\nconst throwError = err => {\r\n    throw new Error(getErrorMessage(err))\r\n}\r\n\r\n/**\r\n * Gets bug based on bugId\r\n * @param {string} bugId\r\n * @returns {Object} Bug\r\n */\r\nconst getBug = async (bugId) => {\r\n    try {\r\n        let { data: { bug } } = await axios.get(baseUrl + '/bug/' + bugId, {\r\n            headers: getDefaultHeader()\r\n        })\r\n\r\n        return bug\r\n    } catch (e) {\r\n        throwError(e)\r\n    }\r\n}\r\n\r\nconst deleteBug = async (bugId) => {\r\n    try {\r\n        await axios.delete(baseUrl + '/bug/' + bugId, {\r\n            headers: getDefaultHeader()\r\n        })\r\n\r\n    } catch (e) {\r\n        throwError(e)\r\n    }\r\n}\r\n\r\nexport default {\r\n    getBug,\r\n    deleteBug\r\n}\r\n\r\n","import axios from 'axios';\r\nimport { getDefaultHeader, baseUrl } from '../../../pages/config';\r\nimport { getErrorMessage } from '../../network-error-handling';\r\n\r\n\r\nfunction UserData(obj = {\r\n    name: '',\r\n    email: '',\r\n    id: '',\r\n    iconId: ''\r\n}) {\r\n    this.name = obj.name;\r\n    this.email = obj.email;\r\n    this.id = obj.id;\r\n    this.iconId = obj.iconId\r\n}\r\n\r\nconst throwError = err => {\r\n    throw new Error(getErrorMessage(err))\r\n}\r\n\r\n\r\n/**\r\n * Leave project (only works if use is not owner)\r\n * @param {string} projectId\r\n * @returns \r\n */\r\nconst leaveProject = async (projectId) => {\r\n    try {\r\n        await axios.delete(baseUrl + '/project/member/me', {\r\n            headers: getDefaultHeader(),\r\n            params: {\r\n                projectId\r\n            }\r\n        })\r\n\r\n    } catch (e) {\r\n        throw new Error(getErrorMessage(e))\r\n    }\r\n}\r\nfunction validateEmail(email) {\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(String(email).toLowerCase());\r\n}\r\n\r\n\r\nexport default ({\r\n    leaveProject\r\n})\r\n\r\n","import axios from 'axios';\r\nimport { getDefaultHeader, baseUrl } from '../../../pages/config';\r\nimport { getErrorMessage } from '../../network-error-handling';\r\n\r\n\r\n\r\nconst throwError = err => {\r\n    throw new Error(getErrorMessage(err))\r\n}\r\n\r\n/**\r\n * Gets all conversations\r\n * @returns {Array}\r\n */\r\nconst getConversations = async () => {\r\n    try {\r\n\r\n\r\n        let { data: { conversations } } = await axios.get(baseUrl + '/conversation/all', {\r\n            headers: getDefaultHeader()\r\n        })\r\n\r\n        return conversations\r\n\r\n    } catch (e) {\r\n        throwError(e)\r\n    }\r\n}\r\n\r\nconst readAllMessages = async (conversationId) => {\r\n    try {\r\n        await axios.patch(baseUrl + '/message/read/' + conversationId, {}, {\r\n            headers: getDefaultHeader()\r\n        })\r\n    } catch (e) {\r\n        throwError(e)\r\n    }\r\n}\r\n\r\nexport default ({\r\n    getConversations,\r\n    readAllMessages\r\n})\r\n\r\n","import axios from 'axios';\r\nimport { getDefaultHeader, baseUrl } from '../../../pages/config';\r\nimport { getErrorMessage } from '../../network-error-handling';\r\n\r\n\r\nconst throwError = err => {\r\n    throw new Error(getErrorMessage(err))\r\n}\r\n\r\n/**\r\n * Gets all\r\n * @returns {Number}\r\n */\r\nconst getUnreadNotifications = async () => {\r\n    try {\r\n        let { data: { totalUnreadNotifcations } } = await axios.get(baseUrl + '/notification/all', {\r\n            headers: getDefaultHeader(),\r\n            params: {\r\n                limit: 0,\r\n                skip: 0\r\n            }\r\n        })\r\n\r\n        return totalUnreadNotifcations\r\n\r\n    } catch (e) {\r\n        throwError(e)\r\n    }\r\n}\r\n\r\n\r\nexport default ({\r\n    getUnreadNotifications\r\n})\r\n\r\n","import axios from 'axios';\r\nimport { getErrorMessage } from './../../network-error-handling'\r\nimport { baseUrl, getDefaultHeader } from './../../../pages/config';\r\n\r\nfunction UserData(obj = {\r\n    name: '',\r\n    email: '',\r\n    id: '',\r\n    iconId: ''\r\n}) {\r\n    this.name = obj.name;\r\n    this.email = obj.email;\r\n    this.id = obj.id;\r\n    this.iconId = obj.iconId\r\n}\r\n\r\nconst throwError = err => {\r\n    throw new Error(getErrorMessage(err))\r\n}\r\n\r\nconst getMe = async () => {\r\n    try {\r\n        let { data } = await axios.get(baseUrl + '/user/me', {\r\n            headers: getDefaultHeader()\r\n        })\r\n        const { id, name, email, iconId } = data.user;\r\n        let user = {\r\n            id, name, email, iconId\r\n        }\r\n        return new UserData(user)\r\n    } catch (e) {\r\n        throw new Error(getErrorMessage(e))\r\n    }\r\n}\r\nfunction validateEmail(email) {\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(String(email).toLowerCase());\r\n}\r\n\r\n/**\r\n * updates user (name or email ONLY)\r\n * @param {string} field \r\n * @param {string} value \r\n * @returns {UserData} updated user\r\n */\r\nconst updateUser = async (field, value) => {\r\n    if (field === 'email' && !validateEmail(value)) {\r\n        throw new Error('Email is invalid')\r\n    }\r\n    try {\r\n        let { data: { user } } = await axios.put(baseUrl + '/user/update', {\r\n            [field]: value\r\n        }, {\r\n            headers: getDefaultHeader()\r\n        });\r\n\r\n        return new UserData(user)\r\n    } catch (e) {\r\n        throwError(e)\r\n    }\r\n}\r\n\r\n/**\r\n * Updates password, MUST SET TOKEN AFTER THIS\r\n * @param {string} password current password\r\n * @param {string} newPassword new password\r\n * @returns {string} token\r\n */\r\nconst updatePassword = async (password, newPassword) => {\r\n    try {\r\n        let { data } = await axios.patch(baseUrl + '/user/password', {\r\n            password,\r\n            newPassword\r\n        }, {\r\n            headers: getDefaultHeader()\r\n        });\r\n        // console.log(data)\r\n        return data.token\r\n    } catch (e) {\r\n        throwError(e)\r\n    }\r\n}\r\n/**\r\n * Returns user avatar icon based on user id. Returns logged in user id by \r\n * default\r\n * @param {string} id\r\n * @returns {string} iconId\r\n */\r\nconst getUserIconUri = async (id) => {\r\n    try {\r\n        let { iconId } = await getMe();\r\n        if (iconId) {\r\n            return baseUrl + '/user/icon/' + iconId\r\n        } else {\r\n            return ''\r\n        }\r\n    } catch (e) {\r\n        throwError(e);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Uploads user avatar\r\n * @param {FormData} formData attatch 1 icon to \"icon\" \r\n */\r\nconst uploadUserIcon = async (formData) => {\r\n    try {\r\n        if (!formData) throw new Error('Must have formData')\r\n\r\n        await axios.post(baseUrl + '/user/icon', formData, {\r\n            headers: {\r\n                ...(getDefaultHeader()),\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        });\r\n\r\n    } catch (e) {\r\n        throwError(e)\r\n    }\r\n}\r\n\r\nlet obj = {\r\n    getMe,\r\n    updateUser,\r\n    updatePassword,\r\n    getUserIconUri,\r\n    uploadUserIcon\r\n}\r\n\r\nexport {\r\n    getMe,\r\n    updateUser,\r\n    updatePassword,\r\n    getUserIconUri,\r\n    uploadUserIcon\r\n};\r\nexport default obj;\r\n\r\n","import axios from 'axios';\r\nimport Announcement from './bugg-services/Announcement/index';\r\nimport Bug from './bugg-services/Bug/index';\r\nimport Project from './bugg-services/Project/index';\r\nimport Message from './bugg-services/Message/index';\r\nimport Notification from './bugg-services/Notification/index';\r\nimport User from './bugg-services/User/index';\r\nimport { getErrorMessage } from './network-error-handling';\r\nimport { getDefaultHeader, baseUrl } from './../pages/config'\r\n\r\nfunction UserData(obj = {\r\n    name: '',\r\n    email: '',\r\n    id: ''\r\n}) {\r\n    this.name = obj.name;\r\n    this.email = obj.email;\r\n    this.id = obj.id;\r\n}\r\n\r\nconst getMe = async () => {\r\n    try {\r\n        let { data } = await axios.get(baseUrl + '/user/me', {\r\n            headers: getDefaultHeader()\r\n        })\r\n        const { id, name, email } = data.user;\r\n        let user = {\r\n            id, name, email\r\n        }\r\n        return new UserData(user)\r\n    } catch (e) {\r\n        throw new Error(getErrorMessage(e))\r\n    }\r\n}\r\n\r\n\r\nlet bugg = {\r\n    /**\r\n     * Gets user info from server\r\n     * @returns {UserData} user\r\n     */\r\n    getMe,\r\n    User,\r\n    Notification,\r\n    Message,\r\n    Bug,\r\n    Announcement,\r\n    Project\r\n}\r\n\r\n\r\nexport {\r\n    getMe,\r\n    User,\r\n    Notification,\r\n    Message,\r\n    Bug,\r\n    Announcement,\r\n    Project\r\n}\r\nexport default bugg;\r\n\r\n","import React from 'react';\r\nimport {\r\n    withRouter,\r\n\r\n} from \"react-router-dom\";\r\n\r\nimport CreateBug from './../../../components/CreateBug';\r\nimport { Button, message, Modal, notification } from 'antd';\r\nimport {\r\n    List, Skeleton,\r\n    Menu, Dropdown, Switch as AntSwitch, Space, Drawer,\r\n    Input, Pagination,\r\n    Popconfirm\r\n} from 'antd';\r\nimport {\r\n    CalendarOutlined,\r\n    DownOutlined,\r\n    FontSizeOutlined,\r\n    FileSyncOutlined,\r\n\r\n} from '@ant-design/icons';\r\nimport ViewBug from './ViewBug';\r\nimport axios from 'axios';\r\nimport MediaQuery from 'react-responsive'\r\nimport BugList from './../../../components/BugList';\r\nimport bugg from '../../../libraries/bugg';\r\nimport { getErrorMessage, logErrorMessage } from '../../../libraries/network-error-handling';\r\nimport { getDefaultHeader, staticServerUrl } from '../../config';\r\n\r\nconst { Search } = Input;\r\n\r\n\r\n\r\nconst selectedColor = '#1890ff';\r\n\r\n\r\n\r\nconst menu = (props) => (\r\n    <Menu\r\n\r\n        onClick={props.handleChange}>\r\n        <Menu.Item key=\"1\"\r\n\r\n            icon={<CalendarOutlined style={{\r\n                color: props.selectedSort === '1' ? selectedColor : 'unset'\r\n            }}\r\n            />}\r\n        >\r\n            <span style={{\r\n                color: props.selectedSort === '1' ? selectedColor : 'unset'\r\n            }}>\r\n                Upload Date\r\n            </span>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"2\" icon={<FontSizeOutlined style={{\r\n            color: props.selectedSort === '2' ? selectedColor : 'unset'\r\n        }} />}>\r\n            <span style={{\r\n                color: props.selectedSort === '2' ? selectedColor : 'unset'\r\n            }}>\r\n                Title\r\n            </span>\r\n\r\n        </Menu.Item>\r\n        <Menu.Item key=\"3\" icon={<FileSyncOutlined style={{\r\n            color: props.selectedSort === '3' ? selectedColor : 'unset'\r\n        }} />}>\r\n            <span style={{\r\n                color: props.selectedSort === '3' ? selectedColor : 'unset'\r\n            }}>\r\n                Last Modified\r\n            </span>\r\n\r\n        </Menu.Item>\r\n    </Menu>\r\n);\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            toggleCreatePopup: false,\r\n            toggleViewBugPopup: false,\r\n            toggleDrawer: false,\r\n            totalBugCount: 0,\r\n            pageSize: 10,\r\n            searchQuery: '',\r\n            sortBy: '',\r\n            page: 1,\r\n            bugs: [],\r\n            selectedSort: '0',\r\n            checked: true,\r\n            selectedBug: null,\r\n            selectedBugTitle: '',\r\n            search: ''\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchBugs()\r\n        this.handleActionUri()\r\n\r\n    }\r\n\r\n    _handlePaginationChange = (page, pageSize) => {\r\n        // console.log({ page, pageSize, statePage: this.state.page, statePageSize: this.state.pageSize })\r\n        if (page === this.state.page && pageSize === this.state.pageSize) return;\r\n        this.setState({\r\n            page,\r\n            pageSize\r\n        }, this.fetchBugs)\r\n\r\n\r\n    }\r\n\r\n    deleteBug = async (bugId) => {\r\n        try {\r\n            await bugg.Bug.deleteBug(bugId);\r\n            this.fetchBugs()\r\n            message.success(\"Bug was deleted\")\r\n        } catch (e) {\r\n            message.error('Bug could not be deleted: ' + getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    fetchBugs = async (isSearchUpdated) => {\r\n        let id = this.props.location.pathname.split('/');\r\n        id = id[id.length - 1];\r\n        let { pageSize, page, search } = this.state;\r\n\r\n        if (isSearchUpdated) {\r\n            page = 1\r\n        }\r\n\r\n        let order;\r\n        let sortBy;\r\n        let { selectedSort, checked } = this.state;\r\n        if (selectedSort === '1') {\r\n            sortBy = 'upload-date'\r\n        } else if (selectedSort === '2') {\r\n            sortBy = 'title'\r\n        } else if (selectedSort === '3') {\r\n            sortBy = 'last-modified'\r\n        }\r\n        if (selectedSort !== '0') {\r\n            if (checked) {\r\n                order = 'ASC'\r\n            } else {\r\n                order = 'DESC'\r\n            }\r\n        }\r\n\r\n        try {\r\n            let { data } = await axios.get('/bug/all', {\r\n                headers: getDefaultHeader(),\r\n                params: {\r\n                    projectId: id,\r\n                    limit: pageSize,\r\n                    skip: pageSize * (page - 1),\r\n                    search,\r\n                    sortBy,\r\n                    order\r\n                }\r\n            });\r\n            //console.log(data)\r\n            this.setState({\r\n                bugs: data.bugs,\r\n                totalBugCount: data.total,\r\n                page\r\n            })\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Opens bug based on bug Id (fetches from server)\r\n     * @param {string} bugId \r\n     */\r\n    openBug = async (bugId) => {\r\n        try {\r\n            let bug = await bugg.Bug.getBug(bugId);\r\n            if (!bug) throw new Error('Bug not found')\r\n            this.props.history.push(this.props.location.pathname)\r\n            this.setState({\r\n                selectedBug: bug,\r\n                toggleDrawer: true,\r\n                selectedBugTitle: bug.title\r\n            })\r\n        } catch (e) {\r\n            notification.error({\r\n                message: getErrorMessage(e)\r\n            })\r\n        }\r\n    }\r\n\r\n    handleActionUri = () => {\r\n        const { location } = this.props;\r\n        let query = new URLSearchParams(location.search)\r\n        if (query.get('action') === 'OPEN_BUG' && query.get('bugId') !== null) {\r\n            this.openBug(query.get('bugId'))\r\n        }\r\n    }\r\n\r\n    toggleFunc = (name) => {\r\n        this.setState({\r\n            [name]: !this.state[name]\r\n        })\r\n    }\r\n\r\n    _handleSortChange = (obj) => {\r\n        //console.log(obj)\r\n        if (obj.key === this.state.selectedSort) {\r\n            this.setState({\r\n                selectedSort: '0',\r\n                page: 1\r\n            }, this.fetchBugs)\r\n        } else {\r\n            this.setState({\r\n                selectedSort: obj.key,\r\n                page: 1\r\n            }, this.fetchBugs)\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const locationChanged = this.props.location !== prevProps.location;\r\n        if (locationChanged) {\r\n            let id = this.props.location.pathname.split('/');\r\n            id = id[id.length - 1];\r\n            console.log('LOCATION CHANGED')\r\n            this.setState({\r\n                search: '',\r\n                page: 1\r\n            }, this.fetchBugs)\r\n\r\n            // parse action from url\r\n            this.handleActionUri()\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        var listData = [];\r\n\r\n        for (let i = 0; i < 10; i++) {\r\n            listData.push({ bugId: 'y938cbu9', title: 'Videos will not play', state: 'priority', loading: false })\r\n        }\r\n        return (\r\n            <MediaQuery maxWidth={800}>\r\n                {(isMobile) =>\r\n                    <div>\r\n                        <div style={{\r\n                            marginBottom: 20,\r\n                            gap: 6,\r\n                            display: 'flex',\r\n                            flexWrap: 'wrap'\r\n                        }}>\r\n                            <Button\r\n\r\n                                type=\"primary\" onClick={() => this.toggleFunc('toggleCreatePopup')}>Submit New</Button>\r\n                            <Button\r\n                                onClick={this.fetchBugs}\r\n                            >\r\n                                Refresh\r\n                            </Button>\r\n\r\n                            <Search\r\n                                value={this.state.search}\r\n                                placeholder=\"Search\"\r\n                                onChange={(e) => {\r\n                                    this.setState({\r\n                                        search: e.target.value\r\n                                    }, () => this.fetchBugs(true))\r\n                                }}\r\n                                onSearch={(e) => {\r\n                                    this.fetchBugs(true)\r\n                                }} style={{ width: 200 }} />\r\n\r\n                            <Dropdown overlay={menu({\r\n                                selectedSort: this.state.selectedSort,\r\n                                handleChange: this._handleSortChange\r\n                            })}>\r\n                                <Button>\r\n                                    Sort By <DownOutlined />\r\n                                </Button>\r\n                            </Dropdown>\r\n                            {\r\n                                this.state.selectedSort !== '0' ?\r\n                                    <AntSwitch\r\n                                        checkedChildren=\"ASC\"\r\n                                        unCheckedChildren=\"DESC\"\r\n                                        defaultChecked\r\n                                        onChange={(checked) => {\r\n\r\n                                            this.setState({\r\n                                                page: 1,\r\n                                                checked\r\n                                            }, this.fetchBugs)\r\n\r\n                                        }}\r\n                                    />\r\n                                    : null\r\n                            }\r\n\r\n                        </div>\r\n\r\n                        <Modal\r\n                            destroyOnClose\r\n                            title=\"Submit New Bug\"\r\n                            visible={this.state.toggleCreatePopup}\r\n                            width={900}\r\n                            footer={null}\r\n                            onCancel={() => this.toggleFunc('toggleCreatePopup')}>\r\n                            <CreateBug\r\n                                _handleListUpdate={this.fetchBugs}\r\n                                toggleFunc={() => this.toggleFunc('toggleCreatePopup')}\r\n                            />\r\n                        </Modal>\r\n\r\n                        {\r\n                            // Bug list\r\n                        }\r\n                        <div style={{\r\n                            marginRight: isMobile ? 10 : 64\r\n                        }}>\r\n\r\n\r\n                            <BugList\r\n                                page={this.state.page}\r\n                                totalBugCount={this.state.totalBugCount}\r\n                                _handlePaginationChange={this._handlePaginationChange}\r\n                                bugs={this.state.bugs}\r\n                                isMobile={isMobile}\r\n                                viewBug={(e, item) => {\r\n                                    this.setState({\r\n                                        toggleDrawer: true,\r\n                                        selectedBugTitle: item.title,\r\n                                        selectedBug: item\r\n                                    })\r\n                                    e.preventDefault()\r\n                                }}\r\n                                shareBug={async (e, item) => {\r\n                                    e.preventDefault()\r\n                                    let textToCopy = staticServerUrl + '/dashboard/projects/' + item.project + '?action=OPEN_BUG&bugId=' + item.id;\r\n                                    if (navigator.clipboard) {\r\n                                        await navigator.clipboard.writeText(textToCopy);\r\n                                        message.success('Link copied to clipboard!')\r\n                                    } else {\r\n                                        window.Clipboard.copy(textToCopy)\r\n                                        message.success('Link copied to clipboard!')\r\n                                    }\r\n\r\n                                }}\r\n                                deleteBug={this.deleteBug}\r\n\r\n                            />\r\n\r\n                        </div>\r\n                        <Drawer\r\n                            width={isMobile ? '100%' : 800}\r\n                            title={this.state.selectedBugTitle}\r\n                            placement=\"right\"\r\n                            closable={true}\r\n                            onClose={() => {\r\n                                this.fetchBugs();\r\n                                this.setState({ toggleDrawer: false })\r\n                            }}\r\n                            visible={this.state.toggleDrawer}\r\n                            destroyOnClose\r\n                        >\r\n                            <ViewBug bug={this.state.selectedBug} />\r\n                        </Drawer>\r\n\r\n\r\n                    </div>\r\n                }\r\n            </MediaQuery>\r\n        );\r\n    }\r\n}\r\n\r\n// Safari copy to clipboard fix\r\nwindow.Clipboard = (function (window, document, navigator) {\r\n    var textArea,\r\n        copy;\r\n\r\n    function isOS() {\r\n        return navigator.userAgent.match(/ipad|iphone/i);\r\n    }\r\n\r\n    function createTextArea(text) {\r\n        textArea = document.createElement('textArea');\r\n        textArea.value = text;\r\n        document.body.appendChild(textArea);\r\n    }\r\n\r\n    function selectText() {\r\n        var range,\r\n            selection;\r\n\r\n        if (isOS()) {\r\n            range = document.createRange();\r\n            range.selectNodeContents(textArea);\r\n            selection = window.getSelection();\r\n            selection.removeAllRanges();\r\n            selection.addRange(range);\r\n            textArea.setSelectionRange(0, 999999);\r\n        } else {\r\n            textArea.select();\r\n        }\r\n    }\r\n\r\n    function copyToClipboard() {\r\n        document.execCommand('copy');\r\n        document.body.removeChild(textArea);\r\n    }\r\n\r\n    copy = function (text) {\r\n        createTextArea(text);\r\n        selectText();\r\n        copyToClipboard();\r\n    };\r\n\r\n    return {\r\n        copy: copy\r\n    };\r\n})(window, document, navigator);\r\n\r\n\r\nexport default withRouter(App);\r\n","import { useState } from 'react';\r\nimport { Form, Button, Input, Space, message } from 'antd'\r\nimport { EditorState, convertToRaw } from 'draft-js';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport axios from 'axios';\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\n\r\nfunction CreateAnnouncement(props) {\r\n    const [editorState, setEditorState] = useState(EditorState.createEmpty())\r\n    // const [title, setTitle] = useState('');\r\n    const [form] = Form.useForm();\r\n\r\n    const onFormSubmit = async (vals) => {\r\n\r\n        let title = vals.title;\r\n        let body = draftToHtml(convertToRaw(editorState.getCurrentContent()));\r\n\r\n        try {\r\n            await axios.post('/announcement', {\r\n                projectId: props.project.id,\r\n                title,\r\n                body\r\n            }, {\r\n                headers: getDefaultHeader()\r\n            })\r\n            message.success('Announcement was created')\r\n            props.closeModal()\r\n            props.updateList()\r\n            // TODO, refresh list on create\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n            message.error('Error: ' + getErrorMessage(e))\r\n        }\r\n\r\n    }\r\n\r\n    return (<div>\r\n\r\n        <Space direction='vertical' style={{ width: '100%' }}>\r\n            <Form\r\n                layout='vertical'\r\n                onFinish={onFormSubmit}\r\n                form={form}\r\n            >\r\n                <Form.Item\r\n                    label=\"Title\"\r\n                    name=\"title\"\r\n                    rules={[\r\n                        {\r\n                            required: true,\r\n                            message: 'Please add a title',\r\n                        },\r\n                    ]}\r\n                >\r\n                    <Input\r\n                        type=\"text\" />\r\n                </Form.Item>\r\n                <style>\r\n                    {`\r\n                    .demo-editor {\r\n                        padding: 0px 10px 0px 10px;\r\n                        border-color: rgba(0,0,0,.1);\r\n                        border-style: solid;\r\n                        border-width: 1px;\r\n                        min-height: 150px\r\n                    }\r\n                    `}\r\n                </style>\r\n                <Form.Item\r\n                    label=\"Body\"\r\n                    name=\"body\"\r\n\r\n                >\r\n                    <Editor\r\n                        editorState={editorState}\r\n                        wrapperClassName=\"demo-wrapper\"\r\n                        editorClassName=\"demo-editor\"\r\n                        onEditorStateChange={setEditorState}\r\n                    />\r\n                </Form.Item>\r\n\r\n\r\n                <Space style={{\r\n                    width: '100%',\r\n                    marginTop: 20,\r\n                    display: 'inline-flex',\r\n                    justifyContent: 'flex-end'\r\n                }}>\r\n                    <Button onClick={props.closeModal}>\r\n                        Cancel\r\n                    </Button>\r\n                    <Button\r\n                        htmlType='submit'\r\n                        type='primary'>\r\n                        Create\r\n                    </Button>\r\n                </Space>\r\n            </Form>\r\n\r\n\r\n\r\n\r\n\r\n        </Space>\r\n\r\n    </div>\r\n\r\n    );\r\n}\r\n\r\n\r\nexport default CreateAnnouncement;\r\n","import React from 'react';\r\nimport {\r\n    Button,\r\n    Space,\r\n    Menu,\r\n\r\n    Divider,\r\n    Empty,\r\n    Avatar,\r\n    List,\r\n    Tag,\r\n    Input,\r\n    Modal,\r\n\r\n    Spin,\r\n    notification,\r\n    Drawer\r\n} from 'antd';\r\nimport {\r\n    withRouter,\r\n\r\n} from \"react-router-dom\";\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport CreateAnnouncement from '../../../components/CreateAnnouncement';\r\nimport axios from 'axios';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport moment from 'moment';\r\nimport MediaQuery from 'react-responsive';\r\nimport bugg from '../../../libraries/bugg';\r\nimport { getErrorMessage, logErrorMessage } from '../../../libraries/network-error-handling';\r\nimport { getDefaultHeader } from '../../config';\r\n\r\n\r\n\r\nconst { Search } = Input;\r\n\r\nfunction Message(props) {\r\n    if (props.announcement === null) return null;\r\n    return (<><div style={{\r\n        display: 'inline-flex',\r\n        alignItems: 'center'\r\n    }}>\r\n        <Avatar size={64}\r\n            style={{\r\n                marginRight: 20\r\n            }}\r\n            icon={<UserOutlined />} />\r\n        <span>\r\n            <p style={{\r\n                margin: 0,\r\n                fontSize: 18\r\n            }}>\r\n                <b>{props.announcement.submitter.name}</b>\r\n            </p>\r\n            <p style={{\r\n                margin: 0\r\n            }}>\r\n                Director\r\n            </p>\r\n        </span>\r\n        <span>\r\n            <Button type=\"text\" style={{\r\n                color: '#1890ff',\r\n                marginLeft: 20\r\n            }}>Reply</Button>\r\n        </span>\r\n    </div>\r\n        <Divider />\r\n        <h1>\r\n            {props.announcement.title}\r\n        </h1>\r\n        <p\r\n            dangerouslySetInnerHTML={{ __html: props.announcement.body }}\r\n            style={{ maxWidth: 700 }}>\r\n\r\n        </p></>\r\n    )\r\n}\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isAuthed: false,\r\n            createAnnouncement: false,\r\n            selectedAnnouncement: null,\r\n            announcements: [],\r\n            total: 0,\r\n            loading: false,\r\n            search: '',\r\n            sortBy: '',\r\n            hasMore: true,\r\n            firstLoad: true\r\n        };\r\n\r\n    }\r\n\r\n    // Fetch initial annoncements and data\r\n    async componentDidMount() {\r\n        // await (new Promise((res) => this.setState({ loading: true }, res)))\r\n        // await this.fetchAndSetAnnouncements();\r\n        // this.setState({ loading: false })\r\n        this.handleOpenAnnouncement()\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const locationChanged = this.props.location !== prevProps.location;\r\n        if (locationChanged) {\r\n            this.fetchAndSetAnnouncements(true)\r\n            //this.setState({selectedAnnouncement: null}, )\r\n            this.handleOpenAnnouncement()\r\n\r\n        }\r\n        let uriProjectId = this.props.location.pathname.split('/');\r\n        uriProjectId = uriProjectId[uriProjectId.length - 1]\r\n        if (this.state.selectedAnnouncement && uriProjectId !== this.state.selectedAnnouncement.project) {\r\n            this.setState({ selectedAnnouncement: null })\r\n        }\r\n    }\r\n\r\n    formatName = (name) => {\r\n        var nameSegments = name.split(' ');\r\n        let shortHandName = nameSegments[0];\r\n\r\n        if (nameSegments[1]) {\r\n            shortHandName += ' ' + nameSegments[1].substring(0, 1).toUpperCase() + '.'\r\n        }\r\n\r\n        return shortHandName\r\n    }\r\n\r\n    handleOpenAnnouncement = async () => {\r\n        const { location } = this.props;\r\n        let query = new URLSearchParams(location.search)\r\n        if (query.get('action') === 'OPEN_ANNOUNCEMENT' && query.has('announcementId')) {\r\n            try {\r\n\r\n                let announcement = await bugg.Announcement.getAnnouncement(query.get('announcementId'));\r\n\r\n                if (!announcement) throw new Error('Announcement not found')\r\n\r\n                this.props.history.push(location.pathname);\r\n\r\n                this.setState({\r\n                    selectedAnnouncement: announcement\r\n                })\r\n                this.fetchAndSetAnnouncements()\r\n            } catch (e) {\r\n                notification.error({\r\n                    message: getErrorMessage(e)\r\n                })\r\n            }\r\n        } else {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // fetch announcemnents, set data, and total that match the query\r\n    // will append new announcemnts\r\n    // DOES NOT CHANGE LOADING STATE\r\n    // Will query for 20 at a time\r\n    fetchAndSetAnnouncements = async (resetList) => {\r\n        // await (new Promise((res) => setTimeout(res, 2000)))\r\n        const { announcements, search, sortBy } = this.state\r\n        let skip = announcements.length;\r\n        if (resetList) {\r\n            skip = 0;\r\n            // await (new Promise((res) => this.setState({ hasMore: true }, res)))\r\n        }\r\n        const limit = 5;\r\n\r\n        try {\r\n            let uriProjectId = this.props.location.pathname.split('/');\r\n            uriProjectId = uriProjectId[uriProjectId.length - 1]\r\n            let { data } = await axios.get('/announcement/', {\r\n                headers: getDefaultHeader(),\r\n                params: {\r\n                    projectId: uriProjectId,\r\n                    limit,\r\n                    skip,\r\n                    search,\r\n                    sortBy\r\n                }\r\n            });\r\n            console.log(data);\r\n            let newAnnouncements;\r\n\r\n            if (resetList) {\r\n                newAnnouncements = data.announcements\r\n            } else {\r\n                newAnnouncements = [...announcements, ...data.announcements]\r\n            }\r\n            this.setState({\r\n                total: data.total,\r\n                announcements: newAnnouncements,\r\n                hasMore: true\r\n            })\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n    onSearch = async (search) => {\r\n        let resetList = false;\r\n        if (search !== this.state.search) resetList = true;\r\n\r\n        this.setState({\r\n            search,\r\n        }, () => this.fetchAndSetAnnouncements(resetList))\r\n    }\r\n\r\n    handleInfiniteLoad = async () => {\r\n        // console.log('EXEC')\r\n        let { announcements, total, firstLoad } = this.state;\r\n\r\n        this.setState({ loading: true })\r\n        console.log('State: ')\r\n        console.log(this.state)\r\n        if (announcements.length === total && firstLoad === false) {\r\n            // message.warning('All announcements are loaded')\r\n            this.setState({\r\n                hasMore: false,\r\n                loading: false\r\n            })\r\n            return\r\n        }\r\n        console.log('EXEC')\r\n        await this.fetchAndSetAnnouncements();\r\n        this.setState({\r\n            loading: false,\r\n            firstLoad: false\r\n        })\r\n    }\r\n\r\n    toggleState = (name) => this.setState({ [name]: !this.state[name] })\r\n\r\n    render() {\r\n        return (\r\n            <MediaQuery maxWidth={800}>\r\n                {(isMobile) =>\r\n                    <div>\r\n\r\n                        <Modal\r\n                            title=\"Create New Announcement\"\r\n                            visible={this.state.createAnnouncement}\r\n                            destroyOnClose\r\n                            footer={null}\r\n                            style={{\r\n                                width: isMobile ? '90%' : 800\r\n                            }}\r\n                            //width={800}\r\n                            onCancel={() => this.toggleState('createAnnouncement')}\r\n                            onOk={() => this.toggleState('createAnnouncement')}>\r\n                            <CreateAnnouncement\r\n                                project={this.props.project}\r\n                                closeModal={() => this.toggleState('createAnnouncement')}\r\n                                updateList={() => this.fetchAndSetAnnouncements(true)}\r\n                            />\r\n                        </Modal>\r\n                        <div style={{\r\n                            marginBottom: 20,\r\n                            gap: 6,\r\n                            display: 'flex',\r\n                            flexWrap: 'wrap'\r\n                        }}>\r\n                            <Button\r\n                                onClick={() => this.toggleState('createAnnouncement')}\r\n                                type='primary'>\r\n                                New Announcement\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() => this.fetchAndSetAnnouncements(true)}\r\n                            >\r\n                                Refresh\r\n                            </Button>\r\n                            <Search placeholder=\"search\"\r\n                                onChange={(e) => this.onSearch(e.target.value)}\r\n                                onSearch={(search) => this.onSearch(search)} style={{ width: 200 }} />\r\n                        </div>\r\n\r\n                        <style>{`\r\n.bugg-list-item-button-321312312:hover {\r\n    background-color: rgb(0 0 0 / 5%);\r\n    cursor: pointer;\r\n}\r\n.bugg-list-item-button-321312312 {\r\n    background-color: white;\r\n}\r\n`}</style>\r\n                        <div style={{\r\n                            display: isMobile ? 'flex' : 'inline-flex',\r\n                            flexDirection: isMobile ? 'column' : 'unset',\r\n                            marginRight: isMobile ? 10 : 'unset'\r\n                        }}>\r\n                            <div\r\n                                style={{\r\n                                    borderColor: 'rgba(0,0,0,.2)',\r\n                                    // backgroundColor: 'rgba(0,0,0,.1)',\r\n                                    borderStyle: 'solid',\r\n                                    borderWidth: 1,\r\n                                    borderRadius: 5,\r\n                                    width: isMobile ? 'unset' : 360,\r\n                                    height: 600,\r\n                                    overflowY: 'auto',\r\n                                    overflowClipBox: 'content-box'\r\n                                }}\r\n                            >\r\n\r\n\r\n                                <InfiniteScroll\r\n                                    initialLoad={true}\r\n\r\n                                    // threshold={10}\r\n                                    pageStart={0}\r\n                                    loadMore={this.handleInfiniteLoad}\r\n                                    hasMore={!this.state.loading && this.state.hasMore}\r\n                                    useWindow={false}\r\n                                >\r\n                                    <List\r\n                                        itemLayout=\"horizontal\"\r\n                                        dataSource={this.state.announcements}\r\n                                        renderItem={(item) => (\r\n\r\n                                            <List.Item\r\n                                                key={item.id}\r\n                                                className=\"bugg-list-item-button-321312312\"\r\n                                                onClick={() => {\r\n                                                    this.setState({\r\n                                                        selectedAnnouncement: item\r\n                                                    })\r\n                                                }}\r\n                                            >\r\n                                                <List.Item.Meta\r\n\r\n                                                    avatar={<Avatar\r\n                                                        style={{\r\n                                                            marginLeft: 20,\r\n                                                            marginTop: 9\r\n                                                        }}\r\n                                                    >{item.submitter.name.substring(0, 1).toUpperCase()}</Avatar>}\r\n                                                    title={<>\r\n                                                        <a\r\n                                                            style={{\r\n                                                                marginRight: 10\r\n                                                            }}\r\n                                                            onClick={e => e.preventDefault()}\r\n                                                            href=\"#\">\r\n\r\n                                                            {this.formatName(item.submitter.name)}\r\n                                                        </a>\r\n                                                        <Tag color='#f50'>OWNER</Tag>\r\n                                                        <span\r\n                                                            style={{\r\n                                                                float: 'right',\r\n                                                                marginRight: 20,\r\n                                                                opacity: .8\r\n                                                            }}>\r\n                                                            {moment(new Date(item.createdAt)).format('LT')}\r\n                                                        </span>\r\n                                                    </>}\r\n\r\n                                                    description={item.plainTextBody}\r\n                                                />\r\n                                            </List.Item>\r\n\r\n\r\n                                        )}\r\n                                    />\r\n                                    {this.state.loading && this.state.hasMore && (\r\n                                        <div className=\"demo-loading-container\">\r\n                                            <Spin />\r\n                                        </div>\r\n                                    )}\r\n                                </InfiniteScroll>\r\n                            </div>\r\n                            <style>{`\r\n                    .demo-loading-container {\r\n                        position: relative;\r\n                        bottom: 0px;\r\n                        background-color: white;\r\n                        width: 100%;\r\n                        text-align: center;\r\n                      }\r\n                    `}</style>\r\n                            {!isMobile &&\r\n                                <div style={{\r\n                                    flex: 1,\r\n                                    marginLeft: 20,\r\n                                    width: 600,\r\n                                    minHeight: 600\r\n                                }}>\r\n                                    {this.state.selectedAnnouncement === null ?\r\n                                        <Empty style={{\r\n                                            marginTop: 100\r\n                                        }}\r\n                                            description=\"Select an announcement to view\"\r\n                                        /> :\r\n                                        <Message announcement={this.state.selectedAnnouncement} />\r\n                                    }\r\n                                </div>}\r\n                            {isMobile &&\r\n                                <Drawer\r\n                                    visible={this.state.selectedAnnouncement !== null}\r\n                                    onClose={() => this.setState({ selectedAnnouncement: null })}\r\n                                    destroyOnClose\r\n                                    width=\"90%\"\r\n                                    title=\"View Announcement\"\r\n                                //drawerStyle={{ width: '100%' }}\r\n                                >\r\n                                    <Message announcement={this.state.selectedAnnouncement} />\r\n                                </Drawer>}\r\n                        </div>\r\n                    </div>\r\n                }\r\n            </MediaQuery>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(App);\r\n","import React from 'react';\r\n\r\nimport {\r\n    Calendar,\r\n    Button,\r\n\r\n    Space,\r\n    Modal,\r\n    Drawer\r\n} from 'antd';\r\nimport moment from 'moment';\r\nimport axios from 'axios';\r\nimport ViewBug from './../ProjectsTabs/ViewBug';\r\nimport MediaQuery from 'react-responsive';\r\nimport { logErrorMessage } from '../../../libraries/network-error-handling';\r\nimport { getDefaultHeader } from '../../config';\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            createNewEvent: false,\r\n            toggleDrawer: false,\r\n            bugs: [],\r\n            selectedBug: {},\r\n            selectedDate: moment()\r\n        };\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    componentDidMount() {\r\n        this.fetchBugs()\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.project.id !== this.props.project.id) {\r\n            this.fetchBugs()\r\n        }\r\n    }\r\n\r\n    // retrives bugs assoiated with this project and sends them to this.state.bugs\r\n    fetchBugs = async () => {\r\n        if (!this.props.project.id) return;\r\n        try {\r\n            let { data } = await axios.get('/bug/all', {\r\n                headers: getDefaultHeader(),\r\n                params: {\r\n                    projectId: this.props.project.id\r\n                }\r\n            })\r\n            //console.log(data)\r\n            this.setState({\r\n                bugs: data.bugs.map((item => {\r\n                    let date;\r\n                    if (item.dueDate) {\r\n                        date = moment(new Date(item.dueDate))\r\n                    }\r\n                    return {\r\n                        ...item,\r\n                        date\r\n                    }\r\n                }))\r\n            })\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.project.id !== this.props.project.id) {\r\n            this.fetchBugs()\r\n        }\r\n    }\r\n\r\n    // Opens drawer and sets \"selectedBug\" in state\r\n    _onDateSelected = (date) => {\r\n        console.log(date)\r\n\r\n        this._toggleDrawerState()\r\n    }\r\n\r\n    _toggleDrawerState = () => {\r\n        this.setState({\r\n            toggleDrawer: !this.state.toggleDrawer\r\n        })\r\n    }\r\n\r\n    // toggle drawer state and refresh bug data\r\n    _onDrawerClose = () => {\r\n        this._toggleDrawerState()\r\n        this.fetchBugs()\r\n    }\r\n\r\n    _onBugSelect = () => {\r\n        const { selectedBug } = this.state;\r\n        this._toggleDrawerState();\r\n    }\r\n\r\n    getBugsDue = (value) => {\r\n        let year = value.year();\r\n        let day = value.dayOfYear()\r\n        let bugsDue = [];\r\n        let { bugs } = this.state\r\n\r\n        for (let i = 0; i < bugs.length; i++) {\r\n            let compareValue = bugs[i].date\r\n            if (!compareValue) continue;\r\n\r\n            if (year === compareValue.year() && day === compareValue.dayOfYear()) {\r\n                bugsDue.push(bugs[i])\r\n            }\r\n\r\n        }\r\n\r\n        return bugsDue\r\n    }\r\n\r\n    dateCellRender = (value) => {\r\n        const listData = this.getBugsDue(value);\r\n        return (\r\n            <ul\r\n\r\n                className=\"events\">\r\n                {listData.map(item => (\r\n                    <li\r\n                        onClick={() => this.setState({ selectedBug: item }, this._onBugSelect)}\r\n                        key={item.id}\r\n                        style={{\r\n                            backgroundColor: (() => {\r\n                                let { type } = item;\r\n                                if (type === 'error') {\r\n                                    return '#f5222d'\r\n                                }\r\n                                else if (type === 'warning') {\r\n                                    return '#d4b106'\r\n                                } else if (type === 'success') {\r\n                                    return '#52c41a'\r\n                                } else {\r\n                                    return '#13c2c2'\r\n                                }\r\n                            })(),\r\n                            marginBottom: 5,\r\n                            borderRadius: 5,\r\n                            paddingLeft: 5,\r\n                            color: 'white'\r\n                        }}\r\n                    >\r\n\r\n                        {item.title}\r\n                        {/* <Badge status={item.type} text={item.content} /> */}\r\n\r\n\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MediaQuery maxWidth={800}>\r\n                {(isMobile) =>\r\n                    <div>\r\n                        <div style={{\r\n                            marginRight: isMobile ? 10 : 64\r\n                        }}>\r\n                            <style>{`\r\n                    .events {\r\n                        margin: 0;\r\n                        padding: 0;\r\n                        list-style: none;\r\n                      }\r\n                      .events .ant-badge-status {\r\n                        width: 100%;\r\n                        overflow: hidden;\r\n                        font-size: 12px;\r\n                        white-space: nowrap;\r\n                        text-overflow: ellipsis;\r\n                      }\r\n                      .notes-month {\r\n                        font-size: 28px;\r\n                        text-align: center;\r\n                      }\r\n                      .notes-month section {\r\n                        font-size: 28px;\r\n                      }\r\n                    `}</style>\r\n                            <Space>\r\n                                {/* <Button\r\n                            \r\n                            onClick={() => this.setState({ createNewEvent: !this.state.createNewEvent })}>\r\n                            Add Event\r\n                        </Button> */}\r\n                                <Button\r\n                                    type='primary'\r\n                                    onClick={() => this.setState({ selectedDate: moment() })}\r\n                                >\r\n                                    Today\r\n                                </Button>\r\n                            </Space>\r\n                            <Calendar\r\n                                value={this.state.selectedDate}\r\n                                onSelect={(date) => this.setState({ selectedDate: date })}\r\n                                dateCellRender={this.dateCellRender}\r\n                            />\r\n                            <Modal\r\n                                visible={this.state.createNewEvent}\r\n                                onOk={() => this.setState({ createNewEvent: !this.state.createNewEvent })}\r\n                                onCancel={() => this.setState({ createNewEvent: !this.state.createNewEvent })}\r\n                                title=\"Create New Event\"\r\n                            >\r\n\r\n                            </Modal>\r\n                            <Drawer\r\n                                width={800}\r\n                                title=\"View Date\"\r\n                                placement=\"right\"\r\n                                closable={true}\r\n                                onClose={() => this.setState({ toggleDrawer: false })}\r\n                                visible={this.state.toggleDrawer}\r\n                            >\r\n                                hey\r\n                            </Drawer>\r\n\r\n                            <Drawer\r\n                                width={isMobile ? '100%' : 800}\r\n                                title={this.state.selectedBug.title}\r\n                                placement=\"right\"\r\n                                closable={true}\r\n                                onClose={this._onDrawerClose}\r\n                                visible={this.state.toggleDrawer}\r\n                                destroyOnClose\r\n                            >\r\n                                <ViewBug bug={this.state.selectedBug} />\r\n                            </Drawer>\r\n                        </div>\r\n\r\n                    </div>\r\n                }\r\n            </MediaQuery>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default App;\r\n","import { useState, useEffect } from \"react\";\r\nimport {\r\n    Input,\r\n    Button,\r\n    Upload,\r\n    Space,\r\n    message,\r\n    List,\r\n    Popconfirm,\r\n    notification\r\n} from 'antd';\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router\";\r\nimport {\r\n    withRouter\r\n} from \"react-router-dom\";\r\nimport config, { baseUrl, getDefaultHeader } from \"../../../config\"\r\nimport { getErrorMessage, logErrorMessage } from \"../../../../libraries/network-error-handling\";\r\nimport bugg from \"./../../../../libraries/bugg\";\r\n\r\nfunction General(props) {\r\n\r\n    const initializeComponent = () => {\r\n\r\n        setProject(props.project);\r\n        setTitle(props.project.title);\r\n        setDescription(props.project.description)\r\n        try {\r\n            setImageUri('/icon/' + props.project.icon[0].id)\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n        const retreiveProject = async () => {\r\n            try {\r\n                let { data } = await axios.get('/project/find', {\r\n                    headers: getDefaultHeader(),\r\n                    params: {\r\n                        projectId: props.project.id\r\n                    }\r\n                });\r\n\r\n                if (data.project) {\r\n                    console.log(data.project)\r\n                    setProject(data.project)\r\n                    setImageUri(baseUrl + '/icon/' + data.project.icon[0].id)\r\n                    setTitle(data.project.title);\r\n                    setDescription(data.project.description)\r\n                }\r\n            } catch (e) {\r\n                logErrorMessage(e)\r\n            }\r\n        }\r\n\r\n        retreiveProject()\r\n\r\n    }\r\n    useEffect(initializeComponent, [props.project])\r\n    const [title, setTitle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [imageUri, setImageUri] = useState('');\r\n    const [project, setProject] = useState({});\r\n\r\n\r\n\r\n    // upload image and set imageUri\r\n    const beforeUpload = async (file) => {\r\n        let formData = new FormData();\r\n        formData.append('icon', file);\r\n        try {\r\n            let { data } = await axios.post('/icon/upload', formData, {\r\n                headers: {\r\n                    ...(getDefaultHeader()),\r\n                    'Content-Type': 'multipart/form-data'\r\n                },\r\n                params: {\r\n                    projectId: project.id\r\n                }\r\n            });\r\n            console.log(data)\r\n            let newImageUri = baseUrl + '/icon/' + data.uploadedFiles[0].id;\r\n            // TODO: Update project URI\r\n            props.updateProject()\r\n            setImageUri(newImageUri)\r\n            message.success('Icon was updated')\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error('Error: ' + getErrorMessage(e))\r\n        }\r\n\r\n\r\n        return false;\r\n    }\r\n\r\n    const updateProject = async (field) => {\r\n        let value;\r\n        if (field === 'title') {\r\n            value = title;\r\n        } else if (field === 'description') {\r\n            value = description;\r\n        }\r\n        try {\r\n            let { data } = await axios.put('/project/' + project.id, {\r\n                [field]: value\r\n            }, {\r\n                headers: getDefaultHeader()\r\n            })\r\n\r\n            let newProject = data.project;\r\n            setProject(newProject)\r\n\r\n            message.success(`${field} was updated to \"${value}\"`)\r\n            props.updateProject()\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error(\"Error: \" + getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    let history = useHistory();\r\n    const deleteProject = async () => {\r\n        const projectId = props.project.id;\r\n        try {\r\n            await axios.delete(config.baseUrl + '/project/' + projectId, {\r\n                headers: config.getDefaultHeader()\r\n            });\r\n            notification.success({\r\n                message: \"Project was deleted\"\r\n            })\r\n            props.updateProjectOnNavigation()\r\n            history.push('/dashboard')\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error('Error: ' + getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(initializeComponent, [])\r\n\r\n    const leaveProject = async () => {\r\n        let projectId = props.match.params.projectId;\r\n        try {\r\n\r\n            await bugg.Project.leaveProject(projectId);\r\n            props.history.push('/dashboard')\r\n            message.success('Left project')\r\n        } catch (e) {\r\n            message.error('Could not leave project: ' + getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n\r\n    const settings = [\r\n        {\r\n            title: 'Title',\r\n            reactNode: (<Space  >\r\n                {\r\n                    title !== project.title ?\r\n                        <Button\r\n                            onClick={() => updateProject('title')}\r\n                            type='primary'>\r\n                            Update\r\n                        </Button> : null}\r\n                <Input\r\n                    value={title}\r\n                    onPressEnter={() => {\r\n                        if (title !== project.title) updateProject('title')\r\n                    }}\r\n                    onChange={(e) => {\r\n                        setTitle(e.target.value)\r\n                    }}\r\n                    type=\"text\" />\r\n\r\n            </Space>)\r\n        },\r\n        {\r\n            title: 'Description',\r\n            reactNode: (\r\n                <Space >\r\n                    {\r\n                        description !== project.description ?\r\n                            <Button\r\n                                onClick={() => updateProject('description')}\r\n                                type='primary'>\r\n                                Update\r\n                            </Button> : null}\r\n                    <Input\r\n                        value={description}\r\n                        onPressEnter={() => {\r\n                            if (description !== project.description) updateProject('description')\r\n                        }}\r\n                        onChange={(e) => {\r\n                            setDescription(e.target.value)\r\n                        }}\r\n                        o\r\n                        type=\"text\" />\r\n\r\n                </Space>\r\n            )\r\n        },\r\n        {\r\n            title: 'Project Icon',\r\n            reactNode: (\r\n                <div>\r\n                    <Upload\r\n                        name=\"avatar\"\r\n                        listType=\"picture-card\"\r\n                        accept='image/*'\r\n                        showUploadList={false}\r\n                        // action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n                        beforeUpload={beforeUpload}\r\n                    // onChange={this.handleChange}\r\n                    >\r\n                        {\r\n                            imageUri === '' ?\r\n                                \"Upload Icon\" :\r\n                                <div style={{\r\n                                    width: '80%',\r\n                                    height: '80%',\r\n                                    backgroundImage: 'url(' + imageUri + ')',\r\n                                    backgroundSize: 'cover',\r\n                                    backgroundPosition: 'center'\r\n                                }}\r\n                                />\r\n\r\n                        }\r\n\r\n                    </Upload>\r\n                </div>\r\n\r\n            )\r\n        },\r\n        {\r\n            title: 'Leave Project?',\r\n            reactNode: (\r\n                <Popconfirm\r\n                    title=\"Are you sure?\"\r\n                    onConfirm={leaveProject}\r\n                >\r\n                    <Button danger>Leave</Button>\r\n                </Popconfirm>\r\n            )\r\n        },\r\n        {\r\n            title: 'Delete Project?',\r\n            reactNode: (\r\n                <Popconfirm\r\n                    title=\"Are you sure?\"\r\n                    onConfirm={deleteProject}\r\n                >\r\n                    <Button danger>Delete</Button>\r\n                </Popconfirm>\r\n            )\r\n        }\r\n    ]\r\n\r\n\r\n    return (<div style={{ width: '100%' }}>\r\n        <List\r\n            style={{\r\n                width: '100%',\r\n                maxWidth: 600\r\n            }}\r\n            dataSource={settings}\r\n            bordered\r\n\r\n            renderItem={(item) => <List.Item\r\n                key={item.title}\r\n                extra={[item.reactNode]}\r\n            >\r\n                {item.title}\r\n            </List.Item>}\r\n        />\r\n\r\n\r\n\r\n\r\n\r\n    </div >\r\n    )\r\n}\r\n\r\nexport default withRouter(General)","import { useState, useEffect } from \"react\";\r\nimport { Modal, Form, Input, Switch, Select, Space, Button, message } from \"antd\";\r\nimport axios\r\n    from \"axios\";\r\n\r\nimport { CirclePicker } from 'react-color';\r\n\r\nimport {\r\n    withRouter\r\n} from \"react-router-dom\";\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\n\r\n\r\nconst PERMISSIONS = {\r\n    ALL: 'ALL',\r\n    MODIFY_GENERAL: 'MODIFY_GENERAL',\r\n    MODIFY_MEMBERS: 'MODIFY_MEMBERS',\r\n    MODIFY_BUGS: 'MODIFY_BUGS',\r\n    MODIFY_ANNOUNCEMENTS: 'MODIFY_ANNOUNCEMENTS'\r\n}\r\n\r\n// const PERMISSIONS_ARRAY = [\r\n//     'ALL',\r\n//     'MODIFY_GENERAL',\r\n//     'MODIFY_MEMBERS',\r\n//     'MODIFY_BUGS',\r\n//     'MODIFY_ANNOUNCEMENTS'\r\n// ]\r\n\r\nconst { Option } = Select;\r\n\r\nconst ModifyRole = (props) => {\r\n    useEffect(() => {\r\n        if (props.role) {\r\n            setMembers(props.role.users)\r\n            setSelectedMembers(props.role.users.map((item) => item.id))\r\n            if (props.role.color) setColor(props.role.color)\r\n        }\r\n    }, [props.role]);\r\n\r\n    const [members, setMembers] = useState([]);\r\n    const [selectedMembers, setSelectedMembers] = useState([])\r\n    const [search, setSearch] = useState('');\r\n    const { toggleUpdateRoleModal, fetchRoles } = props;\r\n    const [color, setColor] = useState('#f44336')\r\n\r\n\r\n    // TODO: only search for users apart of the project\r\n    const handleUserSearch = async () => {\r\n        try {\r\n            let { data } = await axios.get('/user/search', {\r\n                params: {\r\n                    query: search,\r\n                    projectId: props.match.params.projectId,\r\n                    isIn: true\r\n                },\r\n                headers: getDefaultHeader()\r\n            })\r\n            //console.log(results.data)\r\n            let newMembers = [];\r\n            let users = data.results;\r\n            for (let i = 0; i < users.length; i++) {\r\n                newMembers.push({\r\n                    key: users[i].id,\r\n                    name: users[i].name,\r\n                    email: users[i].email,\r\n                    id: users[i].id\r\n                })\r\n            }\r\n            setMembers(newMembers)\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    const updateRole = async (data) => {\r\n        let title = data.title;\r\n        let permissions = [];\r\n\r\n        // default checked is undefined, so normalize to true\r\n        let getValue = (value) => {\r\n            if (value || value === undefined) {\r\n                return true\r\n            } else {\r\n                return false\r\n            }\r\n        }\r\n\r\n        // construct permission array\r\n        let modAnnouncements = getValue(data[PERMISSIONS.MODIFY_ANNOUNCEMENTS])\r\n        let modBugs = getValue(data[PERMISSIONS.MODIFY_BUGS])\r\n        let modGen = getValue(data[PERMISSIONS.MODIFY_GENERAL])\r\n        let modMembers = getValue(data[PERMISSIONS.MODIFY_MEMBERS])\r\n\r\n        if (modAnnouncements && modBugs\r\n            && modGen && modMembers) {\r\n            permissions.push(PERMISSIONS.ALL)\r\n        } else {\r\n            if (modAnnouncements) permissions.push(PERMISSIONS.MODIFY_ANNOUNCEMENTS);\r\n            if (modBugs) permissions.push(PERMISSIONS.MODIFY_BUGS);\r\n            if (modGen) permissions.push(PERMISSIONS.MODIFY_GENERAL);\r\n            if (modMembers) permissions.push(PERMISSIONS.MODIFY_MEMBERS);\r\n        }\r\n\r\n        try {\r\n            await axios.put('/role', {\r\n                roleId: props.role.id,\r\n                title,\r\n                color,\r\n                permissions: permissions.join(','),\r\n                users: selectedMembers.join(',')\r\n            }, {\r\n                headers: getDefaultHeader()\r\n            })\r\n            toggleUpdateRoleModal();\r\n            fetchRoles();\r\n            message.success(\"Role updated\")\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n            message.error(getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    const getInitialValue = (field) => {\r\n        if (field === 'title') return props.role.title\r\n\r\n\r\n        if (props.role.permissions === 'ALL') {\r\n\r\n            return true\r\n        };\r\n\r\n        const permissions = props.role.permissions.split(',');\r\n\r\n        return permissions.includes(field)\r\n    }\r\n    console.log(props.role)\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Modal title=\"Update Role\"\r\n                visible={props.visible}\r\n                // onOk={updateRole}\r\n                footer={null}\r\n                destroyOnClose\r\n                onCancel={toggleUpdateRoleModal}\r\n            >\r\n                {\r\n                    props.role !== null ?\r\n                        <Form\r\n                            layout='vertical'\r\n                            onFinish={updateRole}\r\n\r\n                        >\r\n                            <Form.Item\r\n                                label=\"Title\"\r\n                                name=\"title\"\r\n                                initialValue={getInitialValue('title')}\r\n                                rules={[\r\n                                    {\r\n                                        required: true,\r\n                                        message: 'Please add a title',\r\n                                    },\r\n                                ]}\r\n                            >\r\n                                <Input\r\n                                    type=\"text\" />\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"Members\"\r\n                                name=\"members\"\r\n                                initialValue={selectedMembers}\r\n                            >\r\n                                <Select\r\n                                    showSearch\r\n                                    mode='multiple'\r\n                                    // value={selectedMembers}\r\n                                    placeholder={\"search...\"}\r\n                                    // style={this.props.style}\r\n                                    // defaultActiveFirstOption={false}\r\n                                    // showArrow={false}\r\n                                    filterOption={false}\r\n                                    onSearch={(value) => {\r\n                                        setSearch(value);\r\n                                        handleUserSearch();\r\n                                    }}\r\n                                    onChange={setSelectedMembers}\r\n                                // notFoundContent={\"\"}\r\n                                >\r\n                                    {/* <Option key={'1'}>{query}</Option> */}\r\n                                    {\r\n                                        members.map(doc => <Option key={doc.id}>{`${doc.name} (${doc.email})`}</Option>)\r\n                                    }\r\n                                </Select>\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"Color\"\r\n                                name=\"color\"\r\n                            >\r\n                                <CirclePicker\r\n                                    color={color}\r\n                                    onChangeComplete={(value) => setColor(value.hex)}\r\n                                />\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"Can modify bugs\"\r\n                                name={PERMISSIONS.MODIFY_BUGS}\r\n                                initialValue={getInitialValue(PERMISSIONS.MODIFY_BUGS)}\r\n                                valuePropName=\"checked\">\r\n                                <Switch />\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"Can modify announcements\" name={PERMISSIONS.MODIFY_ANNOUNCEMENTS}\r\n                                valuePropName=\"checked\"\r\n                                initialValue={getInitialValue(PERMISSIONS.MODIFY_ANNOUNCEMENTS)}\r\n                            >\r\n                                <Switch />\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"Can modify project\" name={PERMISSIONS.MODIFY_GENERAL}\r\n                                valuePropName=\"checked\"\r\n                                initialValue={getInitialValue(PERMISSIONS.MODIFY_GENERAL)}\r\n                            >\r\n                                <Switch />\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"Can modify members\"\r\n                                valuePropName=\"checked\"\r\n                                name={PERMISSIONS.MODIFY_MEMBERS}\r\n                                initialValue={getInitialValue(PERMISSIONS.MODIFY_MEMBERS)}\r\n                            >\r\n                                <Switch />\r\n                            </Form.Item>\r\n                            <Space style={{\r\n                                width: '100%',\r\n                                marginTop: 20,\r\n                                display: 'inline-flex',\r\n                                justifyContent: 'flex-end'\r\n                            }}>\r\n                                <Button onClick={toggleUpdateRoleModal}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button\r\n                                    htmlType='submit'\r\n                                    type='primary'>\r\n                                    Update\r\n                                </Button>\r\n                            </Space>\r\n                        </Form> : null}\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default withRouter(ModifyRole);","import react from \"react\";\r\nimport {\r\n    Button,\r\n\r\n    Modal,\r\n    Space,\r\n\r\n    message,\r\n    Select,\r\n    Form,\r\n    Input,\r\n    Switch,\r\n\r\n    List,\r\n    Popconfirm, Tag\r\n} from 'antd';\r\nimport axios from \"axios\";\r\nimport ModifyRole from './../../../../components/ModifyRole'\r\nimport { CirclePicker } from 'react-color'\r\nimport { getDefaultHeader } from \"../../../config\"\r\nimport { getErrorMessage, logErrorMessage } from \"../../../../libraries/network-error-handling\";\r\n\r\nconst PERMISSIONS = {\r\n    ALL: 'ALL',\r\n    MODIFY_GENERAL: 'MODIFY_GENERAL',\r\n    MODIFY_MEMBERS: 'MODIFY_MEMBERS',\r\n    MODIFY_BUGS: 'MODIFY_BUGS',\r\n    MODIFY_ANNOUNCEMENTS: 'MODIFY_ANNOUNCEMENTS'\r\n}\r\n\r\nconst { Option } = Select;\r\n\r\nexport default class Roles extends react.Component {\r\n    state = {\r\n        roles: [],\r\n        selectedRole: null,\r\n        isModalVisible: false,\r\n        members: [],\r\n        selectedMembers: [],\r\n        search: '',\r\n        current: 'display',\r\n        updateRoleModalVisible: false,\r\n        color: '#f44336'\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.fetchRoles()\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.project.id !== this.props.project.id) {\r\n            this.fetchRoles()\r\n        }\r\n    }\r\n\r\n    // TODO: only search for users apart of the project\r\n    _handleUserSearch = async () => {\r\n        const { search } = this.state;\r\n        try {\r\n            let { data } = await axios.get('/user/search', {\r\n                params: {\r\n                    query: search,\r\n                    projectId: this.props.match.params.projectId,\r\n                    isIn: true\r\n                },\r\n                headers: getDefaultHeader()\r\n            })\r\n            //console.log(results.data)\r\n            let newMembers = [];\r\n            let users = data.results;\r\n            for (let i = 0; i < users.length; i++) {\r\n                newMembers.push({\r\n                    key: users[i].id,\r\n                    name: users[i].name,\r\n                    email: users[i].email,\r\n                    id: users[i].id\r\n                })\r\n            }\r\n            this.setState({\r\n                members: newMembers\r\n            })\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n\r\n            return\r\n        }\r\n    }\r\n\r\n    _handleSelectUser = (val) => {\r\n        this.setState({\r\n            selectedMembers: val\r\n        })\r\n    }\r\n\r\n    createRole = async (data) => {\r\n        console.log(data)\r\n\r\n        let title = data.title;\r\n        let permissions = [];\r\n\r\n        // default checked is undefined, so normalize to true\r\n        let getValue = (value) => {\r\n            if (value || value === undefined) {\r\n                return true\r\n            } else {\r\n                return false\r\n            }\r\n        }\r\n\r\n        // construct permission array\r\n        let modAnnouncements = getValue(data[PERMISSIONS.MODIFY_ANNOUNCEMENTS])\r\n        let modBugs = getValue(data[PERMISSIONS.MODIFY_BUGS])\r\n        let modGen = getValue(data[PERMISSIONS.MODIFY_GENERAL])\r\n        let modMembers = getValue(data[PERMISSIONS.MODIFY_MEMBERS])\r\n\r\n        if (modAnnouncements && modBugs\r\n            && modGen && modMembers) {\r\n            permissions.push(PERMISSIONS.ALL)\r\n        } else {\r\n            if (modAnnouncements) permissions.push(PERMISSIONS.MODIFY_ANNOUNCEMENTS);\r\n            if (modBugs) permissions.push(PERMISSIONS.MODIFY_BUGS);\r\n            if (modGen) permissions.push(PERMISSIONS.MODIFY_GENERAL);\r\n            if (modMembers) permissions.push(PERMISSIONS.MODIFY_MEMBERS);\r\n        }\r\n\r\n        try {\r\n            await axios.post('/role', {\r\n                projectId: this.props.project.id,\r\n                title,\r\n                permissions: permissions.join(','),\r\n                color: this.state.color,\r\n                users: this.state.selectedMembers.join(',')\r\n            }, {\r\n                headers: getDefaultHeader()\r\n            })\r\n            this.setState({\r\n\r\n                isModalVisible: false\r\n            })\r\n            message.success(\"Role created\")\r\n            this.fetchRoles()\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error(\"Error: \" + getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n\r\n    fetchRoles = async () => {\r\n        try {\r\n            let { data: { roles } } = await axios.get('/role/all/' + this.props.project.id, {\r\n                headers: getDefaultHeader()\r\n            })\r\n            console.log(\"Roles on fetch: \")\r\n            console.log(roles)\r\n            this.setState({\r\n                roles\r\n            })\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n    toggleUpdateRoleModal = () => {\r\n        this.setState({\r\n            updateRoleModalVisible: !this.state.updateRoleModalVisible\r\n        })\r\n    }\r\n    handleChangeComplete = (color) => {\r\n        this.setState({ color: color.hex });\r\n    };\r\n\r\n    deleteRole = async (roleId) => {\r\n        try {\r\n            await axios.delete('/role/' + roleId, {\r\n                headers: getDefaultHeader()\r\n            });\r\n            this.fetchRoles()\r\n            message.success('role was deleted')\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error(\"Error: \" + getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { isMobile } = this.props;\r\n\r\n        return (<>\r\n            <div style={{\r\n                maxWidth: isMobile ? 'unset' : 600 //500\r\n            }}>\r\n                <div style={{\r\n                    display: 'inline-flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    flexDirection: 'row',\r\n                    width: '100%',\r\n                    marginBottom: 20\r\n                }}>\r\n                    <h3 style={{ margin: 0 }}>\r\n                        All Roles\r\n                    </h3>\r\n                    <Button\r\n                        onClick={() => this.setState({ isModalVisible: true })}\r\n                        type='primary'>\r\n                        Create New\r\n                    </Button>\r\n                </div>\r\n\r\n                <List\r\n\r\n                    bordered\r\n                    dataSource={this.state.roles}\r\n                    renderItem={item => (\r\n                        <List.Item\r\n                            key={item.id}\r\n                            extra={\r\n                                <Space>\r\n                                    <Button\r\n\r\n                                        onClick={(e) => {\r\n                                            this.setState({\r\n                                                selectedRole: item,\r\n                                                updateRoleModalVisible: true\r\n                                            })\r\n                                            e.preventDefault()\r\n                                        }}>\r\n                                        Edit\r\n                                    </Button>\r\n                                    <Popconfirm\r\n                                        title=\"Are you sure?\"\r\n                                        onConfirm={() => this.deleteRole(item.id)}\r\n                                    >\r\n\r\n                                        <Button\r\n                                            danger\r\n                                        >\r\n                                            Delete\r\n                                        </Button>\r\n                                    </Popconfirm>\r\n                                </Space>\r\n\r\n                            }\r\n                        >\r\n                            <Tag color={item.color}>{item.title} </Tag>\r\n\r\n                        </List.Item>\r\n                    )}\r\n                />\r\n\r\n\r\n            </div>\r\n\r\n\r\n            <Modal title=\"Create Role\"\r\n                visible={this.state.isModalVisible}\r\n                onOk={this.createRole}\r\n                footer={null}\r\n                destroyOnClose\r\n                onCancel={() => this.setState({ isModalVisible: false })}\r\n            >\r\n                <Form\r\n                    layout='vertical'\r\n                    onFinish={this.createRole}\r\n\r\n                >\r\n                    <Form.Item\r\n                        label=\"Title\"\r\n                        name=\"title\"\r\n                        // initialValue=\"hey\"\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: 'Please add a title',\r\n                            },\r\n                        ]}\r\n                    >\r\n                        <Input\r\n\r\n                            type=\"text\" />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"Members\"\r\n                        name=\"members\"\r\n                    >\r\n                        <Select\r\n                            showSearch\r\n                            mode='multiple'\r\n                            placeholder={\"search...\"}\r\n                            filterOption={false}\r\n                            onSearch={(value) => this.setState({ search: value }, this._handleUserSearch)}\r\n                            onChange={this._handleSelectUser}\r\n                        // notFoundContent={\"\"}\r\n                        >\r\n                            {\r\n                                this.state.members.map(doc => <Option key={doc.id}>{`${doc.name} (${doc.email})`}</Option>)\r\n                            }\r\n                        </Select>\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"Color\"\r\n                        name=\"color\"\r\n                    >\r\n                        <CirclePicker\r\n                            color={this.state.color}\r\n                            onChangeComplete={this.handleChangeComplete}\r\n                        />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"Can modify bugs\"\r\n                        name={PERMISSIONS.MODIFY_BUGS}\r\n\r\n                        valuePropName=\"checked\">\r\n                        <Switch\r\n\r\n                            defaultChecked={true} />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"Can modify announcements\" name={PERMISSIONS.MODIFY_ANNOUNCEMENTS}\r\n                        valuePropName=\"checked\"\r\n                    >\r\n                        <Switch defaultChecked />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"Can modify project\" name={PERMISSIONS.MODIFY_GENERAL}\r\n                        valuePropName=\"checked\"\r\n                    >\r\n                        <Switch defaultChecked />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"Can modify members\"\r\n                        valuePropName=\"checked\"\r\n                        name={PERMISSIONS.MODIFY_MEMBERS}>\r\n                        <Switch defaultChecked />\r\n                    </Form.Item>\r\n                    <Space style={{\r\n                        width: '100%',\r\n                        marginTop: 20,\r\n                        display: 'inline-flex',\r\n                        justifyContent: 'flex-end'\r\n                    }}>\r\n                        <Button onClick={() => {\r\n                            this.setState({\r\n                                isModalVisible: false\r\n                            })\r\n                        }}>\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            htmlType='submit'\r\n                            type='primary'>\r\n                            Create\r\n                        </Button>\r\n                    </Space>\r\n                </Form>\r\n            </Modal>\r\n\r\n            <ModifyRole\r\n                visible={this.state.updateRoleModalVisible}\r\n                toggleUpdateRoleModal={this.toggleUpdateRoleModal}\r\n                role={this.state.selectedRole}\r\n                fetchRoles={this.fetchRoles}\r\n            />\r\n        </>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n","import react from \"react\";\r\nimport { List, message, Switch } from 'antd'\r\nimport axios from \"axios\";\r\nimport { getDefaultHeader } from \"../../../config\"\r\nimport { getErrorMessage, logErrorMessage } from \"../../../../libraries/network-error-handling\";\r\n\r\n\r\nexport default class Notifications extends react.Component {\r\n    state = {\r\n        enableNotifications: true\r\n    }\r\n    TOKEN = window.localStorage.getItem('token')\r\n\r\n    componentDidMount() {\r\n        this.getCurrentSetting()\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.project.id !== this.props.project.id) {\r\n            this.getCurrentSetting()\r\n        }\r\n    }\r\n\r\n    getCurrentSetting = async () => {\r\n        try {\r\n            const { data } = await axios.get('/notification-setting/' + this.props.project.id, {\r\n                headers: getDefaultHeader()\r\n            })\r\n            this.setState({\r\n                enableNotifications: data.notificationSetting.recieveNotifications\r\n            })\r\n\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error(\"Error: \" + getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    setCurrentSetting = async (checked) => {\r\n        try {\r\n            await axios.put('/notification-setting/' + this.props.project.id, {\r\n                recieveNotifications: checked\r\n            }, {\r\n                headers: getDefaultHeader()\r\n            });\r\n            message.success('Setting updated!')\r\n            this.setState({ enableNotifications: checked })\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error('Error: ' + getErrorMessage(e))\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        const { isMobile } = this.props\r\n        return <div style={{\r\n            width: isMobile ? 'unset' : 500 //500\r\n        }}>\r\n            <List\r\n                // header={<div>Header</div>}\r\n                // footer={<div>Footer</div>}\r\n                bordered\r\n                dataSource={[0]}\r\n                renderItem={item => (\r\n                    <List.Item\r\n                        key={item}\r\n                        extra={\r\n                            <Switch\r\n                                onChange={this.setCurrentSetting}\r\n                                checked={this.state.enableNotifications} />\r\n                        }\r\n                    >\r\n                        Enable notifications for this project?\r\n\r\n                    </List.Item>\r\n                )}\r\n            />\r\n        </div>\r\n    }\r\n}","import react from \"react\";\r\n\r\n\r\n\r\nexport default class Members extends react.Component {\r\n\r\n    render() {\r\n        return \"members\"\r\n    }\r\n}","import React from 'react';\r\n\r\nimport { List, Avatar } from 'antd';\r\n\r\nimport General from './SettingsComponents/General';\r\nimport Roles from './SettingsComponents/Roles';\r\nimport Notifications from './SettingsComponents/Notifications';\r\nimport Members from './SettingsComponents/Members'\r\nimport MediaQuery from 'react-responsive'\r\n\r\nconst data = [\r\n    'General',\r\n    'Roles',\r\n    'Notifications',\r\n    // 'Members',\r\n];\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isAuthed: false,\r\n            selectedSetting: 'general',\r\n\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MediaQuery maxWidth={800}>\r\n                {(isMobile) =>\r\n\r\n\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        flexDirection: isMobile ? 'column' : 'row',\r\n                        marginTop: 10,\r\n                        marginRight: isMobile ? 10 : 64,\r\n                        gap: 20\r\n                        // width: '100%'\r\n                    }}>\r\n                        <style>{`\r\n.bugg-list-item-button:hover {\r\n    background-color: rgb(0 0 0 / 5%);\r\n    cursor: pointer;\r\n}\r\n.bugg-list-item-button {\r\n    background-color: white;\r\n}\r\n`}</style>\r\n                        <div>\r\n                            <List\r\n                                // header={<div>Header</div>}\r\n                                // footer={<div>Footer</div>}\r\n                                bordered\r\n                                dataSource={data}\r\n                                style={{\r\n                                    width: isMobile ? 'unset' : 220,\r\n                                    // marginBottom: \r\n                                    //  height: 229 - (229 / 4)\r\n                                }}\r\n                                renderItem={item => {\r\n                                    let str = item.toLowerCase().split(' ').join('-');\r\n                                    return (\r\n                                        <List.Item\r\n                                            key={str}\r\n                                            className=\"bugg-list-item-button\"\r\n                                            onClick={() => {\r\n                                                this.setState({\r\n                                                    selectedSetting: str\r\n                                                })\r\n                                            }}\r\n                                            style={{\r\n                                                color: (this.state.selectedSetting === str ? '#0094f7' : 'black')\r\n                                            }}\r\n                                        >\r\n                                            <Avatar style={{\r\n                                                marginRight: 10\r\n                                            }}>{item.substring(0, 1).toLocaleUpperCase()}</Avatar> {item}\r\n                                        </List.Item>\r\n                                    )\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        {\r\n                            // Create components\r\n                        }\r\n                        <div style={{\r\n                            flex: 1,\r\n\r\n                        }}>\r\n                            {\r\n                                (() => {\r\n                                    switch (this.state.selectedSetting) {\r\n                                        case data[0].toLowerCase().split(' ').join('-'):\r\n                                            return <General\r\n                                                project={this.props.project}\r\n                                                updateProject={this.props.updateProject}\r\n                                                updateProjectOnNavigation={this.props.updateProjectOnNavigation}\r\n                                            />\r\n                                        case data[1].toLowerCase().split(' ').join('-'):\r\n                                            return <Roles isMobile={isMobile} project={this.props.project} />\r\n                                        case data[2].toLowerCase().split(' ').join('-'):\r\n                                            return <Notifications isMobile={isMobile} project={this.props.project} />\r\n                                        case data[3].toLowerCase().split(' ').join('-'):\r\n                                            return <Members project={this.props.project} />\r\n                                        default:\r\n                                            return 'no tab selected'\r\n                                    }\r\n\r\n                                })()\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                }\r\n            </MediaQuery>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport {\r\n    Popconfirm, List,\r\n    Input,\r\n    Avatar, Button, Space, Modal, Select, message, Tag\r\n} from 'antd';\r\nimport { withRouter } from 'react-router-dom'\r\nimport axios from 'axios';\r\nimport { DeleteOutlined } from '@ant-design/icons'\r\nimport { getMe } from '../../../libraries/bugg';\r\nimport { getErrorMessage, logErrorMessage } from '../../../libraries/network-error-handling';\r\nimport { getDefaultHeader } from '../../config';\r\n\r\nconst { Search } = Input;\r\nconst { Option } = Select;\r\n\r\nfunction validateEmail(email) {\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(String(email).toLowerCase());\r\n}\r\n\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            toggleAddMember: false,\r\n            page: 1,\r\n            pageSize: 50,\r\n            total: 0,\r\n            search: '',\r\n            members: [],\r\n            membersToAdd: [],\r\n            query: '',\r\n            selectedMembersToAdd: [],\r\n            confirmVisible: false,\r\n            deleteButtonLoading: false\r\n        };\r\n\r\n    }\r\n    TOKEN = window.localStorage.getItem('token')\r\n    componentDidMount() {\r\n        this.fetchMembers()\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.project.id !== this.props.project.id) {\r\n            this.fetchMembers()\r\n        }\r\n    }\r\n\r\n    fetchMembers = async () => {\r\n        var { page, pageSize, search } = this.state;\r\n\r\n        try {\r\n            const { data } = await axios.get('/project/users/' + this.props.project.id, {\r\n                headers: getDefaultHeader(),\r\n                params: {\r\n                    skip: (page - 1) * pageSize,\r\n                    limit: pageSize,\r\n                    search\r\n                }\r\n            })\r\n\r\n            this.setState({\r\n                members: data.members,\r\n                total: data.total\r\n            })\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n\r\n    updateSearch = (search) => {\r\n        this.setState({\r\n            search: search,\r\n            page: 1\r\n        }, this.fetchMembers)\r\n    }\r\n\r\n    onChangePagination = (page, pageSize) => {\r\n        this.setState({\r\n            page, pageSize\r\n        }, this.fetchMembers)\r\n    }\r\n\r\n\r\n    toggleAddMember = () => this.setState({ toggleAddMember: !this.state.toggleAddMember })\r\n    updateMembersToAdd = (val) => this.setState({ selectedMembersToAdd: val })\r\n\r\n\r\n    addMembers = async () => {\r\n        const { selectedMembersToAdd } = this.state;\r\n\r\n        try {\r\n            await axios.post('/project/member', {\r\n                userEmails: selectedMembersToAdd,\r\n                projectId: this.props.project.id\r\n            }, {\r\n                headers: getDefaultHeader()\r\n            });\r\n            message.success(\"users invited!\")\r\n            this.toggleAddMember()\r\n            this.fetchMembers()\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error('Error: ' + getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    // sets members users with that match search\r\n    // inserts email that does not match in server\r\n    searchMembers = async () => {\r\n        const { query } = this.state;\r\n        try {\r\n            let results = await axios.get('/user/search', {\r\n                params: {\r\n                    query: query,\r\n                    projectId: this.props.match.params.projectId,\r\n                    isIn: false\r\n                },\r\n                headers: getDefaultHeader()\r\n            })\r\n            let members = results.data.results.map((item) => ({\r\n                key: item.email,\r\n                name: item.name,\r\n                email: item.email,\r\n                id: item.id,\r\n                isInServer: true\r\n            }));\r\n\r\n            if (validateEmail(query)) {\r\n                members = [{\r\n                    isInServer: false,\r\n                    email: query,\r\n                    key: query\r\n                }, ...members];\r\n            }\r\n\r\n            this.setState({\r\n                membersToAdd: members\r\n            })\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n    removeMember = async (userId) => {\r\n\r\n        try {\r\n            await axios.delete('/project/member', {\r\n                headers: getDefaultHeader(),\r\n                data: {\r\n                    projectId: this.props.project.id,\r\n                    userId\r\n                }\r\n            })\r\n            this.fetchMembers()\r\n            this.setState({\r\n                confirmVisible: false,\r\n                deleteButtonLoading: false\r\n            })\r\n\r\n\r\n            try {\r\n                let user = await getMe();\r\n                if (user.id === userId) {\r\n                    this.props.updateProject()\r\n                    this.props.history.push('/dashboard')\r\n                }\r\n\r\n            } catch (e) {\r\n                logErrorMessage(e)\r\n            }\r\n\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error('Error: ' + getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { isMobile } = this.props;\r\n\r\n        return (\r\n            <div\r\n                style={{\r\n\r\n                    marginRight: isMobile ? 10 : 64\r\n                }}\r\n            >\r\n                <div style={{\r\n                    marginBottom: 20,\r\n                    gap: 6,\r\n                    display: 'flex',\r\n                    flexWrap: 'wrap'\r\n                }}>\r\n                    <Search\r\n                        style={{ width: 200 }}\r\n                        placeholder=\"search\"\r\n                        value={this.state.search}\r\n                        onChange={(e) => this.updateSearch(e.target.value)}\r\n                        onSearch={this.updateSearch} />\r\n                    <Button\r\n                        onClick={this.toggleAddMember}\r\n                        type='primary'>\r\n                        Add New Member\r\n                    </Button>\r\n                </div>\r\n\r\n                <List\r\n\r\n                    pagination={{\r\n                        current: this.state.page,\r\n                        total: this.state.total,\r\n                        pageSize: this.state.pageSize,\r\n                        onChange: this.onChangePagination\r\n                    }}\r\n                    bordered\r\n                    dataSource={this.state.members}\r\n                    style={{\r\n                        maxWidth: 900\r\n                    }}\r\n                    renderItem={item => (\r\n                        <List.Item\r\n                            key={item.id}\r\n                            actions={[\r\n                                (!item.isOwner && <Popconfirm\r\n                                    title=\"Are you sure?\"\r\n                                    // visible={this.state.confirmVisible}\r\n                                    okButtonProps={{ loading: this.state.deleteButtonLoading }}\r\n                                    onConfirm={() => this.removeMember(item.id)}\r\n                                >\r\n                                    <Button\r\n                                        // onClick={() => this.setState({ confirmVisible: true })}\r\n\r\n                                        {\r\n                                        ...(isMobile ? {\r\n                                            icon: <DeleteOutlined />\r\n                                        } : {})\r\n                                        }\r\n                                        danger>{isMobile ? '' : 'Remove'}</Button>\r\n                                </Popconfirm>)\r\n\r\n                            ]}\r\n                        >\r\n                            <Avatar style={{ marginRight: 10 }}>{item.name.substring(0, 1)}</Avatar>\r\n                            {`${item.name.split(' ')[0]} ${(item.name.split(' ')[1] ? item.name.split(' ')[1].substring(0, 1).toUpperCase() + '.' : '')} (${item.email})`}\r\n                            {\r\n                                item.isOwner && <Tag color='red' style={{ marginLeft: 10 }}>OWNER</Tag>\r\n                            }\r\n\r\n                        </List.Item>\r\n                    )}\r\n                />\r\n                <Modal title=\"Add More Members...\"\r\n                    visible={this.state.toggleAddMember}\r\n                    destroyOnClose\r\n                    onOk={this.addMembers}\r\n                    onCancel={this.toggleAddMember}>\r\n                    <Select\r\n                        mode=\"multiple\"\r\n                        allowClear\r\n                        style={{ width: '100%' }}\r\n                        placeholder=\"Start typing...\"\r\n                        onSearch={(e) => {\r\n                            this.setState({\r\n                                query: e\r\n                            }, this.searchMembers)\r\n                        }}\r\n                        onChange={this.updateMembersToAdd}\r\n                    >\r\n                        {\r\n                            this.state.membersToAdd.map(doc => {\r\n                                if (doc.isInServer) {\r\n                                    return <Option key={doc.key}>{`${doc.name} (${doc.email})`}</Option>\r\n                                } else {\r\n                                    return <Option key={doc.key}>{`Invite person with email '${doc.email}'`}</Option>\r\n                                }\r\n                            })\r\n                        }\r\n\r\n                    </Select>\r\n                </Modal>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(App);\r\n","import React from 'react';\r\nimport {\r\n    withRouter\r\n} from \"react-router-dom\";\r\nimport Overview from './ProjectsTabs/Overview';\r\nimport Bugs from './ProjectsTabs/Bugs';\r\nimport Announcements from './ProjectsTabs/Announcements';\r\nimport Calendar from './ProjectsTabs/Calendar';\r\nimport Settings from './ProjectsTabs/Settings';\r\nimport Collaborators from './ProjectsTabs/Collaborators'\r\nimport { Menu, Space } from 'antd';\r\nimport {\r\n\r\n    BugOutlined,\r\n    SettingOutlined,\r\n    DashboardOutlined,\r\n    CalendarOutlined,\r\n    NotificationOutlined,\r\n    TeamOutlined\r\n\r\n} from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport MediaQuery from 'react-responsive'\r\nimport { logErrorMessage } from '../../libraries/network-error-handling';\r\nimport { baseUrl, getDefaultHeader } from '../config';\r\n\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let id = this.props.location.pathname.split('/');\r\n        id = id[id.length - 1];\r\n        this.state = {\r\n            activeTab: 'overview',\r\n            title: '',\r\n            imageUrl: '',\r\n            project: { id }\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        let id = this.props.location.pathname.split('/');\r\n        id = id[id.length - 1];\r\n        // console.log(id)\r\n        this.updateProject(id);\r\n\r\n        const { location } = this.props;\r\n        let query = new URLSearchParams(location.search)\r\n        if (query.has('action')) {\r\n            this.getUriAction(query.get('action'))();\r\n        }\r\n    }\r\n\r\n    getUriAction = (action) => {\r\n        let actionSet = {\r\n            'OPEN_BUG': () => this.setState({ activeTab: 'bugs' }),\r\n            'OPEN_ANNOUNCEMENT': () => this.setState({ activeTab: 'announcements' })\r\n        }\r\n        return actionSet[action] ?? (() => null);\r\n    }\r\n\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const locationChanged =\r\n            this.props.location !== prevProps.location;\r\n\r\n\r\n        if (locationChanged) {\r\n            let id = this.props.location.pathname.split('/');\r\n            id = id[id.length - 1];\r\n            this.updateProject(id);\r\n\r\n            const { location } = this.props;\r\n            let query = new URLSearchParams(location.search)\r\n            if (query.has('action')) {\r\n                this.getUriAction(query.get('action'))();\r\n            }\r\n        }\r\n    }\r\n\r\n    updateProject = async (id) => {\r\n        const token = window.localStorage.getItem('token');\r\n        id = id || this.state.project.id;\r\n        try {\r\n            let { data } = await axios.get('/project/find', {\r\n                headers: getDefaultHeader(),\r\n                params: {\r\n                    projectId: id\r\n                }\r\n            });\r\n            // console.log(data)\r\n            if (data.project) {\r\n                this.setState({\r\n                    title: data.project.title,\r\n                    project: data.project,\r\n                    imageUrl: baseUrl + '/icon/' + (data.project.icon && data.project.icon[0] ? data.project.icon[0].id : '')\r\n                });\r\n            }\r\n\r\n\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n\r\n    handleClick = e => this.setState({ activeTab: e.key });\r\n\r\n    getImageSize = (isMobile) => {\r\n        if (isMobile) {\r\n            return 70\r\n        } else {\r\n            return (this.state.project.description ? 107 : 72)\r\n        }\r\n    }\r\n    render() {\r\n        const current = this.state.activeTab;\r\n        return (\r\n            <MediaQuery maxWidth={800}>\r\n                {(isMobile) =>\r\n                    <React.Fragment>\r\n                        <style>\r\n                            {\r\n                                `\r\n                        .bugg-skeleton-project-icon {\r\n                            transition: .3s\r\n                        }\r\n                        `\r\n                            }\r\n                        </style>\r\n                        <Space align='center'>\r\n\r\n\r\n                            <div\r\n                                className=\"bugg-skeleton-project-icon\"\r\n                                style={{\r\n                                    width: this.getImageSize(isMobile),\r\n                                    height: this.getImageSize(isMobile),\r\n                                    borderRadius: 5,\r\n                                    borderColor: 'rgba(0,0,0,.2)',\r\n                                    borderStyle: 'solid',\r\n                                    borderWidth: 1,\r\n                                    backgroundRepeat: 'no-repeat',\r\n                                    backgroundImage: 'url(' + this.state.imageUrl + ')',\r\n                                    backgroundPosition: 'center',\r\n                                    backgroundSize: 'cover',\r\n                                    backgroundColor: 'rgba(0 0 0 / 5%)',\r\n                                    marginRight: 10\r\n                                }} />\r\n                            <div>\r\n\r\n                                <h1 style={{\r\n                                    fontSize: isMobile ? 26 : 50,\r\n                                    margin: 0\r\n                                }}>\r\n                                    {this.state.title}\r\n                                </h1>\r\n                                <p style={{ margin: 0, opacity: .7, marginLeft: 3 }}>{this.state.project.description ?? ''}</p>\r\n                            </div>\r\n                        </Space>\r\n\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            marginRight: isMobile ? 10 : 64,\r\n                            flexDirection: 'column',\r\n\r\n                        }}>\r\n\r\n\r\n                            <Menu\r\n                                overflowedIndicator='More'\r\n                                style={{\r\n                                    marginBottom: 20,\r\n                                    marginTop: 20,\r\n                                    position: 'relative',\r\n                                    // flex: 1\r\n                                    width: '99%',\r\n                                    //left: -18,\r\n                                    // maxWidth: 900\r\n                                }}\r\n                                onClick={this.handleClick} selectedKeys={[current]} mode=\"horizontal\">\r\n                                <Menu.Item key=\"overview\" icon={<DashboardOutlined />}>\r\n                                    Overview\r\n                                </Menu.Item>\r\n                                <Menu.Item key=\"bugs\" icon={<BugOutlined />}>\r\n                                    Bugs\r\n                                </Menu.Item>\r\n                                <Menu.Item key=\"announcements\" icon={<NotificationOutlined />}>\r\n                                    Announcements\r\n                                </Menu.Item>\r\n                                <Menu.Item key=\"calendar\" icon={<CalendarOutlined />}>\r\n                                    Calendar\r\n                                </Menu.Item>\r\n                                <Menu.Item key=\"settings\" icon={<SettingOutlined />}>\r\n                                    Settings\r\n                                </Menu.Item>\r\n                                <Menu.Item key=\"collaborators\" icon={<TeamOutlined />}>\r\n                                    Collaborators\r\n                                </Menu.Item>\r\n                            </Menu>\r\n\r\n\r\n                        </div>\r\n                        {\r\n                            (() => {\r\n                                switch (this.state.activeTab) {\r\n                                    case \"overview\":\r\n                                        return <Overview project={this.state.project} />\r\n                                    case \"bugs\":\r\n                                        return <Bugs project={this.state.project} />\r\n                                    case \"announcements\":\r\n                                        return <Announcements project={this.state.project} />\r\n                                    case \"calendar\":\r\n                                        return <Calendar project={this.state.project} />\r\n                                    case \"settings\":\r\n                                        return <Settings project={this.state.project} updateProject={() => {\r\n                                            this.updateProject()\r\n                                            this.props.updateProjects()\r\n\r\n                                        }}\r\n                                            updateProjectOnNavigation={this.props.updateProjects}\r\n                                        />\r\n                                    case \"collaborators\":\r\n                                        return <Collaborators\r\n                                            isMobile={isMobile}\r\n                                            updateProject={this.props.updateProjects}\r\n                                            project={this.state.project} />\r\n                                    default:\r\n                                        return 'hi'\r\n                                }\r\n\r\n                            })()\r\n                        }\r\n\r\n\r\n\r\n                    </React.Fragment>\r\n                }\r\n            </MediaQuery>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(App);\r\n","import { useEffect, useState } from 'react';\r\nimport { Input, Space, Button, Select, Form, Upload, notification } from 'antd';\r\nimport axios from 'axios';\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\n\r\nconst { Option } = Select;\r\nlet formData = new FormData();\r\n\r\n\r\nexport function CreateProject(props) {\r\n\r\n\r\n    const [value, setValue] = useState([]);\r\n    // const [loading, setLoading] = useState(false);\r\n    const [form] = Form.useForm();\r\n    const [imageUri, setImageUri] = useState('');\r\n\r\n\r\n\r\n\r\n    const beforeUpload = async (file) => {\r\n        //console.log(file)\r\n        if (formData.get('icon')) {\r\n            formData.delete('icon')\r\n        }\r\n        formData.append('icon', file);\r\n\r\n        let fileReader = new FileReader();\r\n        fileReader.addEventListener('load', () => {\r\n            setImageUri(fileReader.result);\r\n        }, false)\r\n\r\n        fileReader.readAsDataURL(file);\r\n\r\n        return false;\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        let res;\r\n        console.log(value)\r\n\r\n        try {\r\n            res = await axios.post('/project/create', {\r\n                title: e.title,\r\n                description: e.description,\r\n                members: value.join()\r\n            },\r\n                {\r\n                    headers: getDefaultHeader()\r\n                });\r\n            if (formData.get('icon')) {\r\n                await axios.post('/icon/upload', formData, {\r\n                    headers: {\r\n                        ...(getDefaultHeader()),\r\n                        'Content-Type': 'multipart/form-data'\r\n                    },\r\n                    params: {\r\n                        projectId: res.data.id\r\n                    }\r\n                })\r\n            }\r\n            //  let imageResponse = \r\n\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n            notification.error({\r\n                message: getErrorMessage(e)\r\n            })\r\n        }\r\n        if (res) {\r\n            console.log(res.data)\r\n            // message.success('project was created')\r\n            notification.success({\r\n                message: 'project was created'\r\n            })\r\n            form.resetFields();\r\n            props.updateProjects()\r\n            setImageUri('')\r\n            props.closeFunc()\r\n\r\n\r\n        }\r\n\r\n    }\r\n    // const [name, setName] = useState('imran')\r\n    const [members, setMembers] = useState([]);\r\n    const [query, setQuery] = useState();\r\n\r\n    useEffect(() => {\r\n        const handleChange = async () => {\r\n            let results;\r\n            // setLoading(true);\r\n\r\n            try {\r\n                results = await axios.get('/user/search', {\r\n                    params: {\r\n                        query: query\r\n                    },\r\n                    headers: getDefaultHeader()\r\n                })\r\n            } catch (e) {\r\n                console.error(getErrorMessage(e))\r\n                // setLoading(false);\r\n                return\r\n            }\r\n\r\n            //console.log(results.data)\r\n            let newMembers = [];\r\n            let users = results.data.results;\r\n            for (let i = 0; i < users.length; i++) {\r\n                newMembers.push({\r\n                    key: users[i].id,\r\n                    name: users[i].name,\r\n                    email: users[i].email,\r\n                    id: users[i].id\r\n                })\r\n            }\r\n\r\n            setMembers(newMembers);\r\n            //setLoading(false);\r\n            // console.log('Updated: ')\r\n            //console.log(newMembers);\r\n        }\r\n\r\n        handleChange()\r\n    }, [query])\r\n\r\n\r\n    const handleChange = (val, option) => {\r\n        //console.log(value)\r\n        setValue(val)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n\r\n            <Space direction='vertical' style={{ width: '100%' }}>\r\n                <Form\r\n                    layout='vertical'\r\n                    onFinish={handleSubmit}\r\n                    form={form}\r\n                >\r\n                    <Form.Item\r\n                        label=\"Title\"\r\n                        name=\"title\"\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: 'Please add a title',\r\n                            },\r\n                        ]}\r\n                    >\r\n                        <Input\r\n                            type=\"text\" />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"Description\"\r\n                        name=\"description\"\r\n\r\n                    >\r\n                        <Input\r\n                            type=\"text\" />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"Icon\"\r\n                        name=\"icon\"\r\n\r\n                    >\r\n                        <Upload\r\n                            name=\"avatar\"\r\n                            listType=\"picture-card\"\r\n                            accept='image/*'\r\n                            showUploadList={false}\r\n                            // action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n                            beforeUpload={beforeUpload}\r\n                        // onChange={this.handleChange}\r\n                        >\r\n                            {\r\n                                imageUri === '' ?\r\n                                    \"Upload Icon\" :\r\n                                    <div style={{\r\n                                        width: '80%',\r\n                                        height: '80%',\r\n                                        backgroundImage: 'url(' + imageUri + ')',\r\n                                        backgroundSize: 'cover',\r\n                                        backgroundPosition: 'center'\r\n                                    }}\r\n                                    />\r\n\r\n                            }\r\n\r\n                        </Upload>\r\n                    </Form.Item>\r\n\r\n                    <Form.Item\r\n                        label=\"Members\"\r\n                        name=\"members\"\r\n                    >\r\n                        <Select\r\n                            showSearch\r\n                            mode='multiple'\r\n                            // value={this.state.value}\r\n                            placeholder={\"search...\"}\r\n                            // style={this.props.style}\r\n                            // defaultActiveFirstOption={false}\r\n                            // showArrow={false}\r\n                            filterOption={false}\r\n                            onSearch={setQuery}\r\n                            onChange={handleChange}\r\n                        // notFoundContent={\"\"}\r\n                        >\r\n                            {/* <Option key={'1'}>{query}</Option> */}\r\n                            {\r\n                                members.map(doc => <Option key={doc.id}>{`${doc.name} (${doc.email})`}</Option>)\r\n                            }\r\n                        </Select>\r\n                    </Form.Item>\r\n                    <Space style={{\r\n                        width: '100%',\r\n                        marginTop: 20,\r\n                        display: 'inline-flex',\r\n                        justifyContent: 'flex-end'\r\n                    }}>\r\n                        <Button onClick={() => {\r\n                            form.resetFields();\r\n                            props.closeFunc()\r\n                            setImageUri('')\r\n                        }}>\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            htmlType='submit'\r\n                            type='primary'>\r\n                            Create\r\n                        </Button>\r\n                    </Space>\r\n                </Form>\r\n\r\n\r\n\r\n\r\n\r\n            </Space>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n","import React, { useState } from 'react'\r\nimport {\r\n    Button, Input\r\n    , Space, notification\r\n} from 'antd'\r\nimport axios from 'axios';\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\n\r\nconst JoinProject = (props) => {\r\n    const [projectId, setProjectId] = useState('');\r\n\r\n    const handleSubmit = async () => {\r\n\r\n        let res;\r\n\r\n        try {\r\n            res = await axios.post('/project/join', {\r\n                projectId\r\n            }, {\r\n                headers: getDefaultHeader()\r\n            })\r\n        } catch (e) {\r\n\r\n            console.error(getErrorMessage(e))\r\n            notification.error({\r\n                message: getErrorMessage(e)\r\n            })\r\n            return\r\n        }\r\n\r\n        notification.success({\r\n            message: 'You have joined project ' + res.data.project.title + '!'\r\n        })\r\n        props.updateProjects()\r\n        setProjectId('');\r\n        props.closeFunc();\r\n\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Input\r\n                value={projectId}\r\n                onChange={(e) => setProjectId(e.target.value)}\r\n                placeholder=\"Type project ID here...\" />\r\n            <Space style={{\r\n                width: '100%',\r\n                marginTop: 20,\r\n                display: 'inline-flex',\r\n                justifyContent: 'flex-end'\r\n            }}>\r\n                <Button onClick={() => {\r\n                    setProjectId('');\r\n                    props.closeFunc();\r\n\r\n                }}>\r\n                    Cancel\r\n                </Button>\r\n                <Button\r\n                    onClick={handleSubmit}\r\n                    type='primary'>\r\n                    Join\r\n                </Button>\r\n            </Space>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default JoinProject","import React, { useEffect, useState } from 'react'\r\nimport {\r\n    Card, Button\r\n    , Col, Row, Divider, Space, Modal\r\n} from 'antd'\r\nimport { CreateProject } from './CreateProject'\r\nimport {\r\n    useHistory, withRouter\r\n} from \"react-router-dom\";\r\nimport JoinProject from './JoinProject';\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport { baseUrl } from '../pages/config';\r\n\r\nfunction Home(props) {\r\n\r\n    const [visibleCreate, setVisibleCreate] = useState(false);\r\n    const [visibleJoin, setVisibleJoin] = useState(false);\r\n    const projects = props.projects ?? [];\r\n    const history = useHistory();\r\n    const isMobile = useMediaQuery({ maxWidth: 800 })\r\n    useEffect(props.updateProjects, [])\r\n\r\n\r\n    return (\r\n        <div style={{\r\n            marginRight: (isMobile ? 10 : 64),\r\n            display: 'flex',\r\n            flexDirection: 'column'\r\n        }}>\r\n            <div >\r\n\r\n\r\n                <h1>\r\n                    Home\r\n                </h1>\r\n\r\n                <Divider />\r\n\r\n\r\n            </div>\r\n            <Modal\r\n                title=\"Create Project\"\r\n                footer={null}\r\n                onCancel={() => setVisibleCreate(false)}\r\n                visible={visibleCreate}>\r\n                <CreateProject\r\n                    updateProjects={props.updateProjects}\r\n                    closeFunc={() => setVisibleCreate(false)} />\r\n            </Modal>\r\n\r\n\r\n            <Modal\r\n                title=\"Join Project\"\r\n                footer={null}\r\n                onCancel={() => setVisibleJoin(false)}\r\n                visible={visibleJoin}>\r\n                <JoinProject\r\n                    updateProjects={props.updateProjects}\r\n                    closeFunc={() => setVisibleJoin(false)} />\r\n            </Modal>\r\n\r\n\r\n\r\n            <style>{`\r\n.bugg-button:hover {\r\n    background-color: rgba(0 0 0 / 10%);\r\n    cursor: pointer;\r\n}\r\n\r\n.bugg-button {\r\n    transition: 0.5s;\r\n}\r\n`}</style>\r\n            <Row\r\n                // style={{ width: '90%' }}\r\n                gutter={16}>\r\n                <Col span={24}>\r\n                    <Card\r\n                        bodyStyle={{\r\n                            paddingLeft: 40,\r\n                            paddingRight: 40\r\n                        }}\r\n                        extra={\r\n                            <Space>\r\n                                <Button type='primary' onClick={() => setVisibleCreate(true)}>Create</Button>\r\n                                <Button onClick={() => setVisibleJoin(true)}>Join</Button>\r\n                            </Space>\r\n                        }\r\n                        title=\"Projects\">\r\n\r\n                        <Row gutter={[40, 40]} >\r\n                            {\r\n                                projects.map((item) => {\r\n                                    function getImageUri() {\r\n                                        if (item.icon.id) {\r\n                                            return baseUrl + '/icon/' + item.icon.id\r\n                                        } else {\r\n                                            return ''\r\n                                        }\r\n                                    }\r\n                                    return (\r\n                                        <Col //span={3}\r\n                                            xs={12}\r\n                                            md={6}\r\n                                            xl={3}\r\n                                        >\r\n                                            <ProjectButton\r\n                                                title={item.title}\r\n                                                onClick={() => history.push('/dashboard/projects/' + item.id)}\r\n                                                imageUrl={getImageUri()}\r\n                                            />\r\n                                        </Col>\r\n                                    )\r\n                                })\r\n\r\n                            }\r\n                        </Row>\r\n\r\n\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n\r\n\r\n}\r\n\r\nconst ProjectButton = (props) => {\r\n    return (\r\n        <Space\r\n            style={{\r\n                width: '100%',\r\n                borderRadius: 5\r\n            }}\r\n\r\n            direction='vertical'\r\n            onClick={props.onClick}\r\n            align='center'>\r\n\r\n            <div\r\n                className=\"bugg-button\"\r\n                style={{\r\n                    width: 120,\r\n                    borderRadius: 5,\r\n                    paddingTop: 5\r\n                }}>\r\n\r\n                <div style={{\r\n                    width: 100,\r\n                    height: 100,\r\n                    borderRadius: 5,\r\n                    borderColor: 'rgba(0,0,0,.2)',\r\n                    borderStyle: 'solid',\r\n                    backgroundRepeat: 'no-repeat',\r\n                    borderWidth: 1,\r\n                    backgroundImage: 'url(' + props.imageUrl + ')',\r\n                    backgroundPosition: 'center',\r\n                    backgroundSize: 'cover',\r\n                    backgroundColor: 'rgba(0 0 0 / 5%)',\r\n                    marginLeft: 'auto',\r\n                    marginRight: 'auto'\r\n                }} />\r\n                <h4 style={{ maxWidth: 120, textAlign: 'center' }}>\r\n                    {props.title}\r\n                </h4>\r\n            </div>\r\n\r\n        </Space>\r\n\r\n    )\r\n}\r\n\r\nexport default withRouter(Home);","import React from 'react'\r\nimport {\r\n    Input, Button\r\n    , Modal, Divider, Space, //Timeline,\r\n    List,\r\n    Avatar,\r\n    Upload,\r\n\r\n\r\n} from 'antd';\r\nimport { message } from 'antd';\r\nimport MediaQuery from 'react-responsive';\r\nimport bugg, { getMe } from '../libraries/bugg';\r\nimport { reconfigToken } from '../libraries/socket';\r\nimport { getErrorMessage, logErrorMessage } from '../libraries/network-error-handling';\r\n\r\nconst data = [\r\n    'General',\r\n\r\n];\r\n\r\n\r\n\r\n\r\nclass Settings extends React.Component {\r\n    state = {\r\n        selectedSetting: data[0].toLowerCase(),\r\n        user: {\r\n            name: '',\r\n            email: '',\r\n            id: '',\r\n        },\r\n        name: '',\r\n        email: '',\r\n        loading: false,\r\n        password: '',\r\n        newPassword: '',\r\n        updatePasswordVisible: false,\r\n        loadingUpdatePassword: false,\r\n        previewImageUri: ''\r\n    }\r\n    componentDidMount() {\r\n        this.fetchUser()\r\n    }\r\n\r\n\r\n\r\n    beforeUpload = async (file) => {\r\n\r\n        let formData = new FormData();\r\n\r\n        formData.append('icon', file);\r\n\r\n\r\n        try {\r\n            await bugg.User.uploadUserIcon(formData);\r\n            this.fetchUser()\r\n            this.props.getWelcomeMessage()\r\n            message.success('Icon updated')\r\n        } catch (e) {\r\n\r\n            logErrorMessage(e)\r\n            message.error(getErrorMessage(e))\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    updateIcon = async () => {\r\n        try {\r\n            let iconUri = await bugg.User.getUserIconUri();\r\n            this.setState({\r\n                previewImageUri: iconUri\r\n            })\r\n        } catch (e) {\r\n\r\n        }\r\n    }\r\n\r\n    fetchUser = async () => {\r\n        try {\r\n            let user = await getMe();\r\n            this.updateIcon()\r\n\r\n            this.setState({\r\n                user,\r\n                name: user.name,\r\n                email: user.email\r\n            })\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Udates user name and email\r\n     */\r\n    updateUser = async (field, value) => {\r\n        this.setState({ loading: true })\r\n        try {\r\n            let user = await bugg.User.updateUser(field, value)\r\n\r\n            this.setState({\r\n                user,\r\n                name: user.name,\r\n                email: user.email\r\n            });\r\n            this.props.getWelcomeMessage()\r\n            message.success(\"user updated\")\r\n        } catch (e) {\r\n            this.setState({\r\n                [field]: this.state.user[field]\r\n            })\r\n            message.error('Error: ' + getErrorMessage(e))\r\n        }\r\n        this.setState({ loading: false })\r\n    }\r\n\r\n    updatePassword = async () => {\r\n        const { password, newPassword } = this.state;\r\n\r\n        if (!(password && newPassword)) {\r\n            message.error('Please input current and new password')\r\n            return;\r\n        }\r\n        this.setState({\r\n            loadingUpdatePassword: true\r\n        })\r\n        try {\r\n            let token = await bugg.User.updatePassword(password, newPassword);\r\n            message.success('Password updated');\r\n            this.setState({\r\n                updatePasswordVisible: false\r\n            })\r\n            window.localStorage.setItem('token', token);\r\n            reconfigToken();\r\n            this.fetchUser()\r\n\r\n        } catch (e) {\r\n            message.error(getErrorMessage(e))\r\n        }\r\n        this.setState({\r\n            loadingUpdatePassword: false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const settings = [\r\n            {\r\n                title: 'Name',\r\n                reactNode: (<Space  >\r\n\r\n                    <Input\r\n                        value={this.state.name}\r\n                        onPressEnter={() => {\r\n                            if (this.state.name !== this.state.user.name) this.updateUser('name', this.state.name)\r\n                        }}\r\n                        onChange={(e) => {\r\n                            this.setState({\r\n                                name: e.target.value\r\n                            })\r\n                        }}\r\n\r\n                        type=\"text\" />\r\n                    <Button\r\n                        loading={this.state.loading}\r\n                        onClick={() => this.updateUser('name', this.state.name)}\r\n                        type='primary'\r\n                        disabled={(this.state.name === this.state.user.name)}\r\n\r\n                    >\r\n                        Update\r\n                    </Button>\r\n\r\n                </Space>)\r\n            }, {\r\n                title: 'Email',\r\n                reactNode: (<Space  >\r\n\r\n                    <Input\r\n                        value={this.state.email}\r\n                        onPressEnter={() => {\r\n                            if (this.state.email !== this.state.user.email) this.updateUser('email', this.state.email)\r\n                        }}\r\n                        onChange={(e) => {\r\n                            this.setState({\r\n                                email: e.target.value\r\n                            })\r\n                        }}\r\n                        type=\"text\" />\r\n                    <Button\r\n                        loading={this.state.loading}\r\n                        onClick={() => this.updateUser('email', this.state.email)}\r\n                        type='primary'\r\n                        disabled={(this.state.email === this.state.user.email)}\r\n\r\n                    >\r\n                        Update\r\n                    </Button>\r\n\r\n                </Space>)\r\n            }, {\r\n                title: 'Password',\r\n                reactNode: (\r\n                    <Button\r\n\r\n                        onClick={() => this.setState({ updatePasswordVisible: true })}\r\n                        type='primary'\r\n\r\n\r\n                    >\r\n                        Update\r\n                    </Button>\r\n                )\r\n            },\r\n            {\r\n                title: 'User Icon',\r\n                reactNode: (\r\n                    <div>\r\n                        <Upload\r\n                            name=\"avatar\"\r\n                            listType=\"picture-card\"\r\n                            accept='image/*'\r\n                            showUploadList={false}\r\n\r\n                            beforeUpload={this.beforeUpload}\r\n                        // beforeUpload={() => { message.error('das'); return false; }}\r\n                        >\r\n                            {\r\n                                !this.state.previewImageUri ?\r\n                                    \"Upload Icon\" :\r\n                                    <div style={{\r\n                                        width: '80%',\r\n                                        height: '80%',\r\n                                        backgroundImage: 'url(' + this.state.previewImageUri + ')',\r\n                                        backgroundSize: 'cover',\r\n                                        backgroundPosition: 'center'\r\n                                    }}\r\n                                    />\r\n\r\n                            }\r\n\r\n                        </Upload>\r\n                    </div>\r\n\r\n                )\r\n            },\r\n        ]\r\n        return (\r\n            <MediaQuery maxWidth={800}>\r\n                {(isMobile) =>\r\n                    <div\r\n                        style={{\r\n                            marginRight: isMobile ? 10 : 64\r\n                        }}\r\n                    >\r\n                        <style>{`\r\n.bugg-list-item-button:hover {\r\n    background-color: rgb(0 0 0 / 5%);\r\n    cursor: pointer;\r\n}\r\n.bugg-list-item-button {\r\n    background-color: white;\r\n}\r\n`}</style>\r\n\r\n\r\n                        <h1>\r\n                            Settings\r\n                        </h1>\r\n                        <Divider\r\n\r\n                        />\r\n\r\n\r\n\r\n                        <div style={{\r\n                            display: isMobile ? 'flex' : 'inline-flex',\r\n                            width: '100%',\r\n                            flexDirection: isMobile ? 'column' : 'unset'\r\n                        }}>\r\n\r\n                            <div>\r\n\r\n                                <List\r\n                                    // header={<div>Header</div>}\r\n                                    // footer={<div>Footer</div>}\r\n                                    bordered\r\n                                    dataSource={data}\r\n                                    style={{\r\n                                        width: isMobile ? 'unset' : 200,\r\n                                        marginBottom: isMobile ? 20 : 'unset'\r\n                                    }}\r\n                                    renderItem={(item, ind) => (\r\n                                        <List.Item\r\n                                            key={ind}\r\n                                            style={{\r\n                                                color: (this.state.selectedSetting === item.toLowerCase() ? '#0094f7' : 'black')\r\n                                            }}\r\n                                            className=\"bugg-list-item-button\">\r\n                                            <Avatar\r\n                                                style={{\r\n                                                    marginRight: 10\r\n                                                }}\r\n                                            >{item.substring(0, 1).toLocaleUpperCase()}</Avatar> {item}\r\n                                        </List.Item>\r\n                                    )}\r\n                                /></div>\r\n\r\n                            <div style={{\r\n                                flex: 1,\r\n                                marginLeft: isMobile ? 0 : 20\r\n                            }}>\r\n                                {\r\n                                    (() => {\r\n\r\n                                        switch (this.state.selectedSetting) {\r\n                                            case data[0].toLowerCase():\r\n                                                return (\r\n                                                    <List\r\n                                                        bordered\r\n                                                        style={{\r\n                                                            // maxWidth: 600\r\n                                                        }}\r\n                                                        itemLayout=\"vertical\"\r\n                                                        dataSource={settings}\r\n                                                        renderItem={item =>\r\n                                                            <List.Item\r\n                                                                key={item.title}\r\n                                                                extra={[item.reactNode]}\r\n                                                            >\r\n                                                                {item.title}\r\n                                                            </List.Item>}\r\n                                                    />\r\n                                                )\r\n                                            default:\r\n                                                return 'no tab selected'\r\n                                        }\r\n\r\n                                    })()\r\n                                }\r\n                            </div>\r\n                            <Modal\r\n                                okButtonProps={{\r\n                                    loading: this.state.loadingUpdatePassword\r\n                                }}\r\n                                destroyOnClose\r\n                                visible={this.state.updatePasswordVisible}\r\n                                title=\"Update Password\"\r\n                                onOk={this.updatePassword}\r\n                                onCancel={() => this.setState({ updatePasswordVisible: false })}\r\n                            >\r\n                                <p style={{ marginBottom: 10 }}>Current Password: </p>\r\n                                <Input\r\n                                    type='password'\r\n                                    autoComplete='new-password'\r\n                                    name='new-password'\r\n                                    value={this.state.password}\r\n                                    onChange={(e) => this.setState({ password: e.target.value })}\r\n                                    placeholder='Type here...'\r\n                                />\r\n\r\n                                <p style={{ marginBottom: 10, marginTop: 20 }}>New Password: </p>\r\n                                <Input\r\n                                    type='password'\r\n                                    autoComplete='new-password'\r\n                                    value={this.state.newPassword}\r\n                                    onChange={(e) => this.setState({ newPassword: e.target.value })}\r\n                                    placeholder='Type here...'\r\n                                />\r\n                            </Modal>\r\n\r\n                        </div>\r\n                    </div>\r\n                }\r\n            </MediaQuery>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default Settings;","import React from 'react'\r\nimport {\r\n    Card, Button, Avatar\r\n    , Tag, List, Space, message\r\n} from 'antd'\r\nimport axios from 'axios';\r\nimport { MailOutlined } from '@ant-design/icons'\r\nimport moment from 'moment';\r\nimport {\r\n    withRouter\r\n} from \"react-router-dom\";\r\nimport { getErrorMessage, logErrorMessage } from '../libraries/network-error-handling';\r\nimport { getDefaultHeader } from './config';\r\nimport { addEventListener, removeEventListener } from '../libraries/socket';\r\n\r\nclass Notification extends React.Component {\r\n\r\n    state = {\r\n        page: 1,\r\n        pageSize: 10,\r\n        notifications: [],\r\n        total: 1,\r\n        isListening: false\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        addEventListener('new-notification', this.onRecieveNotitification)\r\n        this.fetchNotifications()\r\n        // alert('hi')\r\n    }\r\n\r\n    getAction = (notification) => {\r\n        switch (notification.type) {\r\n            case 'PROJECT_INVITE':\r\n                this.props.joinProject(notification.payload.projectId)\r\n                break;\r\n            case 'NEW_MESSAGE':\r\n                this.props.openNewMessage(notification.payload.conversationId);\r\n                this.props.close()\r\n                break;\r\n            case 'NEW_BUG':\r\n                this.props.history\r\n                    .push('/dashboard/projects/' + notification.payload.projectId + `?action=OPEN_BUG&bugId=${notification.payload.bugId}`);\r\n                this.props.close()\r\n                break;\r\n            case 'NEW_ANNOUNCEMENT':\r\n                this.props.history\r\n                    .push('/dashboard/projects/' + notification.payload.projectId + `?action=OPEN_ANNOUNCEMENT&announcementId=${notification.payload.announcementId}`);\r\n                this.props.close()\r\n                break;\r\n            default:\r\n                message.error(\"no type given\")\r\n        }\r\n        this.dismissNotification(notification.id)\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n        removeEventListener('new-notification', this.onRecieveNotitification)\r\n    }\r\n\r\n    /**\r\n     * Dismisses notification on server\r\n     * @param {string} notificationId Id of notification\r\n     */\r\n    dismissNotification = async (notificationId) => {\r\n        try {\r\n            await axios.delete('/notification/' + notificationId, {\r\n                headers: getDefaultHeader()\r\n            })\r\n            this.fetchNotifications()\r\n            message.success(\"Notification Dismissed\")\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error(\"Error: \" + getErrorMessage(e))\r\n        }\r\n\r\n    }\r\n\r\n    dismissAllNotifications = async () => {\r\n        try {\r\n            await axios.delete('/notification/all', {\r\n                headers: getDefaultHeader()\r\n            })\r\n            this.fetchNotifications()\r\n            message.success(\"All notifications were dismissed\")\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n            message.error(\"Error: \" + getErrorMessage(e))\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onRecieveNotitification = (notif) => {\r\n        this.setState({\r\n            page: 1\r\n        }, this.fetchNotifications);\r\n\r\n    }\r\n\r\n    // componentDidUpdate(prevProps) {\r\n    //     if (prevProps.socket === null && this.props.socket !== null) {\r\n    //         this.props.socket.on('new-notification', this.onRecieveNotitification)\r\n    //     }\r\n    // }\r\n\r\n\r\n    fetchNotifications = async () => {\r\n        const { page, pageSize } = this.state;\r\n\r\n        try {\r\n            let { data } = await axios.get('/notification/all', {\r\n                headers: getDefaultHeader(),\r\n                params: {\r\n                    limit: pageSize,\r\n                    skip: (page - 1) * pageSize\r\n                }\r\n            });\r\n            console.log(data)\r\n\r\n            this.setState({\r\n                notifications: data.notifications,\r\n                total: data.totalNotifications\r\n            })\r\n\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n    updatePagination = (page, pageSize) => {\r\n        this.setState({\r\n            page, pageSize\r\n        }, this.fetchNotifications)\r\n    }\r\n\r\n    getNotificationActionMessage = (type) => {\r\n        let message = {\r\n            'PROJECT_INVITE': 'Join Project',\r\n            'NEW_MESSAGE': 'View Message'\r\n        }\r\n        return message[type] ?? 'View'\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div >\r\n                <Space style={{\r\n                    marginBottom: 20\r\n                }}>\r\n                    <Button\r\n                        onClick={this.dismissAllNotifications}\r\n                        type='primary'>\r\n                        Dismiss All\r\n                    </Button>\r\n                </Space>\r\n                <List\r\n                    pagination={{\r\n                        pageSize: this.state.pageSize,\r\n                        page: this.state.page,\r\n                        onChange: this.updatePagination,\r\n                        total: this.state.total\r\n                    }}\r\n                    dataSource={this.state.notifications}\r\n                    renderItem={item =>\r\n                        <div\r\n                            key={item.id}\r\n                            style={{\r\n                                marginBottom: 20\r\n                            }}>\r\n                            <Card\r\n                                actions={[\r\n                                    <Button\r\n                                        onClick={() => this.getAction(item)}\r\n                                        type='primary'>{this.getNotificationActionMessage(item.type)}</Button>,\r\n                                    <Button\r\n                                        onClick={() => this.dismissNotification(item.id)}\r\n                                        type='link'>Dismiss</Button>\r\n                                ]}\r\n                            >\r\n                                <Card.Meta\r\n                                    avatar={<Avatar icon={<MailOutlined />} />}\r\n                                    title={<>{item.title}\r\n                                        {/* <span style={{ color: 'red' }}>\r\n                                            {!item.read ? 'ddd' : ' - Unread'}\r\n                                        </span> */}\r\n                                        {item.read ? null : <Tag color='red' style={{ marginLeft: 10 }}>New</Tag>}\r\n                                    </>}\r\n\r\n                                    description={\r\n                                        item.description + ' - ' + moment(new Date(item.createdAt)).fromNow()\r\n                                    }\r\n                                />\r\n                            </Card>\r\n                        </div>\r\n                    }\r\n                />\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default withRouter(Notification);","import moment from \"moment\";\r\nimport { Tag, Space, Card, Button, List, Avatar } from 'antd'\r\nimport {\r\n\r\n    MinusOutlined\r\n} from '@ant-design/icons';\r\n\r\n\r\nfunction MessageContacts(props) {\r\n    const {\r\n        toggleCollapse,\r\n        toggleHide,\r\n        sendMessage,\r\n        conversations,\r\n        selectConversation,\r\n        activeConversations,\r\n        isMobile\r\n    } = props;\r\n\r\n    const showNew = (conversation) => {\r\n        let activeConversationsIds = activeConversations.map(doc => doc.id);\r\n\r\n        if (activeConversationsIds.includes(conversation.id)) {\r\n            return false;\r\n        } else {\r\n            return conversation.newMessages\r\n        }\r\n\r\n    }\r\n\r\n    const getDisplay = () => {\r\n        if (isMobile) {\r\n            if (activeConversations.length > 0) {\r\n                return 'none'\r\n            } else {\r\n                return (toggleHide) ? 'none' : 'block'\r\n            }\r\n        } else {\r\n            return (toggleHide) ? 'none' : 'block'\r\n        }\r\n\r\n    }\r\n\r\n    const formatName = (name) => {\r\n        var nameSegments = name.split(' ');\r\n        let shortHandName = nameSegments[0];\r\n\r\n        if (nameSegments[1]) {\r\n            shortHandName += ' ' + nameSegments[1].substring(0, 1).toUpperCase() + '.'\r\n        }\r\n\r\n        return shortHandName\r\n    }\r\n\r\n\r\n    return (\r\n\r\n        <Card\r\n            headStyle={{\r\n                backgroundColor: '#2f2f2f',\r\n                color: 'white',\r\n\r\n            }}\r\n\r\n            title=\"Contacts\"\r\n            extra={\r\n                <Space size='middle'>\r\n                    <Button\r\n                        onClick={toggleCollapse}\r\n                        type='text' icon={<MinusOutlined style={{ color: 'white' }} />} />\r\n                </Space>\r\n            }\r\n\r\n            style={{\r\n                width: 350,\r\n                //height: 64,\r\n                borderColor: 'rgba(0,0,0,.3)',\r\n                padding: 0,\r\n                overflow: 'hidden',\r\n                display: getDisplay()\r\n            }}\r\n            id=\"contacts-card\"\r\n            bodyStyle={{\r\n                padding: 0,\r\n                height: 300,\r\n                display: 'flex',\r\n                flexDirection: 'column'\r\n            }}\r\n        >\r\n            <Space style={{\r\n                width: '100%',\r\n                marginTop: 20,\r\n                marginBottom: 20\r\n            }}\r\n            >\r\n                <Button\r\n                    style={{\r\n                        marginLeft: 20\r\n                    }}\r\n                    onClick={sendMessage}\r\n                    type='primary'>\r\n                    Send New Message\r\n                </Button>\r\n            </Space>\r\n            <div style={{\r\n                flex: 1,\r\n                overflowY: 'auto'\r\n            }}>\r\n                <List\r\n                    dataSource={conversations}\r\n                    renderItem={item => (\r\n                        <List.Item\r\n                            key={item.id}\r\n                            style={{\r\n                                paddingLeft: 20,\r\n                                paddingRight: 20\r\n                            }}\r\n                            extra={[moment((new Date(item.updatedAt)).getTime()).fromNow()]}\r\n                        >\r\n                            <List.Item.Meta\r\n                                title={<>\r\n                                    <a href=\"#\" onClick={(e) => selectConversation(e, item)}\r\n                                    >{formatName(item.reciepent.name)}\r\n                                    </a>\r\n                                    {showNew(item) ?\r\n                                        <Tag\r\n                                            style={{\r\n                                                marginLeft: 10\r\n                                            }}\r\n                                            color='red'>New</Tag> : null\r\n                                    }\r\n\r\n                                </>}\r\n                                avatar={\r\n                                    <Avatar style={{ marginRight: 10 }}>\r\n                                        {item.reciepent.name.substring(0, 1).toUpperCase()}\r\n                                    </Avatar>}\r\n                                description={item.lastMessageText}\r\n                            />\r\n\r\n                        </List.Item>\r\n                    )}\r\n                />\r\n            </div>\r\n\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default MessageContacts","import react from 'react';\r\nimport {\r\n    Card,\r\n    Space,\r\n    Button,\r\n    Input,\r\n    Avatar,\r\n    List, Tag\r\n} from 'antd';\r\nimport {\r\n    CloseOutlined, MinusOutlined\r\n} from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport anime from 'animejs';\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage, logErrorMessage } from '../libraries/network-error-handling';\r\nimport bugg from '../libraries/bugg'\r\nimport { addEventListener, removeEventListener } from './../libraries/socket';\r\n\r\n\r\nfunction Message(props) {\r\n    if (props.recipient)\r\n        return (\r\n            <div style={{\r\n                display: 'inline-flex',\r\n\r\n                width: '100%'\r\n            }}>\r\n                <Avatar style={{ marginLeft: 7, }}>{props.avatarLetter}</Avatar>\r\n                <p style={{\r\n                    maxWidth: 200,\r\n                    backgroundColor: 'rgb(0 0 0 / 20%)',\r\n                    padding: 5,\r\n                    borderRadius: 4,\r\n                    marginLeft: 10\r\n                }}>\r\n                    {props.message}\r\n                </p>\r\n            </div>)\r\n    else if (props.sender) {\r\n        return (<div style={{\r\n            display: 'inline-flex',\r\n            justifyContent: 'flex-end',\r\n\r\n            width: '100%'\r\n        }}>\r\n\r\n            <p style={{\r\n                maxWidth: 200,\r\n                backgroundColor: 'rgb(24 144 255 / 30%)',\r\n                padding: 5,\r\n                borderRadius: 4,\r\n                marginRight: 10\r\n            }}>\r\n                {props.message}\r\n            </p>\r\n            <Avatar style={{ marginRight: 7, }}>{props.avatarLetter}</Avatar>\r\n        </div>)\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default class MessageContainer extends react.Component {\r\n    state = {\r\n        messages: [],\r\n        body: '',\r\n        toggledState: false,\r\n        listening: false,\r\n        newMessages: false\r\n    }\r\n    TOKEN = window.localStorage.getItem('token')\r\n\r\n    async componentDidMount() {\r\n        await this.fetchMessages();\r\n        this.props.fetchUnreadNotifications()\r\n        addEventListener('new-message', this.onRecieveNewMessage)\r\n        this.props.fetchConversations()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // remove message event handler\r\n        removeEventListener('new-message', this.onRecieveNewMessage)\r\n    }\r\n\r\n\r\n\r\n    // TODO: add invite reverse scroll\r\n    fetchMessages = async () => {\r\n        try {\r\n            let { data } = await axios.get('/conversation/' + this.props.conversation.id, {\r\n                headers: getDefaultHeader(),\r\n                params: {\r\n                    limit: 20,\r\n                    skip: 0\r\n                }\r\n            });\r\n\r\n            this.setState({\r\n                messages: data.messages.reverse(),\r\n                total: data.total\r\n            })\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    sendMessage = async () => {\r\n        if (this.state.body.replace(/ /g, \"\") === '') return;\r\n\r\n        try {\r\n            let { data } = await axios.post('/message/' + this.props.conversation.recipient.id, {\r\n                body: this.state.body\r\n            }, {\r\n                headers: getDefaultHeader()\r\n            })\r\n            let { messages } = this.state;\r\n            messages.push(data.message);\r\n            this.setState({\r\n                messages,\r\n                body: ''\r\n            })\r\n            this.props.fetchConversations()\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n\r\n    toggleCollapse = () => {\r\n        let newToggleState = !this.state.toggledState\r\n        this.setState({\r\n            toggledState: newToggleState\r\n        })\r\n\r\n        let elem = document.getElementById(this.props.conversation.id)\r\n\r\n\r\n        if (newToggleState) {\r\n            anime({\r\n                targets: [elem],\r\n                height: 64,\r\n                easing: 'easeInOutQuad',\r\n                duration: 300\r\n            })\r\n        } else {\r\n            this.setState({\r\n                newMessages: false\r\n            })\r\n            anime({\r\n                targets: [elem],\r\n                height: 364,\r\n                easing: 'easeInOutQuad',\r\n                duration: 300\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    onRecieveNewMessage = (message) => {\r\n\r\n        let { messages } = this.state;\r\n        messages.push(message);\r\n        this.setState({\r\n            messages\r\n        })\r\n        if (this.state.toggledState) {\r\n            this.setState({\r\n                newMessages: true\r\n            })\r\n        }\r\n        this.props.fetchConversations()\r\n    }\r\n\r\n    readAllMessages = async () => {\r\n        try {\r\n            await bugg.Message.readAllMessages(this.props.conversation.id)\r\n            this.props.fetchUnreadNotifications()\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let { removeConversation, conversation } = this.props;\r\n\r\n\r\n\r\n        return (\r\n            <Card\r\n                headStyle={{\r\n                    backgroundColor: '#2f2f2f',\r\n                    color: 'white',\r\n\r\n                }}\r\n                id={conversation.id}\r\n                title={<> {conversation.reciepent.name} {this.state.newMessages ? <Tag style={{ marginLeft: 10 }} color='red'>New Message</Tag> : null} </>}\r\n                extra={\r\n                    <Space size='middle'>\r\n                        <Button\r\n                            onClick={this.toggleCollapse}\r\n\r\n                            type='text' icon={<MinusOutlined style={{ color: 'white' }} />} />\r\n                        <Button\r\n                            type='text'\r\n                            onClick={async () => {\r\n                                await this.readAllMessages()\r\n                                removeConversation(conversation.id)\r\n                            }}\r\n                            icon={<CloseOutlined style={{ color: 'white' }} />}\r\n                        />\r\n\r\n\r\n                    </Space>}\r\n\r\n                style={{\r\n                    width: 350,\r\n                    //height: 64 \r\n                    borderColor: 'rgba(0,0,0,.3)',\r\n                    padding: 0,\r\n                    overflow: 'hidden',\r\n                    display: this.props.toggleHide ? 'none' : 'block'\r\n                }}\r\n                bodyStyle={{\r\n                    padding: 0,\r\n                    height: 300\r\n                }}\r\n            >\r\n                <div style={{\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    height: '100%'\r\n                }}>\r\n                    <div\r\n                        style={{\r\n                            display: 'flex',\r\n                            flex: 1,\r\n                            // justifyContent: 'flex-end',\r\n                            flexDirection: 'column-reverse',\r\n                            overflowY: 'auto'\r\n                        }}\r\n                        direction='vertical'>\r\n                        {/* <Message sender message=\"bruh\" /> */}\r\n                        {/* {(new Array(20)).fill(2).map((val, ind) => <div>\r\n                            <Message sender message={\"bruh \" + ind} />\r\n                        </div>)} */}\r\n                        <List\r\n\r\n                            dataSource={this.state.messages}\r\n                            renderItem={(item, index) =>\r\n                                <div key={item.id}>\r\n                                    <Message\r\n                                        sender={item.sender.isYou}\r\n                                        recipient={!item.sender.isYou}\r\n                                        timestamp={item.createdAt}\r\n                                        avatarLetter={item.sender.name.substring(0, 1).toUpperCase()}\r\n                                        message={item.body} />\r\n                                </div>\r\n\r\n                            }\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{\r\n                        //backgroundColor: 'green',\r\n                        width: '100%',\r\n                        padding: 6,\r\n                        display: 'inline-flex'\r\n                    }}>\r\n                        <Input\r\n                            style={{\r\n                                flex: 1,\r\n                                marginRight: 10\r\n                            }}\r\n                            placeholder='Start Typing...'\r\n                            value={this.state.body}\r\n                            onChange={(e) => this.setState({ body: e.target.value })}\r\n                            onPressEnter={this.sendMessage}\r\n\r\n                        />\r\n                        <Button\r\n                            // style={{\r\n                            //     height: 60\r\n                            // }}\r\n                            onClick={this.sendMessage}\r\n                            type='primary' >\r\n                            Send\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </Card>\r\n        )\r\n    }\r\n}","import react from \"react\";\r\nimport { Input, message, Modal, Select } from \"antd\";\r\nimport axios from \"axios\";\r\nimport { getDefaultHeader } from '../pages/config';\r\nimport { getErrorMessage } from '../libraries/network-error-handling';\r\n\r\n\r\nconst { Option } = Select;\r\n\r\n\r\nexport default class CreateConversation extends react.Component {\r\n    state = {\r\n        members: [],\r\n        selectedMember: '',\r\n        query: '',\r\n        body: ''\r\n    }\r\n    TOKEN = window.localStorage.getItem('token')\r\n\r\n    searchUsers = async () => {\r\n        let results;\r\n        const { query } = this.state;\r\n        try {\r\n            results = await axios.get('/user/search', {\r\n                params: {\r\n                    query: query\r\n                },\r\n                headers: getDefaultHeader()\r\n            })\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n\r\n            return\r\n        }\r\n\r\n        //console.log(results.data)\r\n        let newMembers = [];\r\n        let users = results.data.results;\r\n        for (let i = 0; i < users.length; i++) {\r\n            newMembers.push({\r\n                key: users[i].id,\r\n                name: users[i].name,\r\n                email: users[i].email,\r\n                id: users[i].id\r\n            })\r\n        }\r\n        this.setState({\r\n            members: newMembers\r\n        })\r\n    }\r\n\r\n    selectUser = (value) => {\r\n        this.setState({\r\n            selectedMember: value\r\n        })\r\n    }\r\n\r\n    sendMessage = async () => {\r\n        if (this.state.body.replace(/ /g, \"\") === '') {\r\n            message.error(\"Please enter message\")\r\n            return\r\n        };\r\n\r\n        if (!this.state.selectedMember) {\r\n            message.error(\"Please select a recipient\")\r\n            return\r\n        }\r\n\r\n        try {\r\n            let { data } = await axios.post('/message/' + this.state.selectedMember, {\r\n                body: this.state.body\r\n            }, {\r\n                headers: getDefaultHeader()\r\n            })\r\n            // let { messages } = this.state;\r\n            // messages.push(data.message);\r\n            this.setState({\r\n\r\n                body: ''\r\n            })\r\n            console.log(data.message.conversation)\r\n            await this.props.fetchConversations()\r\n            this.props.selectConversation(data.message.conversation)\r\n            this.props.closeModal()\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal\r\n                visible={this.props.visible}\r\n                title='Send New Message'\r\n                onCancel={this.props.closeModal}\r\n                onOk={this.sendMessage}\r\n                destroyOnClose\r\n            >\r\n                <p>Send To:</p>\r\n                <Select\r\n                    showSearch\r\n                    placeholder={\"search...\"}\r\n                    style={{ width: '100%' }}\r\n                    filterOption={false}\r\n                    onSearch={(e) => {\r\n                        this.setState({\r\n                            query: e\r\n                        }, this.searchUsers)\r\n                    }}\r\n                    onChange={this.selectUser}\r\n\r\n                >\r\n                    {this.state.members.map(doc => <Option key={doc.id}>{`${doc.name} (${doc.email})`}</Option>)}\r\n                </Select>\r\n                <br />\r\n                <p style={{ marginTop: 20 }}>Message:</p>\r\n                <Input\r\n                    onChange={(e) => this.setState({ body: e.target.value })}\r\n                    value={this.state.body}\r\n                    onPressEnter={this.sendMessage}\r\n                    placeholder='Start typing...'\r\n                />\r\n            </Modal>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport {\r\n    withRouter\r\n} from \"react-router-dom\";\r\nimport MessageContacts from './../components/MessageContacts';\r\nimport {\r\n    Button,\r\n    Space,\r\n    Tooltip,\r\n} from 'antd';\r\nimport {\r\n    MessageOutlined\r\n} from '@ant-design/icons';\r\nimport anime from 'animejs/lib/anime.es.js';\r\nimport MessageContainer from '../components/MessageContainer';\r\nimport CreateConversation from '../components/CreateConversation';\r\nimport { logErrorMessage } from '../libraries/network-error-handling';\r\nimport { addEventListener, removeEventListener } from '../libraries/socket';\r\nimport bugg from './../libraries/bugg';\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isAuthed: false,\r\n            collapsed: true,\r\n            contactsCollapsed: false,\r\n            openMessageCollapsed: false,\r\n            toggleHide: true,\r\n            conversations: [],\r\n            activeConversations: [],\r\n            socket: null,\r\n            createConversationIsVisible: false\r\n        };\r\n\r\n    }\r\n\r\n    // TODO: on recieve new message, re fetch conversations\r\n    componentDidMount() {\r\n        this.fetchConversations()\r\n        // this.connectToSocket()\r\n        this.props.setOpenNewMessage(this.openNewMessage);\r\n        addEventListener('new-message', this.fetchConversations)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        removeEventListener('new-message', this.fetchConversations)\r\n    }\r\n\r\n    toggleHideSimple = (disableRefresh) => {\r\n        let newToggleHide = !this.state.toggleHide;\r\n        this.setState({ toggleHide: newToggleHide })\r\n\r\n\r\n        if (!newToggleHide && disableRefresh !== true) {\r\n            this.fetchConversations()\r\n\r\n        }\r\n    }\r\n\r\n    openNewMessage = async (conversationId) => {\r\n        // alert('HEY')\r\n        if (this.state.toggleHide) {\r\n            this.toggleHideSimple(true)\r\n        }\r\n\r\n        await this.fetchConversations()\r\n        let conversationIds = this.state.conversations.map(doc => doc.id);\r\n        console.log(conversationId)\r\n        console.log(conversationIds)\r\n        let ind = conversationIds.indexOf(conversationId);\r\n        console.log(ind)\r\n        if (ind === -1) return;\r\n\r\n        this.selectConversation(this.state.conversations[ind]);\r\n    }\r\n\r\n    // TODO: rework to aim for multiple components\r\n    toggleCollapse = (name) => {\r\n        let toggledState = !this.state[name];\r\n\r\n        this.setState({\r\n            [name]: toggledState\r\n        })\r\n\r\n        let elem;\r\n\r\n        if (name === 'contactsCollapsed') {\r\n            elem = document.getElementById('contacts-card')\r\n\r\n        } else if (name === 'openMessageCollapsed') {\r\n            elem = document.getElementById('open-message-card')\r\n        }\r\n\r\n        if (toggledState) {\r\n\r\n            anime({\r\n                targets: [elem],\r\n                height: 64,\r\n                easing: 'easeInOutQuad',\r\n                duration: 300\r\n            })\r\n        } else {\r\n            anime({\r\n                targets: [elem],\r\n                height: 364,\r\n                easing: 'easeInOutQuad',\r\n                duration: 300\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Recieves conversations from server and sets state\r\n     * \r\n     */\r\n    fetchConversations = async () => {\r\n        try {\r\n            // let { data: { conversations } } = await axios.get('/conversation/all', {\r\n            //     headers: getDefaultHeader()\r\n            // })\r\n            let conversations = await bugg.Message.getConversations()\r\n            await new Promise((res) => this.setState({ conversations }, res))\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n\r\n    selectConversation = (conversation) => {\r\n        let newConvos = this.state.activeConversations\r\n        if (newConvos.map((doc) => doc.id).includes(conversation.id)) return\r\n\r\n        if (newConvos.length === 2) {\r\n            newConvos.splice(0, 1)\r\n            newConvos.push(conversation)\r\n        } else {\r\n            newConvos.push(conversation)\r\n        }\r\n        this.setState({\r\n            activeConversations: newConvos\r\n        })\r\n        this.props.setActiveConversationIds(newConvos.map(doc => doc.id))\r\n    }\r\n\r\n    /**\r\n     * removes conversation from state\r\n     * @param {string} conversationId \r\n     */\r\n    removeConversation = (conversationId) => {\r\n        let newConvos = this.state.activeConversations;\r\n        let index = newConvos.findIndex((value) => value.id === conversationId);\r\n\r\n        if (index !== -1) {\r\n            newConvos.splice(index, 1);\r\n            this.setState({\r\n                activeConversations: newConvos\r\n            })\r\n            this.props.setActiveConversationIds(newConvos.map(doc => doc.id))\r\n        }\r\n        this.fetchConversations()\r\n\r\n    }\r\n\r\n    showNew = (conversation) => {\r\n        let activeConversationsIds = this.state.activeConversations.map(doc => doc.id);\r\n\r\n        if (activeConversationsIds.includes(conversation.id)) {\r\n            return false;\r\n        } else {\r\n            return conversation.newMessages\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        const { isMobile } = this.props;\r\n\r\n        return (\r\n            <Space\r\n                align={isMobile ? 'start' : 'end'}\r\n                size='large'\r\n                direction={isMobile ? 'vertical' : 'horizontal'}\r\n                style={{\r\n                    position: 'fixed',\r\n                    left: isMobile ? 10 : 17.5,\r\n                    bottom: 20,\r\n                    zIndex: 100,\r\n\r\n\r\n                }}>\r\n                {\r\n                    !isMobile && <Tooltip\r\n                        placement='right'\r\n                        title=\"Messages\">\r\n                        <Button shape=\"circle\" size='large'\r\n                            onClick={this.toggleHideSimple}\r\n                            icon={<MessageOutlined />} />\r\n                    </Tooltip>}\r\n                {\r\n                    // Contacts card\r\n                }\r\n                <div>\r\n                    <MessageContacts\r\n                        toggleCollapse={() => this.toggleCollapse('contactsCollapsed')}\r\n                        toggleHide={this.state.toggleHide}\r\n                        isMobile={isMobile}\r\n                        sendMessage={() => this.setState({ createConversationIsVisible: true })}\r\n                        conversations={this.state.conversations}\r\n                        selectConversation={(e, item) => {\r\n                            this.selectConversation(item)\r\n                            e.preventDefault()\r\n                        }}\r\n                        activeConversations={this.state.activeConversations}\r\n                    />\r\n                </div>\r\n\r\n                {\r\n                    this.state.activeConversations.map((item) =>\r\n                        <MessageContainer\r\n                            key={item.id}\r\n                            socket={this.state.socket}\r\n                            toggleHide={this.state.toggleHide}\r\n                            fetchConversations={this.fetchConversations}\r\n                            removeConversation={this.removeConversation}\r\n                            conversation={item}\r\n                            fetchUnreadNotifications={this.props.fetchUnreadNotifications}\r\n                        />\r\n                    )\r\n                }\r\n                {\r\n                    isMobile && <Tooltip\r\n                        placement='right'\r\n                        title=\"Messages\">\r\n                        <Button shape=\"circle\" size='large'\r\n                            onClick={this.toggleHideSimple}\r\n                            icon={<MessageOutlined />} />\r\n                    </Tooltip>}\r\n\r\n                <CreateConversation\r\n                    visible={this.state.createConversationIsVisible}\r\n                    fetchConversations={this.fetchConversations}\r\n                    selectConversation={this.selectConversation}\r\n                    closeModal={() => this.setState({ createConversationIsVisible: false })}\r\n                />\r\n            </Space >\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(App);\r\n","import { withRouter } from 'react-router-dom';\r\nimport { Space, Button, Menu } from 'antd'\r\nimport anime from \"animejs\";\r\nimport {\r\n    MenuUnfoldOutlined,\r\n    MenuFoldOutlined,\r\n    DesktopOutlined,\r\n    SettingOutlined,\r\n    CodeOutlined\r\n} from '@ant-design/icons';\r\nimport React from 'react';\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nclass DesktopNavBar extends React.Component {\r\n    state = {\r\n        collapsed: false,\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.initialCollasped !== undefined) {\r\n            this.toggleCollapsed(this.props.initialCollasped)\r\n        } else {\r\n            this.toggleCollapsed(false)\r\n        }\r\n    }\r\n\r\n    async componentWillUnmount() {\r\n        await this.toggleCollapsed(true, true)\r\n        // await anime({\r\n        //     targets: [document.getElementById('bugg-dashboard')],\r\n        //     paddingLeft: 10,\r\n        //     duration: 300,\r\n        //     easing: 'easeInOutQuad',\r\n        // }).finished\r\n        //  document.getElementById('bugg-dashboard').style.paddingLeft = '10px';\r\n    }\r\n\r\n    toggleCollapsed = async (value, willUnmount) => {\r\n        let collapsed = !this.state.collapsed;\r\n        if (typeof value === 'boolean') collapsed = value;\r\n\r\n        this.setState({\r\n            collapsed\r\n        });\r\n\r\n        let logo = document.getElementById('bugg-nav-logo');\r\n        let panel = document.getElementById('bugg-nav-background');\r\n        let button = document.getElementById('bugg-nav-collaspe-button');\r\n        let dashboard = document.getElementById('bugg-dashboard');\r\n\r\n        await animate({\r\n            logo,\r\n            collapsed,\r\n            panel,\r\n            button,\r\n            dashboard\r\n        }, willUnmount)\r\n    };\r\n\r\n    render() {\r\n        let projects = this.props.projects ?? [];\r\n        return (\r\n            <div\r\n                id=\"bugg-nav-background\"\r\n                className=\"navigation\" style={styles.navigation}>\r\n                <Space\r\n                    style={styles.Space1}\r\n                    align='center'\r\n                    direction='horizontal'\r\n                >\r\n                    <Button\r\n                        id=\"bugg-nav-collaspe-button\"\r\n                        type=\"text\"\r\n                        onClick={this.toggleCollapsed}\r\n                        style={styles.Button1}>\r\n                        {\r\n                            React.createElement(this.state.collapsed ? MenuUnfoldOutlined : MenuFoldOutlined)\r\n                        }\r\n                    </Button>\r\n                    <h2\r\n                        id=\"bugg-nav-logo\"\r\n                        style={styles.h2}>\r\n                        Bugg\r\n                    </h2>\r\n                </Space>\r\n\r\n\r\n                <Menu\r\n                    defaultSelectedKeys={['home']}\r\n                    defaultOpenKeys={['sub1']}\r\n                    mode=\"inline\"\r\n                    theme='dark'\r\n                    style={styles.Menu}\r\n                    inlineCollapsed={this.state.collapsed}\r\n                >\r\n                    <Menu.Item key=\"home\"\r\n                        onClick={() => this.props.history.push('/dashboard')}\r\n                        style={styles.Item1}\r\n                        icon={<DesktopOutlined />}>\r\n                        Home\r\n                    </Menu.Item>\r\n\r\n\r\n                    <Menu.Item key=\"settings\"\r\n                        onClick={() => this.props.history.push('/dashboard/settings')}\r\n                        style={{\r\n                            backgroundColor: 'transparent'\r\n                        }}\r\n                        icon={<SettingOutlined />}>\r\n                        Settings\r\n                    </Menu.Item>\r\n\r\n                    <SubMenu\r\n                        key=\"projects\"\r\n                        style={{\r\n                            backgroundColor: 'transparent'\r\n                        }}\r\n                        icon={<CodeOutlined />}\r\n                        title=\"Projects\"\r\n                        className=\"bugg-sub-menu\"\r\n\r\n                    >\r\n                        {\r\n                            projects.map((doc, ind) =>\r\n                                <Menu.Item\r\n                                    style={{\r\n                                        backgroundColor: 'transparent'\r\n                                    }}\r\n                                    onClick={() => this.props.history.push('/dashboard/projects/' + doc.id)}\r\n                                    //className=\"bugg-sub-menu\"\r\n                                    key={doc.id}>{doc.title}</Menu.Item>\r\n                            )\r\n                        }\r\n                    </SubMenu>\r\n\r\n                </Menu>\r\n\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst animate = async (obj = {\r\n    collapsed: '',\r\n    logo: '',\r\n    panel: '',\r\n    button: '',\r\n    dashboard: ''\r\n}, willUnmount) => {\r\n    if (obj.collapsed) {\r\n        // TODO collaspe animation\r\n        await Promise.all([\r\n            anime({\r\n                targets: [obj.logo],\r\n                // color: 'rgba(0, 0, 0, .5)',\r\n                opacity: 0,\r\n                translateX: 30,\r\n                duration: 300,\r\n                easing: 'easeInOutQuad',\r\n            }).finished,\r\n            anime({\r\n                targets: [obj.panel],\r\n                width: 75,\r\n                easing: 'easeInOutQuad',\r\n                duration: 300\r\n            }).finished,\r\n            anime({\r\n                targets: [obj.button],\r\n                translateX: 8,\r\n                duration: 100,\r\n                easing: 'easeInOutQuad',\r\n                scale: 1.2\r\n            }).finished,\r\n            anime({\r\n                targets: [obj.dashboard],\r\n                paddingLeft: (willUnmount ? 20 : 130),\r\n                duration: 300,\r\n                easing: 'easeInOutQuad',\r\n\r\n            }).finished,\r\n        ])\r\n\r\n\r\n\r\n\r\n\r\n    } else {\r\n        // Expand\r\n        await Promise.all([\r\n            anime({\r\n                targets: [obj.logo],\r\n                color: 'rgba(255, 255, 255, 1)',\r\n                opacity: 1,\r\n                translateX: 0,\r\n                duration: 300,\r\n                easing: 'easeInOutQuad',\r\n            }).finished,\r\n            anime({\r\n                targets: [obj.panel],\r\n                width: 270,\r\n                easing: 'easeInOutQuad',\r\n                duration: 300\r\n            }).finished,\r\n            anime({\r\n                delay: 0,\r\n                targets: [obj.button],\r\n                translateX: 0,\r\n                duration: 100,\r\n                easing: 'easeInOutQuad',\r\n                scale: 1\r\n            }).finished,\r\n            anime({\r\n                targets: [obj.dashboard],\r\n                paddingLeft: 330,\r\n                duration: 300,\r\n                easing: 'easeInOutQuad',\r\n\r\n            }).finished\r\n        ])\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nconst styles = {\r\n    Dashboard: {\r\n        display: 'inline-flex',\r\n        width: '100%',\r\n        paddingLeft: 330,\r\n        paddingBottom: 64\r\n    },\r\n    navigation: {\r\n        color: 'white',\r\n        width: 0,//270,\r\n        zIndex: 10,\r\n        'box-shadow': '-7px 0px 13px 0px black',\r\n        boxShadow: 1,\r\n        overflowY: 'auto',\r\n        overflowX: 'hidden',\r\n        position: 'fixed',\r\n        left: 0,\r\n        top: 0,\r\n        height: '100%',\r\n        backgroundColor: '#0093E9',\r\n        backgroundImage: 'linear-gradient(43deg, #0093E9 0%, #80D0C7 100%)',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    },\r\n    Space1: {\r\n        marginTop: 30,\r\n        paddingLeft: 9,\r\n        marginBottom: 30\r\n    },\r\n    Button1: {\r\n\r\n        //marginLeft: 9, \r\n        color: 'white'\r\n    },\r\n    h2: {\r\n        // marginBottom: 30,\r\n        // marginLeft: 0,\r\n        // marginTop: 30,\r\n        margin: 0,\r\n        color: 'white',\r\n        // position: 'fixed',\r\n        top: 29,\r\n        left: 70\r\n    },\r\n    Menu: {\r\n        backgroundColor: 'transparent'\r\n    },\r\n    Item1:\r\n    {\r\n        backgroundColor: 'transparent'\r\n    },\r\n    header: {\r\n        width: '100%',\r\n        display: 'inline-flex',\r\n        justifyContent: 'space-between',\r\n        height: 110,\r\n        alignItems: 'center'\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(DesktopNavBar)","import { useState } from 'react';\r\nimport {\r\n    Space,\r\n    Badge,\r\n    Avatar,\r\n    Menu,\r\n    Button,\r\n    Dropdown\r\n} from 'antd'\r\n\r\nimport {\r\n    BellFilled,\r\n\r\n} from '@ant-design/icons';\r\nimport { useMediaQuery } from 'react-responsive'\r\n\r\n\r\nfunction NavWelcomeHeader(props) {\r\n    const isMobile = useMediaQuery({ maxWidth: 800 });\r\n\r\n    return (\r\n        <div\r\n            className=\"header\"\r\n            style={styles.header}>\r\n            <h2 style={{\r\n                ...(isMobile ? { fontSize: 18 } : {})\r\n            }}>\r\n                {'Welcome' + (props.name ? ', ' : '') + props.name}\r\n            </h2>\r\n            <Space\r\n            // size={isMobile ? 'small' : 'large'}\r\n            //size={(isMobile ? 'small' : 'large')}\r\n            >\r\n                <Badge\r\n                    offset={[-4, 8]}\r\n                    count={props.unreadNotifications}>\r\n                    <Button\r\n                        type='default'\r\n                        shape='circle'\r\n                        size='large'\r\n                        style={{\r\n                            transform: 'scale(1.2)',\r\n                            color: 'rgba(0,0,0,.7)',\r\n\r\n                        }}\r\n\r\n                        onClick={props.toggleNotificationDrawer}\r\n                        icon={<BellFilled\r\n                            style={{\r\n                                //fontSize: 64\r\n                            }} />}\r\n                    />\r\n                </Badge>\r\n\r\n                <style>\r\n                    {`\r\n            .bugg-profile-pic:hover {\r\n                cursor: pointer;\r\n            }\r\n            `}\r\n                </style>\r\n                <Dropdown\r\n                    //overlay={<AvatarSettings />}\r\n                    overlay={menu({ logout: props.logout })}\r\n                    trigger={['click']}\r\n                >\r\n\r\n                    <Avatar\r\n                        className=\"bugg-profile-pic\"\r\n                        size={isMobile ? 50 : 50}\r\n                        src={props.userIconUri}\r\n                        //icon={<UserOutlined />} \r\n\r\n                        style={{\r\n                            marginRight: 64,\r\n                            borderWidth: 1,\r\n                            borderColor: 'rgba(0,0,0,.2)',\r\n                            borderStyle: 'solid',\r\n                            ...(isMobile ? { marginRight: 10 } : {})\r\n                        }} />\r\n\r\n\r\n                </Dropdown>\r\n\r\n            </Space>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nconst menu = (props) => (\r\n    <Menu style={{\r\n        width: 150,\r\n    }}>\r\n        <Menu.Item\r\n            onClick={props.logout}\r\n            style={{\r\n                color: 'red'\r\n            }}\r\n            key=\"0\">\r\n            Logout\r\n        </Menu.Item>\r\n\r\n    </Menu>\r\n);\r\n\r\nconst styles = {\r\n    header: {\r\n        width: '100%',\r\n        display: 'inline-flex',\r\n        justifyContent: 'space-between',\r\n        height: 110,\r\n        alignItems: 'center'\r\n    }\r\n}\r\n\r\nconst mobileStyles = {\r\n\r\n}\r\n\r\nexport default NavWelcomeHeader","import { withRouter } from 'react-router-dom';\r\nimport { Space, Button, Menu } from 'antd'\r\nimport anime from \"animejs\";\r\nimport {\r\n    MenuUnfoldOutlined,\r\n    MenuFoldOutlined,\r\n    DesktopOutlined,\r\n    SettingOutlined,\r\n    CodeOutlined\r\n} from '@ant-design/icons';\r\nimport React from 'react';\r\nconst { SubMenu } = Menu;\r\n\r\nclass MobileNavBar extends React.Component {\r\n    state = {\r\n        collapsed: true,\r\n    }\r\n\r\n\r\n    toggleCollapsed = async () => {\r\n        let backdrop = document.getElementById('bugg-mobile-nav-backdrop');\r\n        // backdrop.style.display = 'block';\r\n        // backdrop.style.opacity = 1;\r\n\r\n\r\n\r\n        let collapsed = !this.state.collapsed;\r\n\r\n        this.setState({\r\n            collapsed\r\n        });\r\n\r\n        let logo = document.getElementById('bugg-nav-logo-mobile');\r\n        let panel = document.getElementById('bugg-nav-background-mobile');\r\n        let button = document.getElementById('bugg-nav-collaspe-button-mobile');\r\n        let dashboard = document.getElementById('bugg-dashboard');\r\n\r\n        try {\r\n            await animate({\r\n                logo,\r\n                collapsed,\r\n                panel,\r\n                button,\r\n                dashboard,\r\n                backdrop\r\n            })\r\n        } catch (e) {\r\n            alert(e)\r\n        }\r\n\r\n    };\r\n\r\n    navigateTo = (pathname) => {\r\n        this.props.history.push(pathname);\r\n        this.toggleCollapsed()\r\n    }\r\n\r\n\r\n    render() {\r\n        let projects = this.props.projects ?? [];\r\n        return (\r\n            <>\r\n                <div style={{\r\n                    height: 64,\r\n                    borderColor: 'rgba(0,0,0,.1)',\r\n                    borderWidth: 0,\r\n                    borderBottomWidth: 1,\r\n                    borderStyle: 'solid',\r\n                    marginLeft: -20,\r\n                    marginRight: -10\r\n\r\n                }}>\r\n                    <div\r\n\r\n                        style={{\r\n                            height: 64,\r\n                            display: 'flex',\r\n                            flexDirection: 'row',\r\n                            alignItems: 'center',\r\n                            paddingLeft: 20,\r\n                            gap: 15,\r\n                            zIndex: 100,\r\n                            position: 'fixed',\r\n                            top: 0,\r\n                            left: 0,\r\n                            width: '100%',\r\n                            boxShadow: 'black 0px -4px 13px 0px',\r\n                            backgroundImage: 'linear-gradient( 43deg, rgb(0, 147, 233) 0%, rgb(128, 208, 199) 100%)',\r\n                            backgroundColor: 'rgb(0, 147, 233)'\r\n                        }}\r\n                    >\r\n                        <Button\r\n                            type='ghost'\r\n                            //type=\"text\"\r\n                            onClick={this.toggleCollapsed}\r\n                            style={styles.Button1}>\r\n                            {this.state.collapsed ? <MenuUnfoldOutlined style={{ color: 'white' }} /> : <MenuFoldOutlined style={{ color: 'white' }} />}\r\n\r\n                        </Button>\r\n                        <h3 style={{ margin: 0, color: 'white' }}>Bugg</h3>\r\n                    </div>\r\n\r\n                </div>\r\n                <div\r\n                    id=\"bugg-nav-background-mobile\"\r\n                    // className=\"navigation\"\r\n                    style={{\r\n                        ...styles.navigation,\r\n                        transform: 'translateX(-270px)'\r\n\r\n                    }}>\r\n                    <Space\r\n                        style={styles.Space1}\r\n                        align='center'\r\n                        direction='horizontal'\r\n                    >\r\n                        <Button\r\n                            id=\"bugg-nav-collaspe-button-mobile\"\r\n                            type=\"text\"\r\n                            onClick={this.toggleCollapsed}\r\n                            style={styles.Button1}>\r\n                            {\r\n                                React.createElement(this.state.collapsed ? MenuUnfoldOutlined : MenuFoldOutlined)\r\n                            }\r\n                        </Button>\r\n                        <h2\r\n                            id=\"bugg-nav-logo-mobile\"\r\n                            style={styles.h2}>\r\n                            Bugg\r\n                        </h2>\r\n                    </Space>\r\n\r\n\r\n                    <Menu\r\n                        defaultSelectedKeys={['home']}\r\n                        defaultOpenKeys={['projects']}\r\n                        mode=\"inline\"\r\n                        theme='dark'\r\n                        style={styles.Menu}\r\n                        inlineCollapsed={this.state.collapsed}\r\n                    >\r\n                        <Menu.Item key=\"home\"\r\n                            onClick={() => this.navigateTo('/dashboard')}\r\n                            style={styles.Item1}\r\n                            icon={<DesktopOutlined />}>\r\n                            Home\r\n                        </Menu.Item>\r\n\r\n\r\n                        <Menu.Item key=\"settings\"\r\n                            onClick={() => this.navigateTo('/dashboard/settings')}\r\n                            style={{\r\n                                backgroundColor: 'transparent'\r\n                            }}\r\n                            icon={<SettingOutlined />}>\r\n                            Settings\r\n                        </Menu.Item>\r\n\r\n                        <SubMenu\r\n                            key=\"projects\"\r\n                            style={{\r\n                                backgroundColor: 'transparent'\r\n                            }}\r\n                            icon={<CodeOutlined />}\r\n                            title=\"Projects\"\r\n                            className=\"bugg-sub-menu\"\r\n\r\n                        >\r\n                            {\r\n                                projects.map((doc, ind) =>\r\n                                    <Menu.Item\r\n                                        style={{\r\n                                            backgroundColor: 'transparent'\r\n                                        }}\r\n                                        onClick={() => this.navigateTo('/dashboard/projects/' + doc.id)}\r\n                                        //className=\"bugg-sub-menu\"\r\n                                        key={doc.id}>{doc.title}</Menu.Item>\r\n                                )\r\n                            }\r\n                        </SubMenu>\r\n\r\n                    </Menu>\r\n\r\n\r\n\r\n                </div>\r\n                <div\r\n                    onClick={() => {\r\n                        if (this.state.collapsed === false) {\r\n                            this.toggleCollapsed()\r\n                        }\r\n                    }}\r\n                    id=\"bugg-mobile-nav-backdrop\"\r\n                    style={{\r\n                        display: 'none',\r\n                        opacity: 0,\r\n                        position: 'fixed',\r\n                        top: 0,\r\n                        left: 0,\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        backgroundColor: 'rgba(0 0 0 / 50%)',\r\n                        zIndex: 10000000,\r\n                    }}\r\n                >dsadsa\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst animate = async (obj = {\r\n    collapsed: '',\r\n    logo: '',\r\n    panel: '',\r\n    button: '',\r\n    dashboard: '',\r\n    backdrop: ''\r\n}, willUnmount) => {\r\n    if (obj.collapsed) {\r\n        // TODO collaspe animation\r\n\r\n\r\n        await Promise.all([\r\n            anime({\r\n                targets: [obj.logo],\r\n                // color: 'rgba(0, 0, 0, .5)',\r\n                opacity: 0,\r\n                translateX: 30,\r\n                duration: 300,\r\n                easing: 'easeInOutQuad',\r\n            }).finished,\r\n            anime({\r\n                targets: [obj.panel],\r\n                translateX: -270,\r\n                easing: 'easeInOutQuad',\r\n                duration: 300\r\n            }).finished,\r\n            anime({\r\n                targets: [obj.button],\r\n                translateX: 8,\r\n                duration: 100,\r\n                easing: 'easeInOutQuad',\r\n                scale: 1.2\r\n            }).finished,\r\n            anime({\r\n                targets: [obj.backdrop],\r\n                opacity: 0,\r\n                duration: 300,\r\n                easing: 'easeInOutQuad',\r\n\r\n            }).finished,\r\n        ])\r\n        obj.backdrop.style.display = 'none'\r\n\r\n\r\n\r\n\r\n    } else {\r\n        // Expand\r\n        obj.backdrop.style.display = 'block';\r\n        await Promise.all([\r\n            anime({\r\n                targets: [obj.logo],\r\n                color: 'rgba(255, 255, 255, 1)',\r\n                opacity: 1,\r\n                translateX: 0,\r\n                duration: 300,\r\n                easing: 'easeInOutQuad',\r\n            }).finished,\r\n            anime({\r\n                targets: [obj.panel],\r\n                translateX: 0,\r\n                easing: 'easeInOutQuad',\r\n                duration: 300\r\n            }).finished,\r\n            anime({\r\n                delay: 0,\r\n                targets: [obj.button],\r\n                translateX: 0,\r\n                duration: 100,\r\n                easing: 'easeInOutQuad',\r\n                scale: 1\r\n            }).finished,\r\n            anime({\r\n                targets: [obj.backdrop],\r\n                opacity: 1,\r\n                duration: 300,\r\n                easing: 'easeInOutQuad',\r\n\r\n            }).finished,\r\n        ])\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nconst styles = {\r\n    Dashboard: {\r\n        display: 'inline-flex',\r\n        width: '100%',\r\n        paddingLeft: 330,\r\n        paddingBottom: 64\r\n    },\r\n    navigation: {\r\n        color: 'white',\r\n        width: 270,\r\n        zIndex: 100000000,\r\n        'box-shadow': '-7px 0px 13px 0px black',\r\n        boxShadow: 1,\r\n        overflowY: 'auto',\r\n        overflowX: 'hidden',\r\n        position: 'fixed',\r\n        left: 0,\r\n        top: 0,\r\n        height: '100%',\r\n        backgroundColor: '#0093E9',\r\n        backgroundImage: 'linear-gradient(43deg, #0093E9 0%, #80D0C7 100%)',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n    },\r\n    Space1: {\r\n        marginTop: 30,\r\n        paddingLeft: 9,\r\n        marginBottom: 30\r\n    },\r\n    Button1: {\r\n\r\n        //marginLeft: 9, \r\n        color: 'white'\r\n    },\r\n    h2: {\r\n        // marginBottom: 30,\r\n        // marginLeft: 0,\r\n        // marginTop: 30,\r\n        margin: 0,\r\n        color: 'white',\r\n        // position: 'fixed',\r\n        top: 29,\r\n        left: 70\r\n    },\r\n    Menu: {\r\n        backgroundColor: 'transparent'\r\n    },\r\n    Item1:\r\n    {\r\n        backgroundColor: 'transparent'\r\n    },\r\n    header: {\r\n        width: '100%',\r\n        display: 'inline-flex',\r\n        justifyContent: 'space-between',\r\n        height: 110,\r\n        alignItems: 'center'\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(MobileNavBar)","import React from 'react';\r\nimport {\r\n    Route,\r\n    withRouter\r\n} from \"react-router-dom\";\r\nimport SkeletonProject from './sub-pages/SkeletonProject';\r\nimport {\r\n    Menu,\r\n    Drawer,\r\n    notification,\r\n    message\r\n} from 'antd';\r\nimport Home from './../components/Home';\r\nimport Settings from './Settings';\r\nimport Notifications from './Notifications';\r\nimport Messages from './Messages';\r\nimport axios from 'axios';\r\nimport MediaQuery from 'react-responsive';\r\nimport DesktopNavBar from '../components/DesktopNavBar';\r\nimport NavWelcomeHeader from '../components/NavWelcomeHeader';\r\nimport MobileNavBar from '../components/MobileNavBar';\r\nimport { getErrorMessage, logErrorMessage } from './../libraries/network-error-handling';\r\nimport { baseUrl, getDefaultHeader } from './config';\r\nimport bugg from '../libraries/bugg';\r\nimport { addEventListener, removeEventListener, reconfigToken, unsubscribeFromMessages } from './../libraries/socket';\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isAuthed: false,\r\n            collapsed: false,\r\n            toggleDrawer: false,\r\n            projects: [],\r\n            socket: null,\r\n            name: '',\r\n            userIconUri: '',\r\n            unreadNotifications: 0,\r\n            activeConversationIds: [],\r\n            initialStyles: {\r\n\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    setActiveConversationIds = (value) => this.setState({ activeConversationIds: value })\r\n\r\n    fetchUnreadNotifications = async () => {\r\n\r\n        try {\r\n            let unreadNotifications = await bugg.Notification.getUnreadNotifications();\r\n\r\n            this.setState({\r\n                unreadNotifications\r\n            })\r\n        } catch (e) {\r\n            // alert(getErrorMessage(e))\r\n            logErrorMessage(e)\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateProjects()\r\n        this.getWelcomeMessage();\r\n        reconfigToken()\r\n        this.fetchUnreadNotifications()\r\n        addEventListener('new-notification', this.onRecieveNotitification)\r\n    }\r\n\r\n    handleErrorTest = async () => {\r\n        try {\r\n            await axios.get('/throw-error')\r\n        } catch (e) {\r\n            let message = getErrorMessage(e);\r\n            console.log(message)\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.location !== prevProps.location) {\r\n            this.updateProjects()\r\n        }\r\n    }\r\n\r\n\r\n    openNewMessage = () => undefined;\r\n\r\n    setOpenNewMessage = (func) => {\r\n        this.openNewMessage = (conversationId) => {\r\n            func(conversationId)\r\n            this.setState({\r\n                toggleDrawer: false\r\n            })\r\n        };\r\n    }\r\n\r\n    logout = () => {\r\n        let token = window.localStorage.getItem('token');\r\n        unsubscribeFromMessages(token);\r\n        window.localStorage.removeItem('token');\r\n        this.props.history.push('/auth')\r\n    }\r\n\r\n    updateProjects = async () => {\r\n        try {\r\n            let { data } = await axios.get('/project/all', {\r\n                headers: getDefaultHeader()\r\n            });\r\n            this.setState({\r\n                projects: data.projects\r\n            });\r\n            // console.log(data.projects)\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n    getAction = (notification) => {\r\n        switch (notification.type) {\r\n            case 'PROJECT_INVITE':\r\n                this.joinProject(notification.payload.projectId)\r\n                break;\r\n            case 'NEW_MESSAGE':\r\n                this.openNewMessage(notification.payload.conversationId);\r\n                break;\r\n            case 'NEW_BUG':\r\n                this.props.history\r\n                    .push('/dashboard/projects/' + notification.payload.projectId + `?action=OPEN_BUG&bugId=${notification.payload.bugId}`);\r\n                this.setState({\r\n                    toggleDrawer: false\r\n                })\r\n                break;\r\n            case 'NEW_ANNOUNCEMENT':\r\n                this.props.history\r\n                    .push('/dashboard/projects/' + notification.payload.projectId + `?action=OPEN_ANNOUNCEMENT&announcementId=${notification.payload.announcementId}`);\r\n                this.setState({\r\n                    toggleDrawer: false\r\n                })\r\n                break;\r\n            default:\r\n                message.error(\"no type given\")\r\n        }\r\n    }\r\n\r\n\r\n    getNotificationCallToAction = (type) => {\r\n        let messages = {\r\n            'PROJECT_INVITE': ' Click this notification to join.',\r\n            'NEW_MESSAGE': ' Click this notification to view.',\r\n        }\r\n\r\n        return messages[type] ?? ' Click this notification to view.'\r\n    }\r\n\r\n    onRecieveNotitification = (notif) => {\r\n        // alert('SHIT')\r\n        this.fetchUnreadNotifications()\r\n        if (notif.type === 'NEW_MESSAGE' && this.state.activeConversationIds.includes(notif.payload.conversationId)) return\r\n\r\n        notification.open({\r\n            message: notif.title,\r\n            description: notif.description + this.getNotificationCallToAction(notif.type),\r\n            onClick: () => {\r\n                this.getAction(notif)\r\n                this.dismissNotification(notif.id)\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    /**\r\n     * Dismisses notification on server\r\n     * @param {string} notificationId Id of notification\r\n     */\r\n    dismissNotification = async (notificationId) => {\r\n        try {\r\n            await axios.delete(baseUrl + '/notification/' + notificationId, {\r\n                headers: getDefaultHeader()\r\n            })\r\n            this.fetchUnreadNotifications()\r\n\r\n        } catch (e) {\r\n            logErrorMessage(e)\r\n\r\n        }\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        removeEventListener('new-notification', this.onRecieveNotitification)\r\n    }\r\n\r\n    getWelcomeMessage = async () => {\r\n        let formatName = (name) => {\r\n            var nameSegments = name.split(' ');\r\n            let shortHandName = nameSegments[0];\r\n\r\n            if (nameSegments[1]) {\r\n                shortHandName += ' ' + nameSegments[1].substring(0, 1).toUpperCase() + '.'\r\n            }\r\n\r\n            return shortHandName\r\n        }\r\n        try {\r\n            let user = await bugg.User.getMe();\r\n            let userIconUri = await bugg.User.getUserIconUri();\r\n            this.setState({\r\n                name: formatName(user.name),\r\n                userIconUri\r\n            });\r\n        } catch (e) {\r\n            console.error(getErrorMessage(e))\r\n        }\r\n    }\r\n\r\n\r\n    joinProject = async (projectId) => {\r\n\r\n        try {\r\n            let { data } = await axios.post('/project/join', {\r\n                projectId\r\n            }, {\r\n                headers: getDefaultHeader()\r\n            })\r\n            notification.success({\r\n                message: 'You have joined project ' + data.project.title + '!'\r\n            })\r\n            this.updateProjects();\r\n        } catch (e) {\r\n            logErrorMessage(e);\r\n            notification.error({\r\n                message: getErrorMessage(e)\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <MediaQuery maxWidth={800}>\r\n                {(isMobile) =>\r\n                    <div\r\n                        id=\"bugg-dashboard\"\r\n                        className=\"Dashboard\" style={{\r\n                            // display: isMobile ? 'inline-flex',\r\n                            width: '100%',\r\n                            paddingLeft: 20,//330,\r\n                            paddingRight: 10,\r\n                            paddingBottom: 64\r\n                        }}>\r\n                        {!isMobile &&\r\n                            <DesktopNavBar projects={this.state.projects} />\r\n                        }\r\n                        {\r\n                            isMobile &&\r\n                            <MobileNavBar projects={this.state.projects} />\r\n                        }\r\n                        <div className=\"main-wrapper\" style={{\r\n                            flex: 1\r\n                        }}>\r\n\r\n                            <NavWelcomeHeader\r\n                                name={this.state.name}\r\n                                unreadNotifications={this.state.unreadNotifications}\r\n                                logout={this.logout}\r\n                                userIconUri={this.state.userIconUri}\r\n                                toggleNotificationDrawer={() => this.setState({ toggleDrawer: true })}\r\n                            />\r\n                            <Route exact path=\"/dashboard\">\r\n\r\n                                <Home\r\n                                    projects={this.state.projects}\r\n                                    updateProjects={this.updateProjects}\r\n                                />\r\n                                {/* <Overview /> */}\r\n                            </Route>\r\n                            <Route path='/dashboard/settings'>\r\n                                <Settings getWelcomeMessage={this.getWelcomeMessage} />\r\n                            </Route>\r\n                            <Route path=\"/dashboard/projects/:projectId\">\r\n                                <SkeletonProject updateProjects={this.updateProjects} />\r\n                            </Route>\r\n                        </div>\r\n                        {\r\n                            // move to react hook for media query\r\n                        }\r\n                        <Drawer\r\n                            // {...notificationDrawerProps}\r\n                            // width={500}\r\n\r\n                            width={isMobile ? '90%' : 500}\r\n                            title=\"Notifications\"\r\n                            placement=\"right\"\r\n                            closable={true}\r\n                            onClose={() => {\r\n                                this.fetchUnreadNotifications()\r\n                                this.setState({ toggleDrawer: false })\r\n                            }}\r\n                            destroyOnClose={true}\r\n                            visible={this.state.toggleDrawer}\r\n                        >\r\n                            <Notifications\r\n                                close={() => {\r\n                                    this.fetchUnreadNotifications()\r\n                                    this.setState({ toggleDrawer: false })\r\n                                }}\r\n                                openNewMessage={this.openNewMessage}\r\n                                joinProject={this.joinProject}\r\n                                socket={this.state.socket}\r\n                            />\r\n                        </Drawer>\r\n\r\n                        <Messages\r\n                            isMobile={isMobile}\r\n                            setActiveConversationIds={this.setActiveConversationIds}\r\n                            setOpenNewMessage={this.setOpenNewMessage}\r\n                            fetchUnreadNotifications={this.fetchUnreadNotifications} />\r\n                    </div >\r\n                }\r\n            </MediaQuery>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default withRouter(App);\r\n","import React from 'react';\nimport Authentication from './pages/Authentication';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from \"react-router-dom\";\nimport Dashboard from './pages/Dashboard';\nimport './App.less';\nimport axios from 'axios';\nimport { baseUrl } from './pages/config';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAuthed: false\n    };\n\n  }\n\n  componentDidMount() {\n    if (window.localStorage.getItem('token')) {\n\n      this.setState({\n        isAuthed: true\n      })\n    }\n  }\n\n  render() {\n    let isAuthed = (window.localStorage.getItem('token') !== null);\n    axios.defaults.baseURL = baseUrl;\n    return (\n      <Router>\n        {\n\n          !isAuthed ? <Redirect to=\"/auth\" /> : null\n        }\n        {\n          (() => {\n            if (window.location.pathname.indexOf('dashboard') !== -1 && isAuthed) {\n              return false;\n            } else if (isAuthed) {\n              return true\n            } else {\n              return false\n            }\n          })() ? <Redirect to=\"dashboard\" /> : null\n        }\n        <Switch>\n          <Route path='/auth'>\n            <Authentication />\n          </Route>\n          <Route path='/dashboard'>\n            <Dashboard />\n          </Route>\n        </Switch>\n      </Router>\n\n    );\n  }\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}